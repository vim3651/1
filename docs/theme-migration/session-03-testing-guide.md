# ä¼šè¯ 3 æµ‹è¯•æŒ‡å—

**æ›´æ–°æ—¥æœŸï¼š** 2025-11-05

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯åŸºç¡€é¢œè‰²ä» CSS Variables è¯»å–çš„åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œç¡®ä¿ï¼š
1. åŸºç¡€é¢œè‰²æ­£ç¡®æ˜¾ç¤º
2. æ‰€æœ‰ä¸»é¢˜é£æ ¼éƒ½èƒ½æ­£å¸¸å·¥ä½œ
3. äº®è‰²/æš—è‰²æ¨¡å¼åˆ‡æ¢æ­£å¸¸
4. æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™

---

## ğŸ“‹ æµ‹è¯•æ¸…å•

### 1. æ„å»ºæµ‹è¯• âœ…
```bash
npm run build
```
**é¢„æœŸç»“æœï¼š** æ„å»ºæˆåŠŸï¼Œæ— é”™è¯¯

**å®é™…ç»“æœï¼š** âœ… é€šè¿‡

---

### 2. Linter æµ‹è¯• âœ…
```bash
# è‡ªåŠ¨æ£€æŸ¥
```
**é¢„æœŸç»“æœï¼š** æ—  lint é”™è¯¯

**å®é™…ç»“æœï¼š** âœ… é€šè¿‡

---

### 3. åŠŸèƒ½æµ‹è¯•ï¼ˆéœ€è¦å®é™…è¿è¡Œï¼‰

#### 3.1 åŸºç¡€é¢œè‰²æ˜¾ç¤ºæµ‹è¯•
**æ­¥éª¤ï¼š**
1. å¯åŠ¨åº”ç”¨
2. è§‚å¯Ÿç•Œé¢åŸºç¡€é¢œè‰²
3. æ£€æŸ¥ä»¥ä¸‹å…ƒç´ ï¼š
   - ä¸»è‰²ï¼ˆPrimary Colorï¼‰
   - æ¬¡è‰²ï¼ˆSecondary Colorï¼‰
   - èƒŒæ™¯è‰²ï¼ˆBackgroundï¼‰
   - çº¸å¼ è‰²ï¼ˆPaperï¼‰
   - æ–‡å­—é¢œè‰²ï¼ˆText Primary/Secondaryï¼‰
   - åˆ†éš”çº¿ï¼ˆDividerï¼‰

**é¢„æœŸç»“æœï¼š**
- æ‰€æœ‰é¢œè‰²æ˜¾ç¤ºæ­£å¸¸
- ä¸ä¹‹å‰ç‰ˆæœ¬è§†è§‰æ•ˆæœä¸€è‡´

---

#### 3.2 ä¸»é¢˜é£æ ¼åˆ‡æ¢æµ‹è¯•
**æ­¥éª¤ï¼š**
1. è¿›å…¥ **è®¾ç½® > ä¸»é¢˜è®¾ç½®**
2. ä¾æ¬¡åˆ‡æ¢ä»¥ä¸‹ä¸»é¢˜é£æ ¼ï¼š
   - Defaultï¼ˆé»˜è®¤ï¼‰
   - Claudeï¼ˆå…‹åŠ³å¾·ï¼‰
   - Natureï¼ˆè‡ªç„¶ï¼‰
   - Techï¼ˆç§‘æŠ€ï¼‰
   - Softï¼ˆæŸ”å’Œï¼‰
3. æ¯æ¬¡åˆ‡æ¢åè§‚å¯ŸåŸºç¡€é¢œè‰²å˜åŒ–

**é¢„æœŸç»“æœï¼š**
- æ¯ä¸ªä¸»é¢˜çš„åŸºç¡€é¢œè‰²æ­£ç¡®æ˜¾ç¤º
- åˆ‡æ¢æµç•…ï¼Œæ— å»¶è¿Ÿ
- æ— é¢œè‰²é—ªçƒæˆ–é”™è¯¯

**æµ‹è¯•è¦ç‚¹ï¼š**
| ä¸»é¢˜é£æ ¼ | Primary | Secondary | Background | å¤‡æ³¨ |
|---------|---------|-----------|------------|------|
| Default | #2196F3 | #F50057   | #FAFAFA (äº®) / #121212 (æš—) | è“è‰²+ç²‰çº¢ |
| Claude  | #D97706 | #059669   | #FEF7ED (äº®) / #1C1917 (æš—) | æš–è‰²ç³» |
| Nature  | #2D5016 | #8B7355   | #F5F5F0 (äº®) / #1A1C18 (æš—) | è‡ªç„¶ç»¿ |
| Tech    | #3B82F6 | #8B5CF6   | #F8F9FA (äº®) / #0F1419 (æš—) | ç§‘æŠ€è“ |
| Soft    | #EC4899 | #14B8A6   | #FDF8FF (äº®) / #1A1625 (æš—) | æŸ”å’Œç²‰ |

---

#### 3.3 äº®è‰²/æš—è‰²æ¨¡å¼åˆ‡æ¢æµ‹è¯•
**æ­¥éª¤ï¼š**
1. åœ¨æ¯ä¸ªä¸»é¢˜é£æ ¼ä¸‹
2. åˆ‡æ¢ **äº®è‰²æ¨¡å¼** â‡„ **æš—è‰²æ¨¡å¼**
3. è§‚å¯ŸåŸºç¡€é¢œè‰²å˜åŒ–

**é¢„æœŸç»“æœï¼š**
- èƒŒæ™¯è‰²æ­£ç¡®åˆ‡æ¢
- æ–‡å­—é¢œè‰²æ­£ç¡®åˆ‡æ¢
- è¾¹æ¡†å’Œåˆ†éš”çº¿é¢œè‰²æ­£ç¡®åˆ‡æ¢
- åˆ‡æ¢æµç•…ï¼Œæ— é—ªçƒ

---

#### 3.4 ç»„ä»¶æ¸²æŸ“æµ‹è¯•
**æ­¥éª¤ï¼š**
1. æ‰“å¼€èŠå¤©é¡µé¢
2. æ£€æŸ¥ä»¥ä¸‹ç»„ä»¶çš„é¢œè‰²ï¼š
   - é¡¶éƒ¨å¯¼èˆªæ 
   - ä¾§è¾¹æ 
   - æ¶ˆæ¯åˆ—è¡¨èƒŒæ™¯
   - è¾“å…¥æ¡†èƒŒæ™¯
   - æŒ‰é’®é¢œè‰²
   - å¡ç‰‡é¢œè‰²

**é¢„æœŸç»“æœï¼š**
- æ‰€æœ‰ç»„ä»¶é¢œè‰²æ­£å¸¸
- ä¸ä¹‹å‰ç‰ˆæœ¬è§†è§‰æ•ˆæœä¸€è‡´

---

#### 3.5 CSS Variables æ³¨å…¥éªŒè¯
**æ­¥éª¤ï¼š**
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. åœ¨ Console ä¸­è¾“å…¥ï¼š
```javascript
// æ£€æŸ¥ CSS Variables æ˜¯å¦æ­£ç¡®æ³¨å…¥
const root = document.documentElement;
const style = getComputedStyle(root);
console.log({
  primary: style.getPropertyValue('--theme-primary'),
  secondary: style.getPropertyValue('--theme-secondary'),
  bgDefault: style.getPropertyValue('--theme-bg-default'),
  bgPaper: style.getPropertyValue('--theme-bg-paper'),
  textPrimary: style.getPropertyValue('--theme-text-primary'),
  textSecondary: style.getPropertyValue('--theme-text-secondary'),
  divider: style.getPropertyValue('--theme-border-default'),
});
```

**é¢„æœŸç»“æœï¼š**
- æ‰€æœ‰ CSS Variables éƒ½æœ‰å€¼
- é¢œè‰²å€¼æ ¼å¼æ­£ç¡®ï¼ˆRGB æˆ– HEXï¼‰
- å€¼ä¸å½“å‰ä¸»é¢˜ä¸€è‡´

---

#### 3.6 å›é€€æœºåˆ¶æµ‹è¯•
**æ­¥éª¤ï¼š**
1. æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åœ¨ Console ä¸­ä¸´æ—¶æ¸…é™¤ CSS Variablesï¼š
```javascript
document.documentElement.style.removeProperty('--theme-primary');
document.documentElement.style.removeProperty('--theme-secondary');
```
3. è§‚å¯Ÿç•Œé¢æ˜¯å¦ä»ç„¶æ­£å¸¸

**é¢„æœŸç»“æœï¼š**
- ç•Œé¢ä»ç„¶æ­£å¸¸æ˜¾ç¤º
- é¢œè‰²å›é€€åˆ° `theme.palette` çš„å€¼
- æ— é”™è¯¯æˆ–è­¦å‘Š

---

### 4. æ€§èƒ½æµ‹è¯•

#### 4.1 æ¸²æŸ“æ€§èƒ½
**æ­¥éª¤ï¼š**
1. æ‰“å¼€æµè§ˆå™¨æ€§èƒ½åˆ†æå·¥å…·ï¼ˆPerformanceï¼‰
2. å½•åˆ¶åˆ‡æ¢ä¸»é¢˜çš„è¿‡ç¨‹
3. åˆ†ææ¸²æŸ“æ—¶é—´

**é¢„æœŸç»“æœï¼š**
- åˆ‡æ¢ä¸»é¢˜æ—¶é—´ < 100ms
- æ— æ˜æ˜¾æ€§èƒ½ä¸‹é™
- æ— å†…å­˜æ³„æ¼

#### 4.2 åˆå§‹åŒ–æ€§èƒ½
**æ­¥éª¤ï¼š**
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. åˆ·æ–°é¡µé¢
3. è§‚å¯Ÿåˆå§‹åŠ è½½æ—¶é—´

**é¢„æœŸç»“æœï¼š**
- åˆå§‹åŒ–æ—¶é—´æ— æ˜æ˜¾å¢åŠ 
- CSS Variables æ­£ç¡®æ³¨å…¥
- æ— é—ªçƒæˆ–é¢œè‰²è·³å˜

---

### 5. è¾¹ç•Œæƒ…å†µæµ‹è¯•

#### 5.1 å¿«é€Ÿåˆ‡æ¢æµ‹è¯•
**æ­¥éª¤ï¼š**
1. å¿«é€Ÿè¿ç»­åˆ‡æ¢ä¸»é¢˜é£æ ¼
2. å¿«é€Ÿè¿ç»­åˆ‡æ¢äº®è‰²/æš—è‰²æ¨¡å¼

**é¢„æœŸç»“æœï¼š**
- åº”ç”¨ç¨³å®šï¼Œä¸å´©æºƒ
- æœ€ç»ˆæ˜¾ç¤ºæ­£ç¡®çš„ä¸»é¢˜
- æ— é¢œè‰²æ®‹ç•™

#### 5.2 ç§»åŠ¨ç«¯æµ‹è¯•
**æ­¥éª¤ï¼š**
1. åœ¨ç§»åŠ¨è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šæ‰“å¼€åº”ç”¨
2. é‡å¤ä¸Šè¿°åŠŸèƒ½æµ‹è¯•

**é¢„æœŸç»“æœï¼š**
- æ‰€æœ‰åŠŸèƒ½åœ¨ç§»åŠ¨ç«¯æ­£å¸¸å·¥ä½œ
- æ— é¢å¤–çš„å…¼å®¹æ€§é—®é¢˜

---

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

- [x] æ„å»ºæˆåŠŸï¼Œæ— é”™è¯¯
- [x] Linter é€šè¿‡ï¼Œæ— è­¦å‘Š
- [ ] æ‰€æœ‰ä¸»é¢˜é£æ ¼é¢œè‰²æ­£ç¡®
- [ ] äº®è‰²/æš—è‰²æ¨¡å¼åˆ‡æ¢æ­£å¸¸
- [ ] ç»„ä»¶æ¸²æŸ“æ­£ç¡®
- [ ] CSS Variables æ­£ç¡®æ³¨å…¥
- [ ] å›é€€æœºåˆ¶æ­£å¸¸å·¥ä½œ
- [ ] æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™
- [ ] æ— è¾¹ç•Œæƒ…å†µé—®é¢˜
- [ ] ç§»åŠ¨ç«¯æ­£å¸¸å·¥ä½œ

---

## ğŸ› å·²çŸ¥é—®é¢˜

ç›®å‰æ— å·²çŸ¥é—®é¢˜ã€‚

---

## ğŸ“ æµ‹è¯•è®°å½•

### 2025-11-05
- âœ… æ„å»ºæµ‹è¯•é€šè¿‡
- âœ… Linter æµ‹è¯•é€šè¿‡
- â³ åŠŸèƒ½æµ‹è¯•å¾…è¿è¡Œæ—¶éªŒè¯

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹å½“å‰ CSS Variables
```javascript
const getAllCSSVariables = () => {
  const style = getComputedStyle(document.documentElement);
  const vars = {};
  for (let i = 0; i < style.length; i++) {
    const prop = style[i];
    if (prop.startsWith('--theme-')) {
      vars[prop] = style.getPropertyValue(prop);
    }
  }
  return vars;
};

console.table(getAllCSSVariables());
```

### 2. æ¯”è¾ƒ CSS Variables vs theme.palette
```javascript
// åœ¨ React DevTools æˆ– Console ä¸­
import { useTheme } from '@mui/material/styles';
const theme = useTheme();
console.log('theme.palette:', theme.palette);
```

### 3. ç›‘å¬ CSS Variables å˜åŒ–
```javascript
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
      console.log('CSS Variables updated');
    }
  });
});

observer.observe(document.documentElement, {
  attributes: true,
  attributeFilter: ['style']
});
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä¼šè¯ 3 è¿›åº¦æ–‡æ¡£](./session-03-progress.md)
- [ä¸»é¢˜è¿ç§»è®¡åˆ’](./theme-migration-plan.md)
- [è®¾è®¡ä»¤ç‰Œæ–‡æ¡£](../../src/shared/design-tokens/README.md)




