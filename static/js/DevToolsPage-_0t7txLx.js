import{t as e}from"./InputAdornment-DO0tC8Wv.js";import{n as t,t as n}from"./Tabs-DsnHk16H.js";import{t as r}from"./circle-check-B0NHRkcd.js";import{t as i}from"./circle-x-CT1DTRz7.js";import{t as a}from"./clock-Dks_woIj.js";import{t as o}from"./play-CM6mFUlz.js";import{t as ee}from"./search-DqeTnaF8.js";import{t as s}from"./share-2-C0ilI4j0.js";import{d as c,p as l}from"./exportUtils-nOgP4gyG.js";import{t as u}from"./wifi-D9s-JR6V.js";import{Ad as d,Al as f,Cd as p,Cu as m,Du as h,Ed as g,Eu as _,Gi as v,Jc as y,Ml as b,Nl as x,Od as S,Ol as C,Ql as w,Rl as T,S as E,Su as D,Ud as te,Vu as O,Wu as ne,Xl as k,Zu as A,_ as j,_u as M,ad as N,bd as P,cd as F,ci as re,dd as I,fd as L,id as ie,jd as R,kd as z,ku as B,nd as ae,o as V,ou as oe,pp as se,pu as H,qd as U,qp as W,rd as ce,s as G,td as K,vd as q,wl as J,xd as Y,xp as le,xu as ue,zp as de}from"./index-hvLbsAjx.js";import fe from"./EnhancedConsoleService-CgYqophJ.js";var pe=D(`bug`,[[`path`,{d:`M12 20v-9`,key:`1qisl0`}],[`path`,{d:`M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z`,key:`uouzyp`}],[`path`,{d:`M14.12 3.88 16 2`,key:`qol33r`}],[`path`,{d:`M21 21a4 4 0 0 0-3.81-4`,key:`1b0z45`}],[`path`,{d:`M21 5a4 4 0 0 1-3.55 3.97`,key:`5cxbf6`}],[`path`,{d:`M22 13h-4`,key:`1jl80f`}],[`path`,{d:`M3 21a4 4 0 0 1 3.81-4`,key:`1fjd4g`}],[`path`,{d:`M3 5a4 4 0 0 0 3.55 3.97`,key:`1d7oge`}],[`path`,{d:`M6 13H2`,key:`82j7cp`}],[`path`,{d:`m8 2 1.88 1.88`,key:`fmnt4t`}],[`path`,{d:`M9 7.13V6a3 3 0 1 1 6 0v1.13`,key:`1vgav8`}]]),me=D(`mouse-pointer-2`,[[`path`,{d:`M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z`,key:`edeuup`}]]),he=D(`square-check-big`,[[`path`,{d:`M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344`,key:`2acyp4`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),X=W(de(),1),Z=W(le(),1),Q=(0,X.forwardRef)(({autoScroll:t=!0,selectionMode:n=!1,selectedIds:r=new Set,onSelectionChange:i},a)=>{let{t:s}=re(),c=te(),[l,u]=(0,X.useState)([]),[f,m]=(0,X.useState)({levels:new Set([`log`,`info`,`warn`,`error`,`debug`]),searchText:``,showTimestamps:!0}),[h,g]=(0,X.useState)(``),[v,y]=(0,X.useState)([]),[x,S]=(0,X.useState)(-1),w=(0,X.useRef)(null),T=fe.getInstance();(0,X.useEffect)(()=>{let e=T.addListener(e=>{u(e)});return u(T.getEntries()),e},[]),(0,X.useEffect)(()=>{t&&w.current&&w.current.scrollIntoView({behavior:`smooth`})},[l,t]);let E=()=>{h.trim()&&(y([...v,h]),S(-1),T.executeCommand(h),g(``))},D=e=>{if(e.key===`Enter`)E();else if(e.key===`ArrowUp`){if(e.preventDefault(),x<v.length-1){let e=x+1;S(e),g(v[v.length-1-e])}}else if(e.key===`ArrowDown`)if(e.preventDefault(),x>0){let e=x-1;S(e),g(v[v.length-1-e])}else x===0&&(S(-1),g(``))},A=e=>{switch(e){case`error`:return c.palette.error.main;case`warn`:return c.palette.warning.main;case`info`:return c.palette.info.main;case`debug`:return c.palette.success.main;default:return c.palette.text.primary}},j=e=>{switch(e){case`error`:return(0,Z.jsx)(H,{size:16});case`warn`:return(0,Z.jsx)(C,{size:16});case`info`:return(0,Z.jsx)(k,{size:16});case`debug`:return(0,Z.jsx)(pe,{size:16});default:return(0,Z.jsx)(b,{size:16})}},M=T.getFilteredEntries(f);(0,X.useImperativeHandle)(a,()=>({getFilteredEntries:()=>M}),[M]);let N=e=>{if(!i)return;let t=new Set(r);t.has(e)?t.delete(e):t.add(e),i(t)};return(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,height:`100%`,bgcolor:`transparent`},children:[(0,Z.jsx)(d,{elevation:0,sx:{p:2,borderBottom:`1px solid ${c.palette.divider}`,bgcolor:c.palette.mode===`dark`?U(c.palette.background.paper,.4):c.palette.background.paper,borderRadius:0},children:(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Z.jsx)(_,{size:`small`,placeholder:s(`devtools.console.searchPlaceholder`),value:f.searchText,onChange:e=>m(t=>({...t,searchText:e.target.value})),InputProps:{startAdornment:(0,Z.jsx)(e,{position:`start`,children:(0,Z.jsx)(ee,{size:18,style:{color:c.palette.text.secondary}})}),endAdornment:f.searchText&&(0,Z.jsx)(e,{position:`end`,children:(0,Z.jsx)(p,{size:`small`,onClick:()=>m(e=>({...e,searchText:``})),sx:{p:.5},children:(0,Z.jsx)(J,{size:14})})})},fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.05):U(c.palette.common.black,.02),"&:hover":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.08):U(c.palette.common.black,.04)},"&.Mui-focused":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.08):U(c.palette.common.black,.04)}}}}),(0,Z.jsxs)(L,{sx:{display:`flex`,gap:1,flexWrap:`wrap`,alignItems:`center`},children:[(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,sx:{mr:.5,fontWeight:500},children:s(`devtools.console.level`)}),[`error`,`warn`,`info`,`log`,`debug`].map(e=>(0,Z.jsx)(q,{label:e.toUpperCase(),size:`small`,variant:f.levels.has(e)?`filled`:`outlined`,color:e===`error`?`error`:e===`warn`?`warning`:`default`,onClick:()=>{let t=new Set(f.levels);t.has(e)?t.delete(e):t.add(e),m(e=>({...e,levels:t}))},sx:{fontWeight:f.levels.has(e)?600:400,transition:`all 0.2s`,"&:hover":{transform:`translateY(-1px)`,boxShadow:c.shadows[2]}}},e))]})]})}),(0,Z.jsx)(L,{sx:{flexGrow:1,overflow:`auto`,bgcolor:c.palette.mode===`dark`?U(c.palette.background.default,.5):c.palette.background.default,position:`relative`},children:(0,Z.jsxs)(ne,{dense:!0,sx:{p:0,fontFamily:`monospace`,fontSize:`0.8125rem`},children:[M.length===0?(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,py:8,color:`text.secondary`},children:[(0,Z.jsx)(b,{size:48,style:{opacity:.3,marginBottom:16}}),(0,Z.jsx)(Y,{variant:`body2`,color:`text.secondary`,children:f.searchText?s(`devtools.console.noResults`):s(`devtools.console.empty`)})]}):M.map((e,t)=>{let i=e.args.some(e=>{let t=T.formatArg(e);return t.length>200||t.split(`
`).length>5}),a=r.has(e.id);return(0,Z.jsx)(O,{onClick:n?()=>N(e.id):void 0,sx:{py:1.5,px:2,borderBottom:t<M.length-1?`1px solid ${U(c.palette.divider,.5)}`:`none`,bgcolor:a?U(c.palette.primary.main,.08):`transparent`,"&:hover":{bgcolor:a?U(c.palette.primary.main,.12):c.palette.mode===`dark`?U(c.palette.common.white,.05):U(c.palette.common.black,.02)},alignItems:`flex-start`,transition:`background-color 0.2s`,cursor:n?`pointer`:`default`},children:(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`flex-start`,width:`100%`,gap:1.5},children:[n&&(0,Z.jsx)(F,{checked:a,onChange:()=>N(e.id),onClick:e=>e.stopPropagation(),size:`small`,sx:{p:0,mt:.25,"&.Mui-checked":{color:`primary.main`}}}),(0,Z.jsx)(L,{sx:{color:A(e.level),mt:.25,display:`flex`,alignItems:`center`,justifyContent:`center`,width:20,height:20,flexShrink:0},children:j(e.level)}),(0,Z.jsxs)(L,{sx:{flexGrow:1,minWidth:0},children:[(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:1,mb:.5},children:[f.showTimestamps&&(0,Z.jsx)(Y,{variant:`caption`,sx:{color:`text.secondary`,fontSize:`0.75rem`,fontFamily:`monospace`},children:new Date(e.timestamp).toLocaleTimeString()}),(0,Z.jsx)(q,{label:e.level.toUpperCase(),size:`small`,sx:{height:18,fontSize:`0.65rem`,fontWeight:600,bgcolor:U(A(e.level),.15),color:A(e.level),border:`1px solid ${U(A(e.level),.3)}`}})]}),(0,Z.jsx)(L,{sx:{wordBreak:`break-word`,whiteSpace:`pre-wrap`,maxHeight:i?`300px`:`none`,overflow:i?`auto`:`visible`,border:i?`1px solid ${U(c.palette.divider,.5)}`:`none`,borderRadius:i?`6px`:0,padding:i?`10px`:`0`,backgroundColor:i?c.palette.mode===`dark`?U(c.palette.common.white,.03):U(c.palette.common.black,.015):`transparent`,"&::-webkit-scrollbar":{width:`8px`,height:`8px`},"&::-webkit-scrollbar-thumb":{backgroundColor:U(c.palette.text.secondary,.3),borderRadius:`4px`,"&:hover":{backgroundColor:U(c.palette.text.secondary,.5)}},"&::-webkit-scrollbar-track":{backgroundColor:`transparent`}},children:e.args.map((e,t)=>(0,Z.jsx)(`span`,{style:{marginRight:`8px`,color:c.palette.text.primary},children:T.formatArg(e)},t))}),e.stack&&(0,Z.jsx)(R,{in:!0,children:(0,Z.jsx)(Y,{variant:`caption`,component:`pre`,sx:{color:c.palette.error.main,fontSize:`0.75rem`,mt:1,whiteSpace:`pre-wrap`,wordBreak:`break-word`,maxHeight:`200px`,overflow:`auto`,border:`1px solid ${U(c.palette.error.main,.2)}`,borderRadius:`6px`,padding:`10px`,backgroundColor:U(c.palette.error.main,.05),fontFamily:`monospace`,"&::-webkit-scrollbar":{width:`8px`,height:`8px`},"&::-webkit-scrollbar-thumb":{backgroundColor:U(c.palette.text.secondary,.3),borderRadius:`4px`,"&:hover":{backgroundColor:U(c.palette.text.secondary,.5)}},"&::-webkit-scrollbar-track":{backgroundColor:`transparent`}},children:e.stack})})]})]})},e.id)}),(0,Z.jsx)(`div`,{ref:w})]})}),(0,Z.jsx)(d,{elevation:0,sx:{p:2,borderTop:`1px solid ${c.palette.divider}`,bgcolor:c.palette.mode===`dark`?U(c.palette.background.paper,.4):c.palette.background.paper,borderRadius:0},children:(0,Z.jsx)(_,{size:`small`,placeholder:s(`devtools.console.commandPlaceholder`),value:h,onChange:e=>g(e.target.value),onKeyDown:D,InputProps:{startAdornment:(0,Z.jsx)(e,{position:`start`,children:(0,Z.jsx)(Y,{variant:`body2`,sx:{color:`primary.main`,fontWeight:600,fontFamily:`monospace`,fontSize:`0.875rem`},children:`>`})}),endAdornment:(0,Z.jsx)(e,{position:`end`,children:(0,Z.jsx)(B,{title:s(`devtools.console.executeTooltip`),children:(0,Z.jsx)(`span`,{children:(0,Z.jsx)(p,{size:`small`,onClick:E,disabled:!h.trim(),sx:{color:h.trim()?`primary.main`:`action.disabled`,"&:hover":{bgcolor:U(c.palette.primary.main,.08)}},children:(0,Z.jsx)(o,{size:18})})})})})},fullWidth:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`,"& .MuiOutlinedInput-root":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.05):U(c.palette.common.black,.02),"&:hover":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.08):U(c.palette.common.black,.04)},"&.Mui-focused":{bgcolor:c.palette.mode===`dark`?U(c.palette.common.white,.08):U(c.palette.common.black,.04),borderColor:`primary.main`}}}})})]})});Q.displayName=`ConsolePanel`;var ge=Q,_e=W(y(),1),ve=(0,X.forwardRef)(({selectionMode:t=!1,selectedIds:n=new Set,onSelectionChange:o},l)=>{let{t:u}=re(),f=te(),h=m(f.breakpoints.down(`md`)),[,y]=(0,X.useState)([]),[b,x]=(0,X.useState)({methods:new Set([`GET`,`POST`,`PUT`,`DELETE`,`PATCH`,`HEAD`,`OPTIONS`]),statuses:new Set([`pending`,`success`,`error`,`cancelled`]),searchText:``,hideDataUrls:!0,onlyErrors:!1}),[C,T]=(0,X.useState)(null),[D,k]=(0,X.useState)(!1),j=E.getInstance();(0,X.useEffect)(()=>{let e=j.addListener(e=>{y(e)});return y(j.getEntries()),e},[]);let N=j.getFilteredEntries(b);(0,X.useImperativeHandle)(l,()=>({getFilteredEntries:()=>N}),[N]);let P=(e,t)=>{if(t&&t.stopPropagation(),!o)return;let r=new Set(n);r.has(e)?r.delete(e):r.add(e),o(r)},I=e=>{T(e),k(!0)},R=()=>C?[`=== 网络请求详情 ===`,``,`URL: ${C.url}`,`Method: ${C.method}`,`Status: ${C.statusCode||C.status}`,C.duration?`Duration: ${j.formatDuration(C.duration)}`:null,C.responseSize?`Response Size: ${j.formatSize(C.responseSize)}`:null,``,`=== Request Headers ===`,JSON.stringify(C.requestHeaders,null,2),C.requestPayload?`\n=== Request Body ===\n${typeof C.requestPayload==`string`?C.requestPayload:JSON.stringify(C.requestPayload,null,2)}`:null,``,`=== Response Headers ===`,JSON.stringify(C.responseHeaders,null,2),C.responseData?`\n=== Response Body ===\n${typeof C.responseData==`string`?C.responseData:JSON.stringify(C.responseData,null,2)}`:null].filter(Boolean).join(`
`):``,V=async()=>{let e=R();if(e)try{await navigator.clipboard.writeText(e)}catch(e){console.error(`复制失败:`,e)}},se=async()=>{let e=R();e&&await c(e,`network_request_${(0,_e.default)().format(`YYYY-MM-DD-HH-mm-ss`)}.txt`)},W=e=>{switch(e){case`success`:return(0,Z.jsx)(r,{size:16});case`error`:return(0,Z.jsx)(H,{size:16});case`pending`:return(0,Z.jsx)(a,{size:16});case`cancelled`:return(0,Z.jsx)(i,{size:16});default:return null}},ce=()=>(0,Z.jsxs)(v,{open:D,onClose:()=>k(!1),maxWidth:`md`,fullWidth:!0,fullScreen:h,PaperProps:{sx:{borderRadius:h?0:2}},children:[(0,Z.jsx)(ae,{sx:{pb:1,...h&&{paddingTop:`calc(16px + var(--safe-area-top, 0px))`,minHeight:`64px`}},children:(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:1.5},children:[(0,Z.jsx)(L,{sx:{display:`inline-flex`,alignItems:`center`,justifyContent:`center`,width:40,height:40,borderRadius:1,bgcolor:U(f.palette.primary.main,.1),color:`primary.main`},children:(0,Z.jsx)(w,{size:20})}),(0,Z.jsx)(Y,{variant:`h6`,component:`span`,sx:{fontWeight:600,flexGrow:1},children:u(`devtools.network.detailsTitle`)}),(0,Z.jsx)(B,{title:u(`devtools.network.copyAll`)||`复制全部`,children:(0,Z.jsx)(p,{size:`small`,onClick:V,sx:{color:`text.secondary`,"&:hover":{bgcolor:U(f.palette.primary.main,.08),color:`primary.main`}},children:(0,Z.jsx)(oe,{size:18})})}),(0,Z.jsx)(B,{title:u(`devtools.network.shareAsText`)||`分享为文本`,children:(0,Z.jsx)(p,{size:`small`,onClick:se,sx:{color:`text.secondary`,"&:hover":{bgcolor:U(f.palette.info.main,.08),color:`info.main`}},children:(0,Z.jsx)(s,{size:18})})}),(0,Z.jsx)(p,{size:`small`,onClick:()=>k(!1),sx:{color:`text.secondary`,"&:hover":{bgcolor:U(f.palette.error.main,.08),color:`error.main`}},children:(0,Z.jsx)(J,{size:18})})]})}),(0,Z.jsx)(K,{}),(0,Z.jsx)(ie,{sx:{pt:3,...h&&{paddingBottom:`calc(16px + var(--safe-area-bottom-computed, 0px))`}},children:C&&(0,Z.jsxs)(L,{children:[(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,gap:3,mb:3},children:[(0,Z.jsxs)(d,{elevation:0,sx:{p:2,bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.03):U(f.palette.common.black,.02),borderRadius:1},children:[(0,Z.jsx)(Y,{variant:`subtitle2`,sx:{mb:1,fontWeight:600,color:`text.secondary`},children:u(`devtools.network.url`)}),(0,Z.jsx)(Y,{variant:`body2`,sx:{wordBreak:`break-all`,fontFamily:`monospace`,fontSize:`0.875rem`,color:`text.primary`},children:C.url})]}),(0,Z.jsxs)(L,{sx:{display:`flex`,gap:2,flexWrap:`wrap`},children:[(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`caption`,sx:{color:`text.secondary`,mb:.5,display:`block`,fontWeight:500},children:u(`devtools.network.method`)}),(0,Z.jsx)(q,{label:C.method,size:`small`,sx:{bgcolor:j.getMethodColor(C.method),color:`white`,fontWeight:600,height:`28px`}})]}),(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`caption`,sx:{color:`text.secondary`,mb:.5,display:`block`,fontWeight:500},children:u(`devtools.network.status`)}),(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:.5},children:[W(C.status),(0,Z.jsx)(q,{label:C.statusCode||C.status,size:`small`,color:C.status===`success`?`success`:C.status===`error`?`error`:`default`,sx:{height:`28px`}})]})]}),C.duration&&(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`caption`,sx:{color:`text.secondary`,mb:.5,display:`block`,fontWeight:500},children:u(`devtools.network.duration`)}),(0,Z.jsx)(Y,{variant:`body2`,sx:{fontFamily:`monospace`,fontWeight:500},children:j.formatDuration(C.duration)})]}),C.responseSize&&(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`caption`,sx:{color:`text.secondary`,mb:.5,display:`block`,fontWeight:500},children:u(`devtools.network.responseSize`)}),(0,Z.jsx)(Y,{variant:`body2`,sx:{fontFamily:`monospace`,fontWeight:500},children:j.formatSize(C.responseSize)})]})]})]}),(0,Z.jsxs)(z,{defaultExpanded:!0,sx:{"&:before":{display:`none`},boxShadow:`none`,border:`1px solid ${f.palette.divider}`,borderRadius:1,mb:1},children:[(0,Z.jsx)(g,{expandIcon:(0,Z.jsx)(M,{size:18}),sx:{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.03):U(f.palette.common.black,.01),borderRadius:`8px 8px 0 0`,"&:hover":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02)}},children:(0,Z.jsx)(Y,{variant:`subtitle2`,sx:{fontWeight:600},children:u(`devtools.network.requestHeaders`)})}),(0,Z.jsx)(S,{sx:{bgcolor:`transparent`,p:2},children:(0,Z.jsx)(L,{component:`pre`,sx:{fontSize:`0.8125rem`,margin:0,whiteSpace:`pre-wrap`,wordBreak:`break-word`,fontFamily:`monospace`,bgcolor:f.palette.mode===`dark`?U(f.palette.common.black,.3):U(f.palette.common.black,.02),p:2,borderRadius:1,border:`1px solid ${U(f.palette.divider,.5)}`,maxHeight:`300px`,overflow:`auto`},children:JSON.stringify(C.requestHeaders,null,2)})})]}),C.requestPayload&&(0,Z.jsxs)(z,{sx:{"&:before":{display:`none`},boxShadow:`none`,border:`1px solid ${f.palette.divider}`,borderRadius:1,mb:1},children:[(0,Z.jsx)(g,{expandIcon:(0,Z.jsx)(M,{size:18}),sx:{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.03):U(f.palette.common.black,.01),borderRadius:`8px 8px 0 0`,"&:hover":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02)}},children:(0,Z.jsx)(Y,{variant:`subtitle2`,sx:{fontWeight:600},children:u(`devtools.network.requestBody`)})}),(0,Z.jsx)(S,{sx:{bgcolor:`transparent`,p:2},children:(0,Z.jsx)(L,{component:`pre`,sx:{fontSize:`0.8125rem`,margin:0,whiteSpace:`pre-wrap`,wordBreak:`break-word`,fontFamily:`monospace`,bgcolor:f.palette.mode===`dark`?U(f.palette.common.black,.3):U(f.palette.common.black,.02),p:2,borderRadius:1,border:`1px solid ${U(f.palette.divider,.5)}`,maxHeight:`300px`,overflow:`auto`},children:typeof C.requestPayload==`string`?C.requestPayload:JSON.stringify(C.requestPayload,null,2)})})]}),(0,Z.jsxs)(z,{sx:{"&:before":{display:`none`},boxShadow:`none`,border:`1px solid ${f.palette.divider}`,borderRadius:1,mb:1},children:[(0,Z.jsx)(g,{expandIcon:(0,Z.jsx)(M,{size:18}),sx:{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.03):U(f.palette.common.black,.01),borderRadius:`8px 8px 0 0`,"&:hover":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02)}},children:(0,Z.jsx)(Y,{variant:`subtitle2`,sx:{fontWeight:600},children:u(`devtools.network.responseHeaders`)})}),(0,Z.jsx)(S,{sx:{bgcolor:`transparent`,p:2},children:(0,Z.jsx)(L,{component:`pre`,sx:{fontSize:`0.8125rem`,margin:0,whiteSpace:`pre-wrap`,wordBreak:`break-word`,fontFamily:`monospace`,bgcolor:f.palette.mode===`dark`?U(f.palette.common.black,.3):U(f.palette.common.black,.02),p:2,borderRadius:1,border:`1px solid ${U(f.palette.divider,.5)}`,maxHeight:`300px`,overflow:`auto`},children:JSON.stringify(C.responseHeaders,null,2)})})]}),C.responseData&&(0,Z.jsxs)(z,{sx:{"&:before":{display:`none`},boxShadow:`none`,border:`1px solid ${f.palette.divider}`,borderRadius:1},children:[(0,Z.jsx)(g,{expandIcon:(0,Z.jsx)(M,{size:18}),sx:{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.03):U(f.palette.common.black,.01),borderRadius:`8px 8px 0 0`,"&:hover":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02)}},children:(0,Z.jsxs)(Y,{variant:`subtitle2`,sx:{fontWeight:600},children:[u(`devtools.network.responseBody`),C.responseHeaders?.[`content-type`]?.includes(`text/event-stream`)&&(0,Z.jsx)(q,{label:`SSE Stream`,size:`small`,sx:{ml:1,height:`20px`,fontSize:`0.7rem`,bgcolor:U(f.palette.info.main,.1),color:`info.main`}})]})}),(0,Z.jsx)(S,{sx:{bgcolor:`transparent`,p:2},children:(0,Z.jsx)(L,{component:`pre`,sx:{fontSize:`0.8125rem`,margin:0,whiteSpace:`pre-wrap`,wordBreak:`break-word`,fontFamily:`monospace`,bgcolor:f.palette.mode===`dark`?U(f.palette.common.black,.3):U(f.palette.common.black,.02),p:2,borderRadius:1,border:`1px solid ${U(f.palette.divider,.5)}`,maxHeight:`300px`,overflow:`auto`},children:typeof C.responseData==`string`?C.responseData:JSON.stringify(C.responseData,null,2)})})]})]})})]});return(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,height:`100%`,bgcolor:`transparent`},children:[(0,Z.jsx)(d,{elevation:0,sx:{p:2,borderBottom:`1px solid ${f.palette.divider}`,bgcolor:f.palette.mode===`dark`?U(f.palette.background.paper,.4):f.palette.background.paper,borderRadius:0},children:(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Z.jsx)(_,{size:`small`,placeholder:u(`devtools.network.searchPlaceholder`),value:b.searchText,onChange:e=>x(t=>({...t,searchText:e.target.value})),InputProps:{startAdornment:(0,Z.jsx)(e,{position:`start`,children:(0,Z.jsx)(ee,{size:18,style:{color:f.palette.text.secondary}})}),endAdornment:b.searchText&&(0,Z.jsx)(e,{position:`end`,children:(0,Z.jsx)(p,{size:`small`,onClick:()=>x(e=>({...e,searchText:``})),sx:{p:.5},children:(0,Z.jsx)(J,{size:14})})})},fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02),"&:hover":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.08):U(f.palette.common.black,.04)},"&.Mui-focused":{bgcolor:f.palette.mode===`dark`?U(f.palette.common.white,.08):U(f.palette.common.black,.04)}}}}),(0,Z.jsxs)(L,{sx:{display:`flex`,gap:2,flexWrap:`wrap`,alignItems:`center`},children:[(0,Z.jsx)(A,{control:(0,Z.jsx)(G,{checked:b.onlyErrors,onChange:e=>x(t=>({...t,onlyErrors:e.target.checked}))}),label:(0,Z.jsx)(Y,{variant:`body2`,children:u(`devtools.network.onlyErrors`)}),sx:{m:0}}),(0,Z.jsx)(A,{control:(0,Z.jsx)(G,{checked:!b.hideDataUrls,onChange:e=>x(t=>({...t,hideDataUrls:!e.target.checked}))}),label:(0,Z.jsx)(Y,{variant:`body2`,children:u(`devtools.network.showDataUrls`)}),sx:{m:0}})]})]})}),(0,Z.jsx)(L,{sx:{flexGrow:1,overflow:`auto`,bgcolor:f.palette.mode===`dark`?U(f.palette.background.default,.5):f.palette.background.default},children:(0,Z.jsx)(ne,{dense:!0,sx:{p:0},children:N.length===0?(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,py:8,color:`text.secondary`},children:[(0,Z.jsx)(w,{size:48,style:{opacity:.3,marginBottom:16}}),(0,Z.jsx)(Y,{variant:`body2`,color:`text.secondary`,children:b.searchText?u(`devtools.network.noResults`):u(`devtools.network.empty`)})]}):N.map((e,r)=>{let i=n.has(e.id);return(0,Z.jsx)(O,{sx:{py:1.5,px:2,borderBottom:r<N.length-1?`1px solid ${U(f.palette.divider,.5)}`:`none`,bgcolor:i?U(f.palette.primary.main,.08):`transparent`,"&:hover":{bgcolor:i?U(f.palette.primary.main,.12):f.palette.mode===`dark`?U(f.palette.common.white,.05):U(f.palette.common.black,.02)},cursor:`pointer`,transition:`background-color 0.2s`},onClick:t?()=>P(e.id):()=>I(e),children:(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,width:`100%`,gap:1.5},children:[t&&(0,Z.jsx)(F,{checked:i,onChange:()=>P(e.id),onClick:e=>e.stopPropagation(),size:`small`,sx:{p:0,"&.Mui-checked":{color:`primary.main`}}}),(0,Z.jsx)(q,{label:e.method,size:`small`,sx:{bgcolor:j.getMethodColor(e.method),color:`white`,fontWeight:600,minWidth:`64px`,height:`24px`,fontSize:`0.75rem`}}),(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:.5},children:[W(e.status),(0,Z.jsx)(q,{label:e.statusCode||e.status,size:`small`,color:e.status===`success`?`success`:e.status===`error`?`error`:`default`,sx:{height:`24px`,fontSize:`0.75rem`}})]}),(0,Z.jsx)(L,{sx:{flexGrow:1,minWidth:0,mx:1},children:(0,Z.jsx)(B,{title:e.url,arrow:!0,children:(0,Z.jsx)(Y,{variant:`body2`,sx:{overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,fontFamily:`monospace`,fontSize:`0.8125rem`},children:e.url})})}),(0,Z.jsxs)(L,{sx:{display:`flex`,gap:2,minWidth:`fit-content`,alignItems:`center`},children:[e.duration&&(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,sx:{fontFamily:`monospace`,fontSize:`0.75rem`},children:j.formatDuration(e.duration)}),e.responseSize&&(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,sx:{fontFamily:`monospace`,fontSize:`0.75rem`},children:j.formatSize(e.responseSize)}),!e.duration&&!e.responseSize&&(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,children:`-`})]})]})},e.id)})})}),ce()]})});ve.displayName=`NetworkPanel`;var ye=ve,be=W(y(),1),$=()=>{let{t:e}=re(),r=se(),i=te(),a=m(i.breakpoints.down(`md`)),[o,ee]=(0,X.useState)(0),[s,g]=(0,X.useState)(!1),[_,y]=(0,X.useState)(!1),[S,C]=(0,X.useState)(()=>{try{let e=localStorage.getItem(`devtools-auto-scroll`);return e===null?!0:JSON.parse(e)}catch{return!0}}),[w,D]=(0,X.useState)(()=>{try{let e=localStorage.getItem(`devtools-preserve-log`);return e===null?!1:JSON.parse(e)}catch{return!1}}),[O,ne]=(0,X.useState)(!1),[k,M]=(0,X.useState)(new Set),[F,R]=(0,X.useState)(new Set),z=(0,X.useRef)(null),H=(0,X.useRef)(null),W=fe.getInstance(),q=E.getInstance();(0,X.useEffect)(()=>{try{localStorage.setItem(`devtools-auto-scroll`,JSON.stringify(S))}catch(e){console.warn(`保存自动滚动设置失败:`,e)}},[S]),(0,X.useEffect)(()=>{try{localStorage.setItem(`devtools-preserve-log`,JSON.stringify(w))}catch(e){console.warn(`保存保持日志设置失败:`,e)}},[w]);let J=(e,t)=>{ee(t)},le=()=>{r(`/settings/about`)},de=()=>{o===0?(W.clear(),M(new Set)):o===1&&(q.clear(),R(new Set)),g(!1)},pe=()=>{O&&(M(new Set),R(new Set)),ne(!O)},Q=(0,X.useCallback)(()=>{if(o===0){let e=z.current?.getFilteredEntries()||[];k.size===e.length&&e.length>0?M(new Set):M(new Set(e.map(e=>e.id)))}else if(o===1){let e=H.current?.getFilteredEntries()||[];F.size===e.length&&e.length>0?R(new Set):R(new Set(e.map(e=>e.id)))}},[o,k.size,F.size]),_e=(0,X.useCallback)(async()=>{let e=``;if(o===0?e=(z.current?.getFilteredEntries()||[]).filter(e=>k.has(e.id)).map(e=>`[${new Date(e.timestamp).toLocaleTimeString()}] [${e.level.toUpperCase()}] ${e.args.map(e=>W.formatArg(e)).join(` `)}${e.stack?`\n${e.stack}`:``}`).join(`

`):o===1&&(e=(H.current?.getFilteredEntries()||[]).filter(e=>F.has(e.id)).map(e=>{let t=new Date(e.startTime).toLocaleTimeString(),n=e.duration?q.formatDuration(e.duration):`pending`;return`[${t}] ${e.method} ${e.url}\nStatus: ${e.statusCode||e.status} | Duration: ${n}`}).join(`

`)),e)try{await navigator.clipboard.writeText(e)}catch(e){console.error(`Failed to copy:`,e)}},[o,k,F]),ve=(0,X.useCallback)(async()=>{try{let e=``,t=(0,be.default)().format(`YYYY-MM-DD-HH-mm-ss`),n=``;if(o===0){let r=z.current?.getFilteredEntries()||[];if(n=`console_logs_${t}.txt`,r.length===0){V.warning(`没有控制台日志可以分享`,`分享提醒`);return}e=[`# 控制台日志导出`,`导出时间: ${(0,be.default)().format(`YYYY-MM-DD HH:mm:ss`)}`,`日志条数: ${r.length}`,``,`---`,``,...r.map(e=>`[${new Date(e.timestamp).toLocaleString()}] [${e.level.toUpperCase()}] ${e.args.map(e=>W.formatArg(e)).join(` `)}${e.stack?`\n堆栈信息: ${e.stack}`:``}`)].join(`
`)}else if(o===1){let r=H.current?.getFilteredEntries()||[];if(n=`network_logs_${t}.txt`,r.length===0){V.warning(`没有网络日志可以分享`,`分享提醒`);return}e=[`# 网络请求日志导出`,`导出时间: ${(0,be.default)().format(`YYYY-MM-DD HH:mm:ss`)}`,`请求数量: ${r.length}`,``,`---`,``,...r.map(e=>{let t=new Date(e.startTime).toLocaleString(),n=e.duration?q.formatDuration(e.duration):`pending`,r=e.responseSize?q.formatSize(e.responseSize):`-`,i=`[${t}] ${e.method} ${e.url}`;return i+=`\n状态: ${e.statusCode||e.status}`,i+=`\n耗时: ${n}`,i+=`\n大小: ${r}`,e.requestHeaders&&Object.keys(e.requestHeaders).length>0&&(i+=`\n请求头: ${JSON.stringify(e.requestHeaders,null,2)}`),e.responseHeaders&&Object.keys(e.responseHeaders).length>0&&(i+=`\n响应头: ${JSON.stringify(e.responseHeaders,null,2)}`),e.error&&(i+=`\n错误: ${e.error.message}`),i})].join(`

`)}await c(e,n)}catch(e){console.error(`分享日志失败:`,e),V.error(`分享日志失败: `+e.message,`分享错误`)}},[o,W,q]),$=o===0?k.size:F.size;return(0,Z.jsxs)(j,{children:[(0,Z.jsx)(P,{position:`static`,elevation:0,className:`status-bar-safe-area`,sx:{bgcolor:i.palette.mode===`dark`?U(i.palette.background.paper,.8):i.palette.background.paper,borderBottom:`1px solid ${i.palette.divider}`,backdropFilter:`blur(8px)`},children:(0,Z.jsxs)(h,{variant:a?`dense`:`regular`,sx:{gap:1},children:[(0,Z.jsx)(p,{edge:`start`,onClick:le,"aria-label":e(`devtools.back`),sx:{color:`text.primary`,"&:hover":{bgcolor:U(i.palette.primary.main,.08)}},children:(0,Z.jsx)(ue,{size:20})}),(0,Z.jsxs)(L,{sx:{flexGrow:1,display:`flex`,alignItems:`center`,gap:1},children:[(0,Z.jsx)(L,{sx:{display:`inline-flex`,alignItems:`center`,justifyContent:`center`,width:32,height:32,borderRadius:1,bgcolor:i.palette.mode===`dark`?U(i.palette.primary.main,.2):U(i.palette.primary.main,.1),color:`primary.main`},children:(0,Z.jsx)(b,{size:18})}),(0,Z.jsx)(Y,{variant:`h6`,component:`div`,sx:{fontWeight:600,color:`text.primary`},children:e(`devtools.title`)})]}),(0,Z.jsxs)(L,{sx:{display:`flex`,gap:.5},children:[(0,Z.jsx)(B,{title:e(O?`devtools.exitSelectMode`:`devtools.selectMode`),arrow:!0,children:(0,Z.jsx)(p,{onClick:pe,sx:{color:O?`primary.main`:`text.secondary`,bgcolor:O?U(i.palette.primary.main,.12):`transparent`,"&:hover":{bgcolor:U(i.palette.primary.main,.08),color:`primary.main`}},children:(0,Z.jsx)(me,{size:18})})}),O&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(B,{title:e(`devtools.selectAll`),arrow:!0,children:(0,Z.jsx)(p,{onClick:Q,sx:{color:`text.secondary`,"&:hover":{bgcolor:U(i.palette.primary.main,.08),color:`primary.main`}},children:$>0?(0,Z.jsx)(x,{size:18}):(0,Z.jsx)(he,{size:18})})}),(0,Z.jsx)(B,{title:`${e(`devtools.copy`)} (${$})`,arrow:!0,children:(0,Z.jsx)(`span`,{children:(0,Z.jsx)(p,{onClick:_e,disabled:$===0,sx:{color:$>0?`text.secondary`:`action.disabled`,"&:hover":{bgcolor:U(i.palette.success.main,.08),color:`success.main`}},children:(0,Z.jsx)(oe,{size:18})})})})]}),(0,Z.jsx)(B,{title:`分享日志`,arrow:!0,children:(0,Z.jsx)(p,{onClick:ve,sx:{color:`text.secondary`,"&:hover":{bgcolor:U(i.palette.success.main,.08),color:`success.main`}},children:(0,Z.jsx)(l,{size:18})})}),(0,Z.jsx)(B,{title:e(`devtools.settings`),arrow:!0,children:(0,Z.jsx)(p,{onClick:()=>y(!0),sx:{color:`text.secondary`,"&:hover":{bgcolor:U(i.palette.primary.main,.08),color:`primary.main`}},children:(0,Z.jsx)(T,{size:18})})}),(0,Z.jsx)(B,{title:e(`devtools.clear`),arrow:!0,children:(0,Z.jsx)(p,{onClick:()=>g(!0),sx:{color:`text.secondary`,"&:hover":{bgcolor:U(i.palette.error.main,.08),color:`error.main`}},children:(0,Z.jsx)(f,{size:18})})})]})]})}),(0,Z.jsx)(d,{elevation:0,square:!0,sx:{borderBottom:`1px solid ${i.palette.divider}`,bgcolor:i.palette.mode===`dark`?U(i.palette.background.paper,.6):i.palette.background.paper},children:(0,Z.jsxs)(n,{value:o,onChange:J,variant:a?`fullWidth`:`standard`,sx:{minHeight:a?48:56,"& .MuiTab-root":{minHeight:a?48:56,textTransform:`none`,fontWeight:500,fontSize:`0.875rem`,gap:1,color:`text.secondary`,"&.Mui-selected":{color:`primary.main`,fontWeight:600}},"& .MuiTabs-indicator":{height:2,borderRadius:`1px 1px 0 0`}},children:[(0,Z.jsx)(t,{icon:(0,Z.jsx)(b,{size:18}),label:e(`devtools.tabs.console`),iconPosition:`start`}),(0,Z.jsx)(t,{icon:(0,Z.jsx)(u,{size:18}),label:e(`devtools.tabs.network`),iconPosition:`start`})]})}),(0,Z.jsxs)(L,{sx:{flexGrow:1,overflow:`hidden`,position:`relative`,pb:`var(--content-bottom-padding)`},children:[o===0&&(0,Z.jsx)(ge,{ref:z,autoScroll:S,selectionMode:O,selectedIds:k,onSelectionChange:M}),o===1&&(0,Z.jsx)(ye,{ref:H,selectionMode:O,selectedIds:F,onSelectionChange:R})]}),(0,Z.jsxs)(v,{open:_,onClose:()=>y(!1),maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,Z.jsx)(ae,{sx:{pb:1},children:(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Z.jsx)(T,{size:20}),(0,Z.jsx)(Y,{variant:`h6`,component:`span`,sx:{fontWeight:600},children:e(`devtools.settingsDialog.title`)})]})}),(0,Z.jsx)(K,{}),(0,Z.jsx)(ie,{sx:{pt:2},children:(0,Z.jsxs)(L,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,Z.jsx)(A,{control:(0,Z.jsx)(G,{checked:S,onChange:e=>C(e.target.checked)}),label:(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`body1`,sx:{fontWeight:500},children:e(`devtools.settingsDialog.autoScroll.label`)}),(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,children:e(`devtools.settingsDialog.autoScroll.description`)})]}),sx:{alignItems:`flex-start`,m:0}}),(0,Z.jsx)(K,{}),(0,Z.jsx)(A,{control:(0,Z.jsx)(G,{checked:w,onChange:e=>D(e.target.checked)}),label:(0,Z.jsxs)(L,{children:[(0,Z.jsx)(Y,{variant:`body1`,sx:{fontWeight:500},children:e(`devtools.settingsDialog.preserveLog.label`)}),(0,Z.jsx)(Y,{variant:`caption`,color:`text.secondary`,children:e(`devtools.settingsDialog.preserveLog.description`)})]}),sx:{alignItems:`flex-start`,m:0}})]})}),(0,Z.jsx)(K,{}),(0,Z.jsx)(N,{sx:{px:3,py:2},children:(0,Z.jsx)(I,{onClick:()=>y(!1),variant:`contained`,sx:{textTransform:`none`,px:3},children:e(`devtools.settingsDialog.close`)})})]}),(0,Z.jsxs)(v,{open:s,onClose:()=>g(!1),maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,Z.jsx)(ae,{sx:{pb:1},children:(0,Z.jsxs)(L,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,Z.jsx)(L,{sx:{display:`inline-flex`,alignItems:`center`,justifyContent:`center`,width:40,height:40,borderRadius:1,bgcolor:U(i.palette.error.main,.1),color:`error.main`},children:(0,Z.jsx)(f,{size:20})}),(0,Z.jsx)(Y,{variant:`h6`,component:`span`,sx:{fontWeight:600},children:e(`devtools.clearDialog.title`)})]})}),(0,Z.jsx)(K,{}),(0,Z.jsx)(ie,{sx:{pt:2},children:(0,Z.jsxs)(ce,{sx:{fontSize:`0.9375rem`},children:[(0,Z.jsx)(`strong`,{children:e(o===0?`devtools.clearDialog.consoleMessage`:`devtools.clearDialog.networkMessage`)}),(0,Z.jsx)(`br`,{}),(0,Z.jsx)(Y,{component:`span`,variant:`caption`,color:`text.secondary`,children:e(`devtools.clearDialog.warning`)})]})}),(0,Z.jsx)(K,{}),(0,Z.jsxs)(N,{sx:{px:3,py:2,gap:1},children:[(0,Z.jsx)(I,{onClick:()=>g(!1),variant:`outlined`,sx:{textTransform:`none`,px:3},children:e(`devtools.clearDialog.cancel`)}),(0,Z.jsx)(I,{onClick:de,color:`error`,variant:`contained`,sx:{textTransform:`none`,px:3},children:e(`devtools.clearDialog.clear`)})]})]})]})};export{$ as default};