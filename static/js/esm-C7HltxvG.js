import{Fp as e,Lp as t}from"./index-hvLbsAjx.js";var n=class extends e{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED=`pickFiles canceled.`}async checkPermissions(){throw this.unimplemented(`Not implemented on web.`)}async convertHeicToJpeg(e){throw this.unimplemented(`Not implemented on web.`)}async copyFile(e){throw this.unimplemented(`Not implemented on web.`)}async pickFiles(e){let t=await this.openFilePicker(e);if(!t)throw Error(this.ERROR_PICK_FILE_CANCELED);let n={files:[]};for(let r of t){let t={blob:r,modifiedAt:r.lastModified,mimeType:this.getMimeTypeFromUrl(r),name:this.getNameFromUrl(r),path:void 0,size:this.getSizeFromUrl(r)};e?.readData&&(t.data=await this.getDataFromFile(r)),n.files.push(t)}return n}async pickDirectory(){throw this.unimplemented(`Not implemented on web.`)}async pickImages(e){return this.pickFiles(Object.assign({types:[`image/*`]},e))}async pickMedia(e){return this.pickFiles(Object.assign({types:[`image/*`,`video/*`]},e))}async pickVideos(e){return this.pickFiles(Object.assign({types:[`video/*`]},e))}async requestPermissions(e){throw this.unimplemented(`Not implemented on web.`)}async openFilePicker(e){let t=(e?.types)?.join(`,`)||``,n=e?.limit===void 0?0:e.limit;return new Promise(e=>{let r=!1,i=document.createElement(`input`);i.type=`file`,i.accept=t,i.multiple=n===0,i.addEventListener(`change`,()=>{r=!0,e(Array.from(i.files||[]))},{once:!0}),window.addEventListener(`focus`,async()=>{await this.wait(1e3),!r&&e(void 0)},{once:!0}),i.click()})}async getDataFromFile(e){return new Promise((t,n)=>{let r=new FileReader;r.readAsDataURL(e),r.onload=()=>{t((typeof r.result==`string`?r.result:``).split(`base64,`)[1]||``)},r.onerror=e=>{n(e)}})}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}async wait(e){return new Promise(t=>setTimeout(t,e))}},r=t(`FilePicker`,{web:()=>new n});export{r as t};