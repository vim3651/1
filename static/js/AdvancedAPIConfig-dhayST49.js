import{n as e,t}from"./Tabs-DsnHk16H.js";import{t as n}from"./plus-DCrdXXDc.js";import{$t as r,Ad as i,Al as a,Cd as o,Du as ee,Eu as s,Jr as c,Ou as l,Qt as u,_ as d,bd as f,ci as p,dd as m,fd as h,mp as g,pp as _,qd as v,qp as y,xd as b,xp as x,xu as S,zp as C}from"./index-hvLbsAjx.js";var w=y(C(),1),T=y(x(),1),E=()=>{let{t:y}=p(),{providerId:x}=g(),C=_(),E=u(),D=r(e=>e.settings.providers.find(e=>e.id===x)),[O,k]=(0,w.useState)(0),[A,j]=(0,w.useState)({}),[M,N]=(0,w.useState)(``),[P,F]=(0,w.useState)(``),[I,L]=(0,w.useState)({}),[R,z]=(0,w.useState)(``),[B,V]=(0,w.useState)(``);(0,w.useEffect)(()=>{D&&(j(D.extraHeaders||{}),L(D.extraBody||{}))},[D]);let H=()=>{C(`/settings/model-provider/${x}`)},U=()=>{D&&(E(c({id:D.id,updates:{extraHeaders:A,extraBody:I}})),C(`/settings/model-provider/${x}`))},W=()=>{M.trim()&&P.trim()&&(j({...A,[M.trim()]:P.trim()}),N(``),F(``))},G=e=>{let t={...A};delete t[e],j(t)},K=(e,t,n)=>{let r={...A};e!==t&&delete r[e],r[t]=n,j(r)},q=e=>{let t=e.trim();if(!t)return``;try{return JSON.parse(t)}catch{return t===`true`?!0:t===`false`?!1:t===`null`?null:/^-?\d+$/.test(t)?parseInt(t,10):/^-?\d*\.\d+$/.test(t)?parseFloat(t):t}},J=e=>{if(typeof e==`string`)try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch{return e}return JSON.stringify(e,null,2)},Y=()=>{R.trim()&&B.trim()&&(L({...I,[R.trim()]:q(B)}),z(``),V(``))},X=e=>{let t={...I};delete t[e],L(t)},Z=(e,t,n)=>{let r={...I};e!==t&&delete r[e],r[t]=n,L(r)},Q=Object.entries(A),te=Q.length>0,$=Object.entries(I),ne=$.length>0;return D?(0,T.jsxs)(d,{children:[(0,T.jsx)(f,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,T.jsxs)(ee,{children:[(0,T.jsx)(o,{edge:`start`,onClick:H,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,T.jsx)(S,{size:20})}),(0,T.jsx)(b,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:y(`modelSettings.dialogs.advancedConfig.title`)}),(0,T.jsx)(m,{onClick:U,variant:`contained`,sx:{borderRadius:2,textTransform:`none`},children:y(`common.save`)})]})}),(0,T.jsx)(h,{children:(0,T.jsxs)(t,{value:O,onChange:(e,t)=>k(t),sx:{px:3,borderBottom:1,borderColor:`divider`,bgcolor:`background.paper`},children:[(0,T.jsx)(e,{label:y(`modelSettings.dialogs.advancedConfig.headersTab`)}),(0,T.jsx)(e,{label:y(`modelSettings.dialogs.advancedConfig.bodyTab`)})]})}),(0,T.jsxs)(h,{sx:{flexGrow:1,overflowY:`auto`,p:3,pb:`var(--content-bottom-padding)`,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[O===0&&(0,T.jsxs)(l,{spacing:3,children:[(0,T.jsx)(b,{variant:`body2`,color:`text.secondary`,children:y(`modelSettings.dialogs.headers.description`)}),(0,T.jsxs)(i,{variant:`outlined`,sx:e=>({p:2,borderRadius:2,bgcolor:e.palette.action.hover}),children:[(0,T.jsx)(b,{variant:`subtitle2`,sx:{fontWeight:600,mb:1.5},children:y(`modelSettings.dialogs.headers.quickActions`)}),(0,T.jsxs)(l,{direction:{xs:`column`,sm:`row`},spacing:1,sx:{flexWrap:`wrap`},children:[(0,T.jsx)(m,{size:`small`,variant:`outlined`,onClick:()=>{j({...A,"x-stainless-timeout":`REMOVE`})},sx:{borderRadius:999},children:y(`modelSettings.dialogs.headers.disableTimeout`)}),(0,T.jsx)(m,{size:`small`,variant:`outlined`,onClick:()=>{j({...A,"x-stainless-retry-count":`REMOVE`})},sx:{borderRadius:999},children:y(`modelSettings.dialogs.headers.disableRetry`)}),(0,T.jsx)(m,{size:`small`,variant:`outlined`,color:`error`,onClick:()=>{j({...A,"x-stainless-timeout":`REMOVE`,"x-stainless-retry-count":`REMOVE`,"x-stainless-arch":`REMOVE`,"x-stainless-lang":`REMOVE`,"x-stainless-os":`REMOVE`,"x-stainless-package-version":`REMOVE`,"x-stainless-runtime":`REMOVE`,"x-stainless-runtime-version":`REMOVE`})},sx:{borderRadius:999},children:y(`modelSettings.dialogs.headers.disableAll`)})]}),(0,T.jsx)(b,{variant:`caption`,color:`text.secondary`,sx:{display:`block`,mt:1},children:y(`modelSettings.dialogs.headers.removeHint`)})]}),(0,T.jsx)(l,{spacing:2,children:te?Q.map(([e,t])=>(0,T.jsx)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:(0,T.jsxs)(h,{sx:{display:`flex`,flexDirection:{xs:`column`,sm:`row`},gap:{xs:2,sm:1.5},alignItems:{sm:`center`}},children:[(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.headers.headerName`),value:e,onChange:n=>K(e,n.target.value,t),sx:{flex:1}}),(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.headers.headerValue`),value:t,onChange:t=>K(e,e,t.target.value),sx:e=>({flex:1,"& .MuiOutlinedInput-root":{backgroundColor:t===`REMOVE`?v(e.palette.error.main,e.palette.mode===`dark`?.2:.08):e.palette.background.paper},"& .MuiOutlinedInput-input":{color:t===`REMOVE`?e.palette.error.main:e.palette.text.primary}}),helperText:t===`REMOVE`?y(`modelSettings.dialogs.headers.willBeDisabled`):``}),(0,T.jsx)(o,{color:`error`,onClick:()=>G(e),sx:{alignSelf:{xs:`flex-end`,sm:`center`}},children:(0,T.jsx)(a,{size:18})})]})},e)):(0,T.jsxs)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:[(0,T.jsx)(b,{variant:`subtitle2`,sx:{fontWeight:600},children:y(`modelSettings.provider.headersConfigured`,{count:0})}),(0,T.jsx)(b,{variant:`body2`,color:`text.secondary`,sx:{mt:.5},children:y(`modelSettings.dialogs.headers.removeHint`)})]})}),(0,T.jsx)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:(0,T.jsxs)(l,{direction:{xs:`column`,sm:`row`},spacing:2,sx:{alignItems:{sm:`center`}},children:[(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.headers.newHeaderName`),placeholder:y(`modelSettings.dialogs.headers.newHeaderNamePlaceholder`),value:M,onChange:e=>N(e.target.value),sx:{flex:1}}),(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.headers.newHeaderValue`),placeholder:y(`modelSettings.dialogs.headers.newHeaderValuePlaceholder`),value:P,onChange:e=>F(e.target.value),sx:{flex:1}}),(0,T.jsx)(m,{startIcon:(0,T.jsx)(n,{size:16}),onClick:W,disabled:!M.trim()||!P.trim(),variant:`contained`,sx:{borderRadius:2,width:{xs:`100%`,sm:`auto`}},children:y(`common.submit`)})]})})]}),O===1&&(0,T.jsxs)(l,{spacing:3,children:[(0,T.jsx)(b,{variant:`body2`,color:`text.secondary`,children:y(`modelSettings.dialogs.body.description`)}),(0,T.jsx)(l,{spacing:2,children:ne?$.map(([e,t])=>(0,T.jsx)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:(0,T.jsxs)(h,{sx:{display:`flex`,flexDirection:{xs:`column`,sm:`row`},gap:{xs:2,sm:1.5},alignItems:{sm:`flex-start`}},children:[(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.body.parameterName`),value:e,onChange:n=>Z(e,n.target.value,t),sx:{flex:1}}),(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.body.parameterValue`),value:J(t),onChange:t=>{Z(e,e,q(t.target.value))},multiline:!0,rows:1,sx:{flex:1,"& .MuiInputBase-input":{fontFamily:`monospace`,fontSize:`0.875rem`}},helperText:y(`modelSettings.dialogs.body.valueHint`)}),(0,T.jsx)(o,{color:`error`,onClick:()=>X(e),sx:{alignSelf:{xs:`flex-end`,sm:`flex-start`},mt:{sm:.5}},children:(0,T.jsx)(a,{size:18})})]})},e)):(0,T.jsxs)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:[(0,T.jsx)(b,{variant:`subtitle2`,sx:{fontWeight:600},children:y(`modelSettings.provider.bodyConfigured`,{count:0})}),(0,T.jsx)(b,{variant:`body2`,color:`text.secondary`,sx:{mt:.5},children:y(`modelSettings.dialogs.body.emptyHint`)})]})}),(0,T.jsx)(i,{variant:`outlined`,sx:{p:2,borderRadius:2},children:(0,T.jsxs)(l,{direction:{xs:`column`,sm:`row`},spacing:2,sx:{alignItems:{sm:`flex-start`}},children:[(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.body.newParameterName`),placeholder:y(`modelSettings.dialogs.body.newParameterNamePlaceholder`),value:R,onChange:e=>z(e.target.value),sx:{flex:1}}),(0,T.jsx)(s,{size:`small`,label:y(`modelSettings.dialogs.body.newParameterValue`),placeholder:y(`modelSettings.dialogs.body.newParameterValuePlaceholder`),value:B,onChange:e=>V(e.target.value),multiline:!0,rows:1,sx:{flex:1,"& .MuiInputBase-input":{fontFamily:`monospace`,fontSize:`0.875rem`}},helperText:y(`modelSettings.dialogs.body.valueHint`)}),(0,T.jsx)(m,{startIcon:(0,T.jsx)(n,{size:16}),onClick:Y,disabled:!R.trim()||!B.trim(),variant:`contained`,sx:{borderRadius:2,width:{xs:`100%`,sm:`auto`},alignSelf:{xs:`stretch`,sm:`flex-start`},mt:{sm:.5}},children:y(`common.submit`)})]})})]})]})]}):(0,T.jsxs)(h,{sx:{p:3},children:[(0,T.jsx)(b,{children:y(`modelSettings.provider.notFound`)}),(0,T.jsx)(m,{onClick:H,children:y(`common.back`)})]})};export{E as default};