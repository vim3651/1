import{t as e}from"./InputAdornment-DO0tC8Wv.js";import{t}from"./clock-Dks_woIj.js";import{t as n}from"./search-DqeTnaF8.js";import{$t as r,Ad as i,Cd as a,Du as o,Eu as s,M as c,N as l,P as u,Qt as d,Sd as f,Su as p,Xl as m,_ as h,_u as g,bd as _,ci as v,dd as y,fd as b,mu as x,oi as S,ou as C,pp as w,qd as T,qp as E,s as D,td as O,vd as k,xd as A,xp as j,xu as M,zp as N}from"./index-hvLbsAjx.js";import{b as P,n as F,t as I}from"./agentPrompts-BSlu7yBi.js";var L=p(`map-pin`,[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]]),R=p(`monitor`,[[`rect`,{width:`20`,height:`14`,x:`2`,y:`3`,rx:`2`,key:`48i651`}],[`line`,{x1:`8`,x2:`16`,y1:`21`,y2:`21`,key:`1svkeh`}],[`line`,{x1:`12`,x2:`12`,y1:`17`,y2:`21`,key:`vw1qmm`}]]),z=E(N(),1),B=E(j(),1),V=()=>{let{t:e}=v(),n=d(),o=r(e=>e.settings),[p,h]=(0,z.useState)(!1),_=o.systemPromptVariables||{enableTimeVariable:!1,enableLocationVariable:!1,customLocation:``,enableOSVariable:!1},y=e=>{n(S({systemPromptVariables:{..._,...e}}))},C=e=>{y({enableTimeVariable:e})},w=e=>{y({enableLocationVariable:e})},E=e=>{y({customLocation:e})},j=e=>{y({enableOSVariable:e})};return(0,B.jsxs)(i,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,cursor:`pointer`,p:2,bgcolor:e=>T(e.palette.primary.main,.02),"&:hover":{bgcolor:e=>T(e.palette.primary.main,.04)}},onClick:()=>h(!p),children:[(0,B.jsxs)(b,{sx:{flexGrow:1},children:[(0,B.jsxs)(A,{variant:`subtitle1`,sx:{fontWeight:600,mb:.5},children:[`ðŸ”§ `,e(`settings.systemPromptVariables.title`)]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,children:e(`settings.systemPromptVariables.description`)})]}),(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,gap:1,mr:2},children:[_.enableTimeVariable&&(0,B.jsx)(k,{icon:(0,B.jsx)(t,{size:13}),label:e(`settings.systemPromptVariables.chips.time`),size:`small`,color:`primary`,variant:`outlined`,sx:{fontSize:`0.7rem`,height:`20px`}}),_.enableLocationVariable&&(0,B.jsx)(k,{icon:(0,B.jsx)(L,{size:13}),label:e(`settings.systemPromptVariables.chips.location`),size:`small`,color:`primary`,variant:`outlined`,sx:{fontSize:`0.7rem`,height:`20px`}}),_.enableOSVariable&&(0,B.jsx)(k,{icon:(0,B.jsx)(R,{size:13}),label:e(`settings.systemPromptVariables.chips.system`),size:`small`,color:`primary`,variant:`outlined`,sx:{fontSize:`0.7rem`,height:`20px`}}),!_.enableTimeVariable&&!_.enableLocationVariable&&!_.enableOSVariable&&(0,B.jsx)(A,{variant:`caption`,color:`text.secondary`,children:e(`settings.systemPromptVariables.disabled`)})]}),(0,B.jsx)(a,{size:`small`,children:p?(0,B.jsx)(x,{}):(0,B.jsx)(g,{})})]}),p&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(O,{}),(0,B.jsxs)(b,{sx:{p:2},children:[(0,B.jsx)(f,{severity:`info`,icon:(0,B.jsx)(m,{}),sx:{mb:2,fontSize:`0.85rem`},children:e(`settings.systemPromptVariables.infoMessage`)}),(0,B.jsxs)(b,{sx:{mb:3},children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:2},children:[(0,B.jsxs)(b,{sx:{flex:1},children:[(0,B.jsxs)(A,{variant:`subtitle2`,sx:{fontWeight:600,display:`flex`,alignItems:`center`,gap:.5},children:[(0,B.jsx)(t,{size:16}),e(`settings.systemPromptVariables.timeVariable.label`)]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,sx:{fontSize:`0.8rem`,mt:.5},children:e(`settings.systemPromptVariables.timeVariable.description`,{time:c()})})]}),(0,B.jsx)(D,{checked:_.enableTimeVariable??!1,onChange:e=>C(e.target.checked)})]}),_.enableTimeVariable&&(0,B.jsx)(b,{sx:{mt:1.5,p:1,bgcolor:`rgba(0,0,0,0.02)`,borderRadius:1},children:(0,B.jsx)(A,{variant:`caption`,color:`text.secondary`,children:e(`settings.systemPromptVariables.timeVariable.hint`)})})]}),(0,B.jsxs)(b,{sx:{mb:3},children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:2},children:[(0,B.jsxs)(b,{sx:{flex:1},children:[(0,B.jsxs)(A,{variant:`subtitle2`,sx:{fontWeight:600,display:`flex`,alignItems:`center`,gap:.5},children:[(0,B.jsx)(L,{size:16}),e(`settings.systemPromptVariables.locationVariable.label`)]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,sx:{fontSize:`0.8rem`,mt:.5},children:e(`settings.systemPromptVariables.locationVariable.description`,{location:l(_.customLocation)})})]}),(0,B.jsx)(D,{checked:_.enableLocationVariable??!1,onChange:e=>w(e.target.checked)})]}),_.enableLocationVariable&&(0,B.jsxs)(b,{sx:{mt:1.5},children:[(0,B.jsx)(s,{fullWidth:!0,size:`small`,placeholder:e(`settings.systemPromptVariables.locationVariable.placeholder`),value:_.customLocation,onChange:e=>E(e.target.value),sx:{mb:1}}),(0,B.jsx)(b,{sx:{p:1,bgcolor:`rgba(0,0,0,0.02)`,borderRadius:1},children:(0,B.jsxs)(A,{variant:`caption`,color:`text.secondary`,children:[e(`settings.systemPromptVariables.locationVariable.hint`),(0,B.jsx)(`br`,{}),e(`settings.systemPromptVariables.locationVariable.hintEmpty`)]})})]})]}),(0,B.jsxs)(b,{children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:2},children:[(0,B.jsxs)(b,{sx:{flex:1},children:[(0,B.jsxs)(A,{variant:`subtitle2`,sx:{fontWeight:600,display:`flex`,alignItems:`center`,gap:.5},children:[(0,B.jsx)(R,{size:16}),e(`settings.systemPromptVariables.osVariable.label`)]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,sx:{fontSize:`0.8rem`,mt:.5},children:e(`settings.systemPromptVariables.osVariable.description`,{os:u()})})]}),(0,B.jsx)(D,{checked:_.enableOSVariable??!1,onChange:e=>j(e.target.checked)})]}),_.enableOSVariable&&(0,B.jsx)(b,{sx:{mt:1.5,p:1,bgcolor:`rgba(0,0,0,0.02)`,borderRadius:1},children:(0,B.jsx)(A,{variant:`caption`,color:`text.secondary`,children:e(`settings.systemPromptVariables.osVariable.hint`)})})]})]})]})]})},H=()=>{let t=w(),{t:r}=v(),[c,l]=(0,z.useState)(``),[u,d]=(0,z.useState)(new Set([`general`])),[f,p]=(0,z.useState)(null),m=(0,z.useMemo)(()=>I(),[]),S=(0,z.useMemo)(()=>c.trim()?F(c):[],[c]),E=()=>{t(`/settings`)},D=e=>{let t=new Set(u);t.has(e)?t.delete(e):t.add(e),d(t)},j=(0,z.useCallback)(async e=>{try{await navigator.clipboard.writeText(e.content),p(e.id),setTimeout(()=>p(null),2e3)}catch(e){console.error(r(`settings.agentPromptsPage.promptCard.copyFailed`)+`:`,e)}},[r]),N=(0,z.useCallback)(e=>(0,B.jsx)(i,{elevation:0,sx:{borderRadius:1,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`},children:(0,B.jsxs)(b,{sx:{p:1.2},children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,mb:.4},children:[(0,B.jsxs)(A,{variant:`subtitle2`,sx:{fontWeight:600,fontSize:`0.85rem`},children:[e.emoji,` `,e.name]}),(0,B.jsx)(y,{size:`small`,startIcon:(0,B.jsx)(C,{size:12}),onClick:()=>j(e),color:f===e.id?`success`:`primary`,variant:`outlined`,sx:{minWidth:`auto`,px:.8,py:.3,fontSize:`0.7rem`,height:`24px`},children:f===e.id?r(`settings.agentPromptsPage.promptCard.copied`):r(`settings.agentPromptsPage.promptCard.copy`)})]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,sx:{mb:.8,fontSize:`0.75rem`,lineHeight:1.2},children:e.description}),(0,B.jsx)(b,{sx:{display:`flex`,flexWrap:`wrap`,gap:.25},children:e.tags.map(e=>(0,B.jsx)(k,{label:e,size:`small`,variant:`outlined`,sx:{fontSize:`0.6rem`,height:`16px`,"& .MuiChip-label":{px:.4}}},e))})]})}),[j,f,r]),L=(0,z.useCallback)(e=>e.id,[]),R=e=>{let t=u.has(e.id),n=e.prompts.length>20;return(0,B.jsxs)(i,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,B.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,cursor:`pointer`,p:2,bgcolor:`rgba(0,0,0,0.01)`,"&:hover":{bgcolor:`action.hover`}},onClick:()=>D(e.id),children:[(0,B.jsxs)(A,{variant:`subtitle1`,sx:{flexGrow:1,fontWeight:600},children:[e.emoji,` `,e.name]}),(0,B.jsxs)(A,{variant:`body2`,color:`text.secondary`,sx:{mr:2},children:[e.prompts.length,` `,r(`settings.agentPromptsPage.category.promptsCount`),n&&t&&` (è™šæ‹ŸåŒ–)`]}),t?(0,B.jsx)(x,{size:20}):(0,B.jsx)(g,{size:20})]}),t&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(O,{}),(0,B.jsxs)(b,{sx:{p:2},children:[(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:e.description}),n?(0,B.jsx)(P,{items:e.prompts,itemHeight:120,renderItem:e=>(0,B.jsx)(b,{sx:{mb:1},children:N(e)}),itemKey:L,height:Math.min(500,e.prompts.length*120),overscanCount:3,style:{borderRadius:`8px`,border:`1px solid rgba(0,0,0,0.05)`}}):(0,B.jsx)(b,{sx:{display:`flex`,flexDirection:`column`,gap:1},children:e.prompts.map(e=>(0,B.jsx)(b,{children:N(e)},e.id))})]})]})]},e.id)};return(0,B.jsxs)(h,{sx:{bgcolor:e=>e.palette.mode===`light`?T(e.palette.primary.main,.02):T(e.palette.background.default,.9)},children:[(0,B.jsx)(_,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,B.jsxs)(o,{children:[(0,B.jsx)(a,{edge:`start`,color:`inherit`,onClick:E,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,B.jsx)(M,{size:24})}),(0,B.jsx)(A,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:r(`settings.agentPromptsPage.title`)})]})}),(0,B.jsxs)(b,{sx:{flexGrow:1,overflowY:`auto`,p:2,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,B.jsx)(V,{}),(0,B.jsxs)(i,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,B.jsxs)(b,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,B.jsx)(A,{variant:`subtitle1`,sx:{fontWeight:600},children:r(`settings.agentPromptsPage.searchSection.title`)}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,children:r(`settings.agentPromptsPage.searchSection.description`)})]}),(0,B.jsx)(O,{}),(0,B.jsx)(b,{sx:{p:2},children:(0,B.jsx)(s,{fullWidth:!0,placeholder:r(`settings.agentPromptsPage.searchSection.placeholder`),value:c,onChange:e=>l(e.target.value),slotProps:{input:{startAdornment:(0,B.jsx)(e,{position:`start`,children:(0,B.jsx)(n,{size:20})})}},variant:`outlined`,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}})})]}),c.trim()&&S.length>0&&(0,B.jsxs)(i,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,B.jsxs)(b,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,B.jsxs)(A,{variant:`subtitle1`,sx:{fontWeight:600},children:[r(`settings.agentPromptsPage.searchResults.title`),` (`,S.length,`)`]}),(0,B.jsx)(A,{variant:`body2`,color:`text.secondary`,children:r(`settings.agentPromptsPage.searchResults.found`,{count:S.length})})]}),(0,B.jsx)(O,{}),(0,B.jsx)(b,{sx:{p:2},children:S.length>20?(0,B.jsx)(P,{items:S,itemHeight:120,renderItem:e=>(0,B.jsx)(b,{sx:{mb:1},children:N(e)}),itemKey:L,height:Math.min(500,S.length*120),overscanCount:3,style:{borderRadius:`8px`,border:`1px solid rgba(0,0,0,0.05)`}}):(0,B.jsx)(b,{sx:{display:`flex`,flexDirection:`column`,gap:1},children:S.map(e=>(0,B.jsx)(b,{children:N(e)},e.id))})})]}),c.trim()&&S.length===0&&(0,B.jsx)(i,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:(0,B.jsx)(b,{sx:{p:3,textAlign:`center`},children:(0,B.jsx)(A,{color:`text.secondary`,children:r(`settings.agentPromptsPage.searchResults.noResults`)})})}),!c.trim()&&m.map(R)]})]})};export{H as default};