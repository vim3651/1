const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/js/UnifiedFileManagerService-CNXMBVUe.js","static/js/index-hvLbsAjx.js","static/css/index-iKlUzaLt.css"])))=>i.map(i=>d[i]);
import{t as e}from"./InputAdornment-DO0tC8Wv.js";import{t}from"./ListItemAvatar-vt2ONwqY.js";import{n,t as r}from"./Tabs-DsnHk16H.js";import{t as i}from"./file-text-BSjgZddV.js";import{t as a}from"./pen-line-BjK4aRQz.js";import{t as o}from"./share-2-C0ilI4j0.js";import{$t as s,Ad as c,At as l,Au as u,Br as d,Cd as f,Dl as p,Du as m,Eu as h,Fl as g,Ft as _,Gi as ee,Gl as v,Hl as y,It as te,Iu as b,Jl as ne,Ju as x,Kl as S,Ll as re,Mp as C,Mt as w,Nt as ie,Nu as ae,Pt as oe,Ql as se,Qt as ce,Qu as le,Sd as T,Su as E,Tr as ue,Uu as D,Vr as de,Vu as O,Wr as fe,Wu as pe,Xu as me,Yr as he,_ as ge,ad as k,ai as _e,bd as ve,ci as ye,dd as A,fd as j,hu as M,i as be,id as N,iu as xe,jp as P,jt as Se,ju as Ce,kt as we,md as F,nd as I,ou as L,pp as Te,qd as R,qp as z,rd as Ee,s as De,si as Oe,td as B,vd as V,wl as H,wr as U,xd as W,xp as G,xu as ke,zp as K,zu as q}from"./index-hvLbsAjx.js";import"./SolidBridge-4JuNrAWl.js";import{t as Ae}from"./FullScreenSelectorSolid-D7sSYiET.js";var je=E(`layout-dashboard`,[[`rect`,{width:`7`,height:`9`,x:`3`,y:`3`,rx:`1`,key:`10lvy0`}],[`rect`,{width:`7`,height:`5`,x:`14`,y:`3`,rx:`1`,key:`16une8`}],[`rect`,{width:`7`,height:`9`,x:`14`,y:`12`,rx:`1`,key:`1hutg5`}],[`rect`,{width:`7`,height:`5`,x:`3`,y:`16`,rx:`1`,key:`ldoo1y`}]]),J=z(K(),1);function Me(e){return{theme:e.theme,themeStyle:e.themeStyle,fontSize:e.fontSize,fontFamily:e.fontFamily,messageStyle:e.messageStyle,showUserAvatar:e.showUserAvatar,showUserName:e.showUserName,showModelAvatar:e.showModelAvatar,showModelName:e.showModelName,showSystemPromptBubble:e.showSystemPromptBubble,renderUserInputAsMarkdown:e.renderUserInputAsMarkdown,autoScrollToBottom:e.autoScrollToBottom,messageBubbleMinWidth:e.messageBubbleMinWidth,messageBubbleMaxWidth:e.messageBubbleMaxWidth,userMessageMaxWidth:e.userMessageMaxWidth,customBubbleColors:e.customBubbleColors,hideUserBubble:e.hideUserBubble,hideAIBubble:e.hideAIBubble,codeThemeLight:e.codeThemeLight,codeThemeDark:e.codeThemeDark,codeEditor:e.codeEditor,codeShowLineNumbers:e.codeShowLineNumbers,codeCollapsible:e.codeCollapsible,codeWrappable:e.codeWrappable,codeDefaultCollapsed:e.codeDefaultCollapsed,mermaidEnabled:e.mermaidEnabled,thinkingDisplayStyle:e.thinkingDisplayStyle,thoughtAutoCollapse:e.thoughtAutoCollapse,toolbarDisplayStyle:e.toolbarDisplayStyle,toolbarCollapsed:e.toolbarCollapsed,toolbarStyle:e.toolbarStyle,toolbarButtons:e.toolbarButtons,inputBoxStyle:e.inputBoxStyle,inputLayoutStyle:e.inputLayoutStyle,topToolbar:e.topToolbar,modelSelectorStyle:e.modelSelectorStyle,versionSwitchStyle:e.versionSwitchStyle,showMicroBubbles:e.showMicroBubbles,messageActionMode:e.messageActionMode,multiModelDisplayStyle:e.multiModelDisplayStyle,showToolDetails:e.showToolDetails,showCitationDetails:e.showCitationDetails,showAIDebateButton:e.showAIDebateButton,showQuickPhraseButton:e.showQuickPhraseButton,chatBackground:e.chatBackground}}function Y(e){try{let t=JSON.stringify(e);return btoa(encodeURIComponent(t))}catch(e){throw console.error(`编码外观配置失败:`,e),Error(`编码外观配置失败`)}}function X(e){try{let t=decodeURIComponent(atob(e));return JSON.parse(t)}catch(e){throw console.error(`解码外观配置失败:`,e),Error(`解码外观配置失败，请检查分享码是否正确`)}}function Ne(e){let t=Y(e);return`${window.location.origin}/#/settings/appearance?share=${t}`}function Pe(){try{let e=window.location.hash,t=new URLSearchParams(e.split(`?`)[1]).get(`share`);return t?X(t):null}catch(e){return console.error(`从 URL 提取分享配置失败:`,e),null}}function Z(e){try{return!(!e.theme||!e.themeStyle||!e.fontSize||![`light`,`dark`,`system`].includes(e.theme)||e.fontSize<12||e.fontSize>24)}catch{return!1}}function Fe(e,t=`appearance-config.json`){try{let n=JSON.stringify(e,null,2),r=new Blob([n],{type:`application/json`}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}catch(e){throw console.error(`导出外观配置失败:`,e),Error(`导出外观配置失败`)}}async function Ie(e,t=`appearance-config.json`){try{let{unifiedFileManager:n}=await P(async()=>{let{unifiedFileManager:e}=await import(`./UnifiedFileManagerService-CNXMBVUe.js`);return{unifiedFileManager:e}},__vite__mapDeps([0,1,2])),r=await n.openSystemFilePicker({type:`directory`,multiple:!1,title:`选择保存位置`});if(r.cancelled||!r.directories||r.directories.length===0)throw Error(`用户取消选择`);let i=r.directories[0],a=i.displayPath||i.path||i.uri;if(!a)throw Error(`无法获取有效的目录路径`);let o=JSON.stringify(e,null,2),s=`${a}/${t}`;return await n.writeFile({path:s,content:o,encoding:`utf8`,append:!1}),s}catch(e){throw console.error(`导出外观配置失败:`,e),e}}function Q(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{try{let r=e.target?.result,i=JSON.parse(r);if(!Z(i)){n(Error(`无效的外观配置文件`));return}t(i)}catch{n(Error(`解析外观配置文件失败`))}},r.onerror=()=>{n(Error(`读取文件失败`))},r.readAsText(e)})}var $=z(G(),1),Le=({open:e,onClose:t,config:i})=>{let[a,s]=(0,J.useState)(0),[c,l]=(0,J.useState)(``),[d,p]=(0,J.useState)(``),[m,g]=(0,J.useState)(!1),[_,v]=(0,J.useState)(``);J.useEffect(()=>{if(e)try{let e=Ne(i),t=Y(i);l(e),p(t)}catch(e){console.error(`生成分享内容失败:`,e)}},[e,i]);let y=()=>{navigator.clipboard.writeText(c).then(()=>{v(`分享链接已复制到剪贴板`),g(!0)})};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(ee,{open:e,onClose:t,maxWidth:`md`,fullWidth:!0,PaperProps:{sx:{borderRadius:2,boxShadow:`0 8px 32px rgba(0,0,0,0.12)`}},children:[(0,$.jsxs)(I,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,pb:1},children:[(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,$.jsx)(o,{size:24}),(0,$.jsx)(W,{variant:`h6`,sx:{fontWeight:600},children:`分享我的外观设置`})]}),(0,$.jsx)(f,{onClick:t,size:`small`,children:(0,$.jsx)(H,{size:20})})]}),(0,$.jsxs)(N,{sx:{pt:2},children:[(0,$.jsxs)(r,{value:a,onChange:(e,t)=>s(t),sx:{mb:2,borderBottom:1,borderColor:`divider`},children:[(0,$.jsx)(n,{label:`分享链接`}),(0,$.jsx)(n,{label:`分享码`})]}),a===0&&(0,$.jsxs)(j,{children:[(0,$.jsx)(T,{severity:`info`,sx:{mb:2},children:`复制下方链接分享给好友，他们点击后即可应用你的外观设置`}),(0,$.jsx)(h,{fullWidth:!0,multiline:!0,rows:3,value:c,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.875rem`,bgcolor:e=>R(e.palette.primary.main,.05)}},sx:{mb:2}}),(0,$.jsxs)(j,{sx:{display:`flex`,gap:1},children:[(0,$.jsx)(A,{fullWidth:!0,variant:`contained`,startIcon:(0,$.jsx)(L,{size:18}),onClick:y,children:`复制链接`}),typeof navigator<`u`&&`share`in navigator&&(0,$.jsx)(A,{fullWidth:!0,variant:`outlined`,startIcon:(0,$.jsx)(o,{size:18}),onClick:async()=>{if(typeof navigator<`u`&&`share`in navigator)try{await navigator.share({title:`我的外观设置`,text:`快来试试我的外观设置吧！`,url:c})}catch(e){console.error(`分享失败:`,e)}else y()},children:`分享`})]})]}),a===1&&(0,$.jsxs)(j,{children:[(0,$.jsx)(T,{severity:`info`,sx:{mb:2},children:`复制下方分享码，好友可以在导入设置中粘贴使用`}),(0,$.jsx)(h,{fullWidth:!0,multiline:!0,rows:6,value:d,InputProps:{readOnly:!0,sx:{fontFamily:`monospace`,fontSize:`0.75rem`,bgcolor:e=>R(e.palette.primary.main,.05),wordBreak:`break-all`}},sx:{mb:2}}),(0,$.jsx)(A,{fullWidth:!0,variant:`contained`,startIcon:(0,$.jsx)(L,{size:18}),onClick:()=>{navigator.clipboard.writeText(d).then(()=>{v(`分享码已复制到剪贴板`),g(!0)})},children:`复制分享码`})]}),(0,$.jsxs)(j,{sx:{mt:3,pt:2,borderTop:1,borderColor:`divider`},children:[(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,sx:{mb:1},children:`其他选项`}),(0,$.jsx)(A,{fullWidth:!0,variant:`outlined`,startIcon:(0,$.jsx)(xe,{size:18}),onClick:async()=>{try{let e=`appearance-config-${new Date().getTime()}.json`;C.isNativePlatform()?(v(`配置已保存到: ${await Ie(i,e)}`),g(!0)):(Fe(i,e),v(`配置文件已下载到浏览器下载文件夹`),g(!0))}catch(e){if(e instanceof Error&&e.message===`用户取消选择`)return;v(`导出失败，请重试`),g(!0)}},children:`导出为文件`})]})]}),(0,$.jsx)(k,{sx:{px:3,pb:2},children:(0,$.jsx)(A,{onClick:t,variant:`text`,children:`关闭`})})]}),(0,$.jsx)(u,{open:m,autoHideDuration:3e3,onClose:()=>g(!1),message:_,anchorOrigin:{vertical:`bottom`,horizontal:`center`}})]})},Re=({open:e,onClose:t,onImport:a})=>{let[o,s]=(0,J.useState)(0),[c,l]=(0,J.useState)(``),[u,d]=(0,J.useState)(``),[m,g]=(0,J.useState)(``),[_,v]=(0,J.useState)(null),y=e=>{l(e.target.value),g(``),v(null)},te=e=>{d(e.target.value),g(``),v(null)},b=()=>{try{let e=X(c.trim());if(!Z(e)){g(`无效的外观配置`);return}v(e),g(``)}catch{g(`解析失败，请检查分享码是否正确`),v(null)}},x=()=>{try{let e=u.trim().match(/[?&]share=([^&]+)/);if(!e){g(`链接格式不正确，请确保包含分享参数`);return}let t=e[1],n=X(t);if(!Z(n)){g(`无效的外观配置`);return}v(n),g(``)}catch{g(`解析失败，请检查链接是否正确`),v(null)}},S=()=>{_&&(a(_),C())},re=async e=>{let t=e.target.files?.[0];if(t)try{v(await Q(t)),g(``)}catch(e){g(e instanceof Error?e.message:`导入文件失败`),v(null)}},C=()=>{l(``),d(``),g(``),v(null),s(0),t()},w=e=>(0,$.jsxs)(pe,{dense:!0,children:[(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`主题模式`,secondary:(0,$.jsx)(V,{label:e.theme===`light`?`浅色`:e.theme===`dark`?`深色`:`跟随系统`,size:`small`,sx:{mt:.5}})})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`主题风格`,secondary:(0,$.jsx)(V,{label:e.themeStyle,size:`small`,sx:{mt:.5}})})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`字体大小`,secondary:`${e.fontSize}px`})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`字体家族`,secondary:e.fontFamily})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`消息样式`,secondary:e.messageStyle===`bubble`?`气泡`:`简洁`})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`输入框风格`,secondary:e.inputBoxStyle})}),(0,$.jsx)(O,{children:(0,$.jsx)(q,{primary:`工具栏样式`,secondary:e.toolbarStyle===`glassmorphism`?`毛玻璃`:`透明`})})]});return(0,$.jsxs)(ee,{open:e,onClose:t,maxWidth:`md`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,$.jsxs)(I,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,pb:1},children:[(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,$.jsx)(p,{size:24}),(0,$.jsx)(W,{variant:`h6`,sx:{fontWeight:600},children:`导入外观设置`})]}),(0,$.jsx)(f,{onClick:C,size:`small`,children:(0,$.jsx)(H,{size:20})})]}),(0,$.jsxs)(N,{sx:{pt:2},children:[(0,$.jsxs)(r,{value:o,onChange:(e,t)=>s(t),sx:{mb:2,borderBottom:1,borderColor:`divider`},variant:`scrollable`,scrollButtons:`auto`,children:[(0,$.jsx)(n,{label:`粘贴分享码`}),(0,$.jsx)(n,{label:`粘贴链接`,icon:(0,$.jsx)(ne,{size:16}),iconPosition:`start`}),(0,$.jsx)(n,{label:`上传文件`})]}),o===0&&(0,$.jsxs)(j,{children:[(0,$.jsx)(T,{severity:`info`,sx:{mb:2},children:`粘贴好友分享的外观配置码，预览后即可应用`}),(0,$.jsx)(h,{fullWidth:!0,multiline:!0,rows:6,value:c,onChange:y,placeholder:`粘贴分享码到这里...`,InputProps:{sx:{fontFamily:`monospace`,fontSize:`0.75rem`,bgcolor:e=>R(e.palette.primary.main,.05)}},sx:{mb:2}}),m&&(0,$.jsx)(T,{severity:`error`,sx:{mb:2},children:m}),_&&(0,$.jsxs)(j,{sx:{mb:2},children:[(0,$.jsx)(W,{variant:`subtitle2`,sx:{mb:1,fontWeight:600},children:`配置预览`}),(0,$.jsx)(j,{sx:{border:1,borderColor:`divider`,borderRadius:2,bgcolor:e=>R(e.palette.background.paper,.5),maxHeight:300,overflow:`auto`},children:w(_)})]}),(0,$.jsxs)(j,{sx:{display:`flex`,gap:1},children:[(0,$.jsx)(A,{fullWidth:!0,variant:`outlined`,onClick:b,disabled:!c.trim(),children:`预览配置`}),(0,$.jsx)(A,{fullWidth:!0,variant:`contained`,onClick:S,disabled:!_,children:`应用配置`})]})]}),o===1&&(0,$.jsxs)(j,{children:[(0,$.jsx)(T,{severity:`info`,sx:{mb:2},children:`粘贴好友分享的完整链接`}),(0,$.jsx)(h,{fullWidth:!0,multiline:!0,rows:3,value:u,onChange:te,placeholder:`粘贴分享链接到这里，例如：https://example.com/#/settings/appearance?share=...`,InputProps:{sx:{fontFamily:`monospace`,fontSize:`0.75rem`,bgcolor:e=>R(e.palette.primary.main,.05)}},sx:{mb:2}}),m&&(0,$.jsx)(T,{severity:`error`,sx:{mb:2},children:m}),_&&(0,$.jsxs)(j,{sx:{mb:2},children:[(0,$.jsx)(W,{variant:`subtitle2`,sx:{mb:1,fontWeight:600},children:`配置预览`}),(0,$.jsx)(j,{sx:{border:1,borderColor:`divider`,borderRadius:2,bgcolor:e=>R(e.palette.background.paper,.5),maxHeight:300,overflow:`auto`},children:w(_)})]}),(0,$.jsxs)(j,{sx:{display:`flex`,gap:1},children:[(0,$.jsx)(A,{fullWidth:!0,variant:`outlined`,onClick:x,disabled:!u.trim(),children:`预览配置`}),(0,$.jsx)(A,{fullWidth:!0,variant:`contained`,onClick:S,disabled:!_,children:`应用配置`})]})]}),o===2&&(0,$.jsxs)(j,{children:[(0,$.jsx)(T,{severity:`info`,sx:{mb:2},children:`选择之前导出的外观配置 JSON 文件`}),(0,$.jsxs)(j,{sx:{border:2,borderStyle:`dashed`,borderColor:`divider`,borderRadius:2,p:4,textAlign:`center`,bgcolor:e=>R(e.palette.primary.main,.02),cursor:`pointer`,transition:`all 0.2s`,"&:hover":{borderColor:`primary.main`,bgcolor:e=>R(e.palette.primary.main,.05)}},onClick:()=>document.getElementById(`file-upload`)?.click(),children:[(0,$.jsx)(i,{size:48,style:{opacity:.5,marginBottom:16}}),(0,$.jsx)(W,{variant:`body1`,sx:{mb:1},children:`点击选择文件`}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,children:`支持 .json 格式`}),(0,$.jsx)(`input`,{id:`file-upload`,type:`file`,accept:`.json`,style:{display:`none`},onChange:re})]}),m&&(0,$.jsx)(T,{severity:`error`,sx:{mt:2},children:m}),_&&(0,$.jsxs)(j,{sx:{mt:2},children:[(0,$.jsx)(W,{variant:`subtitle2`,sx:{mb:1,fontWeight:600},children:`配置预览`}),(0,$.jsx)(j,{sx:{border:1,borderColor:`divider`,borderRadius:2,bgcolor:e=>R(e.palette.background.paper,.5),maxHeight:300,overflow:`auto`},children:w(_)}),(0,$.jsx)(A,{fullWidth:!0,variant:`contained`,onClick:S,sx:{mt:2},children:`应用配置`})]})]})]}),(0,$.jsx)(k,{sx:{px:3,pb:2},children:(0,$.jsx)(A,{onClick:C,variant:`text`,children:`取消`})})]})},ze=()=>{let n=Te(),r=ce(),i=s(e=>e.settings),{currentLanguage:u,changeLanguage:ne}=_e(),{t:C}=ye(),[T,E]=(0,J.useState)(!1),[xe,P]=(0,J.useState)(!1),[L,z]=(0,J.useState)(!1),[H,G]=(0,J.useState)(null),[K,Y]=(0,J.useState)(!1),[X,Ne]=(0,J.useState)([]),[Z,Fe]=(0,J.useState)(!1),Ie=J.useRef(null),Q=async()=>{Fe(!0);try{await _(),Ne(await l())}catch(e){console.error(`加载字体列表失败:`,e)}finally{Fe(!1)}};(0,J.useEffect)(()=>{K&&X.length===0&&!Z&&Q()},[K,X.length,Z]);let ze=async e=>{let t=e.target.files?.[0];if(t){try{let e=await ie(t);e&&(await Q(),r(U(e.id)))}catch(e){alert(e.message||`添加字体失败`)}e.target.value=``}},Be=async e=>{await te(e)&&(i.fontFamily===e&&r(U(`system`)),await Q())},Ve=(0,J.useMemo)(()=>{if(X.length===0)return[{name:`加载中...`,items:[]}];let e=new Set(oe().map(e=>e.id));return Object.entries(we).map(([t,n])=>({name:n,items:X.filter(e=>e.category===t).map(t=>({key:t.id,label:t.name,subLabel:t.preview,deletable:e.has(t.id)}))})).filter(e=>e.items.length>0)},[X]),{containerRef:He,handleScroll:Ue}=be(`settings-appearance`,{autoRestore:!0,restoreDelay:100});(0,J.useEffect)(()=>{let e=Pe();e&&(G(e),z(!0),window.history.replaceState({},``,window.location.pathname+window.location.hash.split(`?`)[0]))},[]);let We=()=>{n(`/settings`)},Ge=()=>{E(!0)},Ke=()=>{P(!0)},qe=e=>{G(e),z(!0)},Je=()=>{H&&(r(he(H)),z(!1),G(null))},Ye=()=>{z(!1),G(null)},Xe=(e,t)=>{r(ue(t))},Ze=async e=>{await w(e),r(U(e))},Qe=[{value:12,label:C(`settings.appearance.fontSize.presets.12`)},{value:14,label:C(`settings.appearance.fontSize.presets.14`)},{value:16,label:C(`settings.appearance.fontSize.presets.16`)},{value:18,label:C(`settings.appearance.fontSize.presets.18`)},{value:20,label:C(`settings.appearance.fontSize.presets.20`)},{value:24,label:C(`settings.appearance.fontSize.presets.24`)}],$e=e=>{let t=Qe.find(t=>t.value===e);return t?t.label:C(`settings.appearance.fontSize.custom`)},et=e=>{let t=X.find(t=>t.id===e);if(t)return t.name;let n=Se(e);return n?n.name:e&&e!==`system`?e.replace(/-/g,` `).replace(/\b\w/g,e=>e.toUpperCase()):C(`settings.appearance.fontFamily.systemDefault`)},tt=()=>{n(`/settings/appearance/chat-interface`)},nt=()=>{n(`/settings/appearance/top-toolbar`)},rt=()=>{n(`/settings/appearance/toolbar-customization`)},it=()=>{n(`/settings/appearance/message-bubble`)},at=()=>{n(`/settings/appearance/thinking-process`)},ot=()=>{n(`/settings/appearance/input-box`)},st=()=>{n(`/settings/appearance/theme-style`)},ct=e=>{r(de(e.target.checked))},lt=e=>{r(d(e.target.checked))};return(0,$.jsxs)(ge,{children:[(0,$.jsx)(ve,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,$.jsxs)(m,{children:[(0,$.jsx)(f,{edge:`start`,color:`inherit`,onClick:We,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,$.jsx)(ke,{size:24})}),(0,$.jsx)(W,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:C(`settings.appearance.title`)}),(0,$.jsx)(f,{color:`inherit`,onClick:Ke,"aria-label":`import`,sx:{color:e=>e.palette.primary.main,mr:1},children:(0,$.jsx)(p,{size:20})}),(0,$.jsx)(f,{color:`inherit`,onClick:Ge,"aria-label":`share`,sx:{color:e=>e.palette.primary.main},children:(0,$.jsx)(o,{size:20})})]})}),(0,$.jsxs)(j,{ref:He,onScroll:Ue,sx:{flexGrow:1,overflowY:`auto`,p:2,pb:`var(--content-bottom-padding)`,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,$.jsxs)(c,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,$.jsxs)(j,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,$.jsx)(W,{variant:`subtitle1`,sx:{fontWeight:600},children:C(`settings.appearance.themeAndFont.title`)}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,children:C(`settings.appearance.themeAndFont.description`)})]}),(0,$.jsx)(B,{}),(0,$.jsxs)(j,{sx:{p:2},children:[(0,$.jsxs)(le,{fullWidth:!0,variant:`outlined`,sx:{mb:3},children:[(0,$.jsx)(x,{children:C(`settings.appearance.theme.label`)}),(0,$.jsxs)(ae,{value:i.theme,onChange:e=>r(fe(e.target.value)),label:C(`settings.appearance.theme.label`),MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},sx:{"& .MuiSelect-select":{fontSize:{xs:`0.9rem`,sm:`1rem`}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:2}},children:[(0,$.jsx)(b,{value:`light`,children:C(`settings.light`)}),(0,$.jsx)(b,{value:`dark`,children:C(`settings.dark`)}),(0,$.jsx)(b,{value:`system`,children:C(`settings.system`)})]}),(0,$.jsx)(me,{children:C(`settings.appearance.theme.helperText`)})]}),(0,$.jsxs)(le,{fullWidth:!0,variant:`outlined`,sx:{mb:3},children:[(0,$.jsx)(x,{children:C(`settings.appearance.language.label`)}),(0,$.jsx)(ae,{value:u,onChange:e=>ne(e.target.value),label:C(`settings.appearance.language.label`),MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},sx:{"& .MuiSelect-select":{fontSize:{xs:`0.9rem`,sm:`1rem`}},"& .MuiOutlinedInput-notchedOutline":{borderRadius:2}},children:Oe.map(e=>(0,$.jsx)(b,{value:e.code,children:(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,$.jsx)(se,{size:16}),(0,$.jsx)(W,{children:e.nativeName}),(0,$.jsx)(W,{variant:`caption`,color:`text.secondary`,sx:{ml:`auto`},children:e.name})]})},e.code))}),(0,$.jsx)(me,{children:C(`settings.appearance.language.helperText`)})]}),(0,$.jsxs)(j,{sx:{mb:2},children:[(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,mb:2},children:[(0,$.jsx)(W,{variant:`body1`,sx:{fontWeight:500,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:C(`settings.appearance.fontSize.label`)}),(0,$.jsx)(V,{label:`${i.fontSize}px (${$e(i.fontSize)})`,size:`small`,color:`primary`,variant:`outlined`,sx:{fontSize:{xs:`0.7rem`,sm:`0.75rem`},fontWeight:500}})]}),(0,$.jsx)(Ce,{value:i.fontSize,min:12,max:24,step:1,onChange:Xe,valueLabelDisplay:`auto`,valueLabelFormat:e=>`${e}px`,marks:Qe.map(e=>({value:e.value,label:e.label})),sx:{"& .MuiSlider-thumb":{width:{xs:20,sm:24},height:{xs:20,sm:24},"&:hover":{boxShadow:`0 0 0 8px rgba(147, 51, 234, 0.16)`}},"& .MuiSlider-track":{background:`linear-gradient(90deg, #9333EA, #754AB4)`},"& .MuiSlider-rail":{opacity:.3},"& .MuiSlider-mark":{backgroundColor:`currentColor`,height:8,width:2,"&.MuiSlider-markActive":{backgroundColor:`currentColor`}},"& .MuiSlider-markLabel":{fontSize:{xs:`0.65rem`,sm:`0.75rem`},color:`text.secondary`,transform:`translateX(-50%)`,top:{xs:28,sm:32}},"& .MuiSlider-valueLabel":{fontSize:`0.75rem`,fontWeight:600,background:`linear-gradient(45deg, #9333EA, #754AB4)`}}}),(0,$.jsx)(me,{sx:{mt:1,fontSize:{xs:`0.75rem`,sm:`0.875rem`}},children:C(`settings.appearance.fontSize.helperText`)})]}),(0,$.jsxs)(j,{sx:{mb:2},children:[(0,$.jsx)(h,{fullWidth:!0,label:C(`settings.appearance.fontFamily.label`),value:et(i.fontFamily||`system`),onClick:()=>Y(!0),sx:{cursor:`pointer`,"& .MuiOutlinedInput-notchedOutline":{borderRadius:2}},helperText:C(`settings.appearance.fontFamily.helperText`),InputProps:{readOnly:!0,endAdornment:(0,$.jsx)(e,{position:`end`,children:(0,$.jsx)(M,{size:18})}),sx:{cursor:`pointer`}}}),(0,$.jsx)(A,{variant:`outlined`,size:`small`,onClick:()=>Ie.current?.click(),sx:{mt:1},children:`添加本地字体`}),(0,$.jsx)(`input`,{ref:Ie,type:`file`,accept:`.ttf,.otf,.woff,.woff2`,style:{display:`none`},onChange:ze})]})]})]}),(0,$.jsxs)(c,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,$.jsxs)(j,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,$.jsx)(W,{variant:`subtitle1`,sx:{fontWeight:600},children:C(`settings.appearance.customization.title`)}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,children:C(`settings.appearance.customization.description`)})]}),(0,$.jsx)(B,{}),(0,$.jsxs)(pe,{disablePadding:!0,children:[(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:st,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#9333EA`,.12),color:`#9333EA`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(y,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.themeStyle.title`)}),secondary:C(`settings.appearance.themeStyle.navigationDescription`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:nt,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#10b981`,.12),color:`#10b981`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(je,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.topToolbar.title`)}),secondary:C(`settings.appearance.topToolbar.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:tt,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#6366f1`,.12),color:`#6366f1`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(v,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.chatInterface.title`)}),secondary:C(`settings.appearance.chatInterface.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:at,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#f59e0b`,.12),color:`#f59e0b`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(g,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.thinkingProcess.title`)}),secondary:C(`settings.appearance.thinkingProcess.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:it,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#8b5cf6`,.12),color:`#8b5cf6`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(S,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.messageBubble.title`)}),secondary:C(`settings.appearance.messageBubble.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:rt,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#06b6d4`,.12),color:`#06b6d4`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(re,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.toolbarCustomization.title`)}),secondary:C(`settings.appearance.toolbarCustomization.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,$.jsx)(B,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,$.jsx)(O,{disablePadding:!0,children:(0,$.jsxs)(D,{onClick:ot,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>R(e.palette.primary.main,.05)}},children:[(0,$.jsx)(t,{children:(0,$.jsx)(F,{sx:{bgcolor:R(`#ec4899`,.12),color:`#ec4899`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,$.jsx)(a,{size:20})})}),(0,$.jsx)(q,{primary:(0,$.jsx)(W,{sx:{fontWeight:600,color:`text.primary`},children:C(`settings.appearance.inputBox.title`)}),secondary:C(`settings.appearance.inputBox.description`),primaryTypographyProps:{component:`div`}}),(0,$.jsx)(M,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})})]})]}),(0,$.jsxs)(c,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,$.jsxs)(j,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,$.jsx)(W,{variant:`subtitle1`,sx:{fontWeight:600},children:C(`settings.appearance.developerTools.title`)}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,children:C(`settings.appearance.developerTools.description`)})]}),(0,$.jsx)(B,{}),(0,$.jsxs)(j,{sx:{p:3},children:[(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:2},children:[(0,$.jsxs)(j,{sx:{flex:1,minWidth:0},children:[(0,$.jsx)(W,{variant:`body1`,sx:{fontWeight:500,mb:.5,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:C(`settings.appearance.developerTools.performanceMonitor.title`)}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`},lineHeight:1.5},children:C(`settings.appearance.developerTools.performanceMonitor.description`)})]}),(0,$.jsx)(j,{sx:{flexShrink:0,pt:.5},children:(0,$.jsx)(De,{checked:i.showPerformanceMonitor||!1,onChange:ct})})]}),(0,$.jsx)(B,{sx:{my:2}}),(0,$.jsxs)(j,{sx:{display:`flex`,alignItems:`flex-start`,justifyContent:`space-between`,gap:2},children:[(0,$.jsxs)(j,{sx:{flex:1,minWidth:0},children:[(0,$.jsx)(W,{variant:`body1`,sx:{fontWeight:500,mb:.5,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:C(`settings.appearance.developerTools.floatingButton.title`)}),(0,$.jsx)(W,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`},lineHeight:1.5},children:C(`settings.appearance.developerTools.floatingButton.description`)})]}),(0,$.jsx)(j,{sx:{flexShrink:0,pt:.5},children:(0,$.jsx)(De,{checked:i.showDevToolsFloatingButton||!1,onChange:lt})})]})]})]})]}),(0,$.jsx)(Le,{open:T,onClose:()=>E(!1),config:Me(i)}),(0,$.jsx)(Re,{open:xe,onClose:()=>P(!1),onImport:qe}),(0,$.jsxs)(ee,{open:L,onClose:Ye,maxWidth:`sm`,PaperProps:{sx:{borderRadius:3,boxShadow:`0 8px 32px rgba(0,0,0,0.12)`}},children:[(0,$.jsx)(I,{sx:{fontWeight:600},children:`确认应用外观设置`}),(0,$.jsx)(N,{children:(0,$.jsx)(Ee,{children:`你确定要应用这个外观配置吗？这将覆盖你当前的外观设置。`})}),(0,$.jsxs)(k,{sx:{px:3,pb:2},children:[(0,$.jsx)(A,{onClick:Ye,variant:`text`,children:`取消`}),(0,$.jsx)(A,{onClick:Je,variant:`contained`,autoFocus:!0,children:`确认应用`})]})]}),(0,$.jsx)(Ae,{open:K,onClose:()=>Y(!1),title:C(`settings.appearance.fontFamily.label`),groups:Ve,selectedKey:i.fontFamily||`system`,onSelect:e=>Ze(e),onDelete:Be})]})};export{ze as default};