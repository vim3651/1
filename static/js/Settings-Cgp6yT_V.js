import{t as e}from"./book-open-Cg499jJK.js";import{t}from"./file-text-BSjgZddV.js";import{t as n}from"./git-branch-B91WwM1C.js";import{t as r}from"./keyboard-DPLpzxwl.js";import{t as i}from"./mic-DOR2hOIQ.js";import{t as a}from"./shield-DNkeYoa0.js";import{t as o}from"./wand-sparkles-CCUOXbc6.js";import{$l as s,Gl as c,Hl as l,Ll as u,Ql as d,Rl as f,Xl as p,_ as m,au as h,bu as g,ci as _,f as v,i as y,m as b,pp as x,qp as S,v as C,x as w,xp as T,y as E,zp as D}from"./index-hvLbsAjx.js";import{t as O}from"./CustomIcon-BKBQb-ts.js";var k=S(D(),1);const A=(e={})=>{let{onSwipeRight:t,onSwipeLeft:n,onSwipeProgress:r,threshold:i=50,velocityThreshold:a=.3,preventDefaultOnSwipe:o=!1,enabled:s=!0,edgeThreshold:c=50,enableEdgeDetection:l=!1,maxSwipeDistance:u=320}=e,d=(0,k.useRef)({startX:0,startY:0,startTime:0,isTracking:!1,currentX:0,currentY:0}),[f,p]=(0,k.useState)(!1),m=(0,k.useCallback)(()=>{d.current={startX:0,startY:0,startTime:0,isTracking:!1,currentX:0,currentY:0},p(!1)},[]),h=(0,k.useCallback)(e=>{if(!s)return;let t=e.touches[0],n=Date.now();d.current={startX:t.clientX,startY:t.clientY,startTime:n,isTracking:!0,currentX:t.clientX,currentY:t.clientY},p(!0)},[s,l,c]),g=(0,k.useCallback)(e=>{if(!s||!d.current.isTracking)return;let t=e.touches[0],n=d.current;n.currentX=t.clientX,n.currentY=t.clientY;let a=t.clientX-n.startX,f=t.clientY-n.startY;if(!(Math.abs(f)>Math.abs(a))){if(r&&Math.abs(a)>5){let e=!0;if(l){let t=n.startX<=c;e=a>0&&t||a<0}e&&r(Math.max(-u,Math.min(u,a)),a>0?`right`:`left`)}o&&Math.abs(a)>i/2&&e.preventDefault()}},[s,i,o,r,l,c]),_=(0,k.useCallback)(e=>{if(!s||!d.current.isTracking)return;let o=d.current,u=Date.now()-o.startTime,f=o.currentX-o.startX,p=o.currentY-o.startY,h=Math.abs(f)/u,g=Math.abs(f)>Math.abs(p),_=Math.abs(f)>i,v=h>a,y=!1;if(g&&(_||v))if(l){let e=o.startX<=c;f>0&&t&&e?(t(),y=!0):f<0&&n&&(n(),y=!0)}else f>0&&t?(t(),y=!0):f<0&&n&&(n(),y=!0);!y&&r&&r(0,f>0?`right`:`left`),m()},[s,i,a,t,n,r,l,c,m]),v=(0,k.useCallback)(()=>{let e=d.current,t=e.currentX-e.startX;r&&r(0,t>0?`right`:`left`),m()},[m,r]);return{swipeHandlers:{onTouchStart:e=>{h(e.nativeEvent)},onTouchMove:e=>{g(e.nativeEvent)},onTouchEnd:e=>{_(e.nativeEvent)},onTouchCancel:()=>{v()}},bindSwipeEvents:(0,k.useCallback)(e=>{if(!(!e||!s))return e.addEventListener(`touchstart`,h,{passive:!1}),e.addEventListener(`touchmove`,g,{passive:!1}),e.addEventListener(`touchend`,_,{passive:!0}),e.addEventListener(`touchcancel`,v,{passive:!0}),()=>{e.removeEventListener(`touchstart`,h),e.removeEventListener(`touchmove`,g),e.removeEventListener(`touchend`,_),e.removeEventListener(`touchcancel`,v)}},[s,h,g,_,v]),isSwipeActive:f,resetSwipeState:m}};var j=S(T(),1),M=()=>{let S=x(),{t:T}=_(),{containerRef:D,handleScroll:k}=y(`settings-main`,{autoRestore:!0,restoreDelay:100}),M=()=>{try{Object.keys(localStorage).forEach(e=>{e.startsWith(`scroll:settings-`)&&localStorage.removeItem(e)})}catch(e){console.error(T(`settings.scrollCacheError`),e)}S(`/chat`)},{swipeHandlers:N}=A({onSwipeRight:M,threshold:100,velocityThreshold:.3,enabled:!0,enableEdgeDetection:!0,edgeThreshold:50}),P=e=>{S(e)},F=[{title:T(`settings.groups.basic`),items:[{id:`appearance`,title:T(`settings.items.appearance.title`),description:T(`settings.items.appearance.description`),icon:(0,j.jsx)(l,{size:24}),path:`/settings/appearance`,onClick:()=>P(`/settings/appearance`)},{id:`behavior`,title:T(`settings.items.behavior.title`),description:T(`settings.items.behavior.description`),icon:(0,j.jsx)(f,{size:24}),path:`/settings/behavior`,onClick:()=>P(`/settings/behavior`)}]},{title:T(`settings.groups.modelService`),items:[{id:`default-model`,title:T(`settings.items.defaultModel.title`),description:T(`settings.items.defaultModel.description`),icon:(0,j.jsx)(g,{size:24}),path:`/settings/default-model`,onClick:()=>P(`/settings/default-model`)},{id:`assistant-model`,title:T(`settings.items.topicNaming.title`),description:T(`settings.items.topicNaming.description`),icon:(0,j.jsx)(u,{size:24}),path:`/settings/assistant-model`,onClick:()=>P(`/settings/assistant-model`)},{id:`agent-prompts`,title:T(`settings.items.agentPrompts.title`),description:T(`settings.items.agentPrompts.description`),icon:(0,j.jsx)(o,{size:24}),path:`/settings/agent-prompts`,onClick:()=>P(`/settings/agent-prompts`)},{id:`ai-debate`,title:T(`settings.items.aiDebate.title`),description:T(`settings.items.aiDebate.description`),icon:(0,j.jsx)(c,{size:24}),path:`/settings/ai-debate`,onClick:()=>P(`/settings/ai-debate`)},{id:`model-combo`,title:T(`settings.items.modelCombo.title`),description:T(`settings.items.modelCombo.description`),icon:(0,j.jsx)(n,{size:24}),path:`/settings/model-combo`,onClick:()=>P(`/settings/model-combo`)},{id:`context-condense`,title:T(`settings.items.contextCondense.title`,`上下文压缩`),description:T(`settings.items.contextCondense.description`,`智能压缩对话历史，节省Token成本`),icon:(0,j.jsx)(O,{name:`foldVertical`,size:24}),path:`/settings/context-condense`,onClick:()=>P(`/settings/context-condense`)},{id:`web-search`,title:T(`settings.items.webSearch.title`),description:T(`settings.items.webSearch.description`),icon:(0,j.jsx)(d,{size:24}),path:`/settings/web-search`,onClick:()=>P(`/settings/web-search`)},{id:`mcp-server`,title:T(`settings.items.mcpServer.title`),description:T(`settings.items.mcpServer.description`),icon:(0,j.jsx)(f,{size:24}),path:`/settings/mcp-server`,onClick:()=>P(`/settings/mcp-server`)}]},{title:T(`settings.groups.shortcuts`),items:[{id:`quick-phrases`,title:T(`settings.items.quickPhrases.title`),description:T(`settings.items.quickPhrases.description`),icon:(0,j.jsx)(r,{size:24}),path:`/settings/quick-phrases`,onClick:()=>P(`/settings/quick-phrases`)}]},{title:T(`settings.groups.other`),items:[{id:`workspace-settings`,title:T(`settings.items.workspace.title`),description:T(`settings.items.workspace.description`),icon:(0,j.jsx)(s,{size:24}),path:`/settings/workspace`,onClick:()=>P(`/settings/workspace`)},{id:`knowledge-settings`,title:T(`settings.items.knowledge.title`),description:T(`settings.items.knowledge.description`),icon:(0,j.jsx)(e,{size:24}),path:`/settings/knowledge`,onClick:()=>P(`/settings/knowledge`)},{id:`memory-settings`,title:`记忆功能`,description:`管理AI长期记忆，自动记住用户偏好`,icon:(0,j.jsx)(h,{size:24}),path:`/settings/memory`,onClick:()=>P(`/settings/memory`)},{id:`note-settings`,title:`笔记设置`,description:`配置本地笔记存储路径和显示选项`,icon:(0,j.jsx)(t,{size:24}),path:`/settings/notes`,onClick:()=>P(`/settings/notes`)},{id:`data-settings`,title:T(`settings.items.data.title`),description:T(`settings.items.data.description`),icon:(0,j.jsx)(h,{size:24}),path:`/settings/data`,onClick:()=>P(`/settings/data`)},{id:`notion-settings`,title:T(`settings.items.notion.title`),description:T(`settings.items.notion.description`),icon:(0,j.jsx)(h,{size:24}),path:`/settings/notion`,onClick:()=>P(`/settings/notion`)},{id:`voice-settings`,title:T(`settings.items.voice.title`),description:T(`settings.items.voice.description`),icon:(0,j.jsx)(i,{size:24}),path:`/settings/voice`,onClick:()=>P(`/settings/voice`)},{id:`network-proxy`,title:T(`settings.items.networkProxy.title`),description:T(`settings.items.networkProxy.description`),icon:(0,j.jsx)(a,{size:24}),path:`/settings/network-proxy`,onClick:()=>P(`/settings/network-proxy`)},{id:`about`,title:T(`settings.items.about.title`),description:T(`settings.items.about.description`),icon:(0,j.jsx)(p,{size:24}),path:`/settings/about`,onClick:()=>P(`/settings/about`)}]}];return(0,j.jsxs)(m,{...N,children:[(0,j.jsx)(b,{title:T(`settings.title`),onBackPress:M}),(0,j.jsx)(v,{ref:D,onScroll:k,sx:{overflow:`auto`,willChange:`scroll-position`,transform:`translateZ(0)`,WebkitOverflowScrolling:`touch`,contain:`layout style paint`,scrollBehavior:`auto`,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:(0,j.jsx)(w,{sx:{gap:3},children:F.map((e,t)=>(0,j.jsx)(C,{title:e.title,children:e.items.map(e=>(0,j.jsx)(E,{title:e.title,description:e.description,icon:e.icon,onClick:e.onClick,showArrow:!0},e.id))},t))})})]})};export{M as default};