import{t as e}from"./Card-CgnXHdbl.js";import{t}from"./CardActions-Di-BmE_R.js";import{t as n}from"./CardContent-f2tPkMYB.js";import{t as r}from"./arrow-left-right-Czyvlhqu.js";import{t as ee}from"./arrow-right-CUpdoBf6.js";import{t as te}from"./git-branch-B91WwM1C.js";import{t as i}from"./plus-DCrdXXDc.js";import{t as a}from"./wand-sparkles-CCUOXbc6.js";import{$u as o,Ad as s,Al as c,Cd as l,Cu as u,Du as d,Gi as f,K as p,Pl as m,Ud as h,_ as g,ad as _,bd as v,bu as y,ci as b,dd as x,fd as S,fp as C,i as w,id as T,nd as ne,pp as re,qd as E,qp as D,r as ie,vd as O,xd as k,xp as A,xu as j,zp as M}from"./index-hvLbsAjx.js";var N=D(M(),1),P=D(A(),1),F=()=>{let{t:D}=b(),A=re(),M=h(),F=u(M.breakpoints.down(`md`)),I=u(M.breakpoints.down(`sm`)),{containerRef:L,handleScroll:R}=w(`settings-model-combo`,{autoRestore:!0,restoreDelay:0}),[z,B]=(0,N.useState)([]),[V,H]=(0,N.useState)([]),[U,W]=(0,N.useState)(!1),[G,K]=(0,N.useState)(null),q=C(),{syncModelCombos:J}=ie();(0,N.useEffect)(()=>{Y()},[q.key]);let Y=async()=>{try{let[e,t]=await Promise.all([p.getAllCombos(),Promise.resolve(p.getTemplates())]);B(e),H(t)}catch(e){console.error(`加载模型组合数据失败:`,e)}},ae=()=>{A(`/settings`)},X=()=>{A(`/settings/model-combo/new`)},oe=e=>{A(`/settings/model-combo/${e.id}`)},se=e=>{K(e),W(!0)},ce=async()=>{if(G)try{await p.deleteCombo(G.id),await Y(),await J(),W(!1),K(null)}catch(e){console.error(`删除模型组合失败:`,e)}},le=async e=>{try{let t={...e.template,name:e.name,description:e.description};await p.createCombo(t),await Y(),await J()}catch(e){console.error(`从模板创建模型组合失败:`,e)}},Z=e=>{switch(e){case`routing`:return(0,P.jsx)(y,{size:20});case`ensemble`:return(0,P.jsx)(te,{size:20});case`comparison`:return(0,P.jsx)(r,{size:20});case`cascade`:return(0,P.jsx)(a,{size:20});case`sequential`:return(0,P.jsx)(ee,{size:20});default:return(0,P.jsx)(y,{size:20})}},Q=e=>{switch(e){case`routing`:return D(`modelSettings.combo.strategy.routing`);case`ensemble`:return D(`modelSettings.combo.strategy.ensemble`);case`comparison`:return D(`modelSettings.combo.strategy.comparison`);case`cascade`:return D(`modelSettings.combo.strategy.cascade`);case`sequential`:return D(`modelSettings.combo.strategy.sequential`);default:return e}},$=e=>{switch(e){case`routing`:return`#2196f3`;case`ensemble`:return`#4caf50`;case`comparison`:return`#ff9800`;case`cascade`:return`#9c27b0`;case`sequential`:return`#f44336`;default:return`#757575`}};return(0,P.jsxs)(g,{children:[(0,P.jsx)(v,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,P.jsxs)(d,{children:[(0,P.jsx)(l,{edge:`start`,onClick:ae,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,P.jsx)(j,{size:24})}),(0,P.jsx)(k,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:D(`modelSettings.combo.title`)})]})}),(0,P.jsxs)(S,{ref:L,onScroll:R,sx:{flexGrow:1,overflow:`auto`,px:F?1:2,py:F?1:2,pb:`var(--content-bottom-padding)`},children:[V.length>0&&(0,P.jsxs)(S,{sx:{mb:F?2:4},children:[(0,P.jsx)(k,{variant:F?`subtitle1`:`h6`,sx:{mb:F?1:2,fontWeight:600,fontSize:F?`1.1rem`:void 0},children:D(`modelSettings.combo.presetTemplates`)}),(0,P.jsx)(S,{sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:I?`1fr`:`repeat(2, 1fr)`,md:`repeat(2, 1fr)`,lg:`repeat(3, 1fr)`},gap:F?1:2},children:V.map(r=>(0,P.jsx)(S,{children:(0,P.jsxs)(e,{sx:{height:`100%`,display:`flex`,flexDirection:`column`,border:`1px solid`,borderColor:`divider`,"&:hover":{borderColor:`primary.main`,transform:F?`none`:`translateY(-2px)`,boxShadow:F?1:2},transition:`all 0.2s ease-in-out`},children:[(0,P.jsxs)(n,{sx:{flexGrow:1,p:F?1.5:2,"&:last-child":{pb:F?1.5:2}},children:[(0,P.jsxs)(S,{sx:{display:`flex`,alignItems:`center`,mb:F?.5:1},children:[(0,P.jsx)(S,{sx:{mr:1,fontSize:F?`1.2rem`:`1.5rem`},children:r.icon}),(0,P.jsx)(k,{variant:F?`subtitle1`:`h6`,component:`div`,sx:{fontWeight:600,fontSize:F?`1rem`:void 0},children:r.name})]}),(0,P.jsx)(k,{variant:`body2`,color:`text.secondary`,sx:{mb:F?1:2,fontSize:F?`0.8rem`:void 0,lineHeight:F?1.3:void 0},children:r.description}),(0,P.jsx)(O,{icon:Z(r.strategy),label:Q(r.strategy),size:`small`,sx:{bgcolor:E($(r.strategy),.1),color:$(r.strategy),fontSize:F?`0.7rem`:void 0,height:F?24:void 0,"& .MuiChip-icon":{fontSize:F?`0.9rem`:void 0}}})]}),(0,P.jsx)(t,{sx:{p:F?1:2,pt:0},children:(0,P.jsx)(x,{size:`small`,startIcon:(0,P.jsx)(i,{size:16}),onClick:()=>le(r),sx:{ml:`auto`,fontSize:F?`0.75rem`:void 0,px:F?1:void 0},children:D(`modelSettings.combo.useTemplate`)})})]})},r.id))})]}),(0,P.jsxs)(S,{children:[(0,P.jsx)(k,{variant:F?`subtitle1`:`h6`,sx:{mb:F?1:2,fontWeight:600,fontSize:F?`1.1rem`:void 0},children:D(`modelSettings.combo.myCombos`)}),z.length===0?(0,P.jsxs)(s,{sx:{p:F?2:4,textAlign:`center`,border:`2px dashed`,borderColor:`divider`},children:[(0,P.jsx)(y,{size:F?36:48,color:`currentColor`,style:{color:`var(--mui-palette-text-secondary)`,marginBottom:F?8:16}}),(0,P.jsx)(k,{variant:F?`subtitle1`:`h6`,color:`text.secondary`,gutterBottom:!0,sx:{fontSize:F?`1rem`:void 0},children:D(`modelSettings.combo.noComboYet`)}),(0,P.jsx)(k,{variant:`body2`,color:`text.secondary`,sx:{mb:F?2:3,fontSize:F?`0.8rem`:void 0},children:D(`modelSettings.combo.createComboDesc`)}),(0,P.jsx)(x,{variant:`contained`,startIcon:(0,P.jsx)(i,{size:16}),onClick:X,size:F?`small`:`medium`,sx:{fontSize:F?`0.8rem`:void 0},children:D(`modelSettings.combo.createFirst`)})]}):(0,P.jsx)(S,{sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:I?`1fr`:`repeat(2, 1fr)`,md:`repeat(2, 1fr)`,lg:`repeat(3, 1fr)`},gap:F?1:2},children:z.map(r=>(0,P.jsx)(S,{children:(0,P.jsxs)(e,{sx:{height:`100%`,display:`flex`,flexDirection:`column`,border:`1px solid`,borderColor:r.enabled?`success.main`:`divider`,opacity:r.enabled?1:.7},children:[(0,P.jsxs)(n,{sx:{flexGrow:1,p:F?1.5:2,"&:last-child":{pb:F?1.5:2}},children:[(0,P.jsx)(k,{variant:F?`subtitle1`:`h6`,component:`div`,sx:{fontWeight:600,mb:F?.5:1,fontSize:F?`1rem`:void 0},children:r.name}),(0,P.jsx)(k,{variant:`body2`,color:`text.secondary`,sx:{mb:F?1:2,fontSize:F?`0.8rem`:void 0,lineHeight:F?1.3:void 0},children:r.description}),(0,P.jsx)(O,{icon:Z(r.strategy),label:Q(r.strategy),size:`small`,sx:{bgcolor:E($(r.strategy),.1),color:$(r.strategy),mb:F?.5:1,fontSize:F?`0.7rem`:void 0,height:F?24:void 0,"& .MuiChip-icon":{fontSize:F?`0.9rem`:void 0}}}),(0,P.jsx)(k,{variant:`caption`,display:`block`,color:`text.secondary`,sx:{fontSize:F?`0.7rem`:void 0},children:D(`modelSettings.combo.modelCount`,{count:r.models.length})})]}),(0,P.jsxs)(t,{sx:{p:F?1.5:2,pt:0,justifyContent:`flex-end`,gap:1},children:[(0,P.jsx)(l,{size:`medium`,onClick:()=>oe(r),color:`primary`,sx:{bgcolor:`action.hover`,"&:hover":{bgcolor:`primary.main`,color:`white`}},children:(0,P.jsx)(m,{size:F?18:22})}),(0,P.jsx)(l,{size:`medium`,onClick:()=>se(r),color:`error`,sx:{bgcolor:`action.hover`,"&:hover":{bgcolor:`error.main`,color:`white`}},children:(0,P.jsx)(c,{size:F?18:22})})]})]})},r.id))})]})]}),(0,P.jsx)(o,{color:`primary`,"aria-label":`add`,size:F?`medium`:`large`,sx:{position:`fixed`,bottom:`calc(${F?12:16}px + var(--safe-area-bottom-computed, 0px))`,right:F?12:16,width:F?48:void 0,height:F?48:void 0},onClick:X,children:(0,P.jsx)(i,{size:F?20:24})}),(0,P.jsxs)(f,{open:U,onClose:()=>W(!1),children:[(0,P.jsx)(ne,{children:D(`modelSettings.combo.deleteConfirm`)}),(0,P.jsx)(T,{children:(0,P.jsx)(k,{children:D(`modelSettings.combo.deleteMessage`,{name:G?.name||``})})}),(0,P.jsxs)(_,{children:[(0,P.jsx)(x,{onClick:()=>W(!1),children:D(`common.cancel`)}),(0,P.jsx)(x,{onClick:ce,color:`error`,variant:`contained`,children:D(`common.delete`)})]})]})]})};export{F as default};