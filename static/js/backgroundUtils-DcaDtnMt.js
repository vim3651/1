import{$d as e,Gd as t,Hd as n,Qd as r,Zd as i,qp as a,xp as o,zd as s,zp as c}from"./index-hvLbsAjx.js";function l(e){return r(`MuiCardMedia`,e)}i(`MuiCardMedia`,[`root`,`media`,`img`]);var u=a(c()),d=a(o()),f=e=>{let{classes:n,isMediaComponent:r,isImageComponent:i}=e;return t({root:[`root`,r&&`media`,i&&`img`]},l,n)},p=n(`div`,{name:`MuiCardMedia`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})({display:`block`,backgroundSize:`cover`,backgroundRepeat:`no-repeat`,backgroundPosition:`center`,variants:[{props:{isMediaComponent:!0},style:{width:`100%`}},{props:{isImageComponent:!0},style:{objectFit:`cover`}}]}),m=[`video`,`audio`,`picture`,`iframe`,`img`],h=[`picture`,`img`],g=u.forwardRef(function(t,n){let r=s({props:t,name:`MuiCardMedia`}),{children:i,className:a,component:o=`div`,image:c,src:l,style:u,...g}=r,_=m.includes(o),v=!_&&c?{backgroundImage:`url("${c}")`,...u}:u,y={...r,component:o,isMediaComponent:_,isImageComponent:h.includes(o)};return(0,d.jsx)(p,{className:e(f(y).root,a),as:o,role:!_&&c?`img`:void 0,ref:n,style:v,ownerState:y,src:_?c||l:void 0,...g,children:i})});const _=[`image/jpeg`,`image/jpg`,`image/png`,`image/gif`,`image/webp`],v=(e,t)=>_.includes(e.type)?e.size>5242880?{valid:!1,error:t?t(`settings.appearance.chatInterface.background.errors.fileTooLarge`):`图片文件过大。请上传小于 5MB 的图片。`}:{valid:!0}:{valid:!1,error:t?t(`settings.appearance.chatInterface.background.errors.invalidFormat`):`不支持的图片格式。请上传 JPG、PNG、GIF 或 WebP 格式的图片。`},y=(e,t=1920,n=1080,r=.8)=>new Promise((i,a)=>{let o=document.createElement(`canvas`),s=o.getContext(`2d`),c=new Image;c.onload=()=>{let{width:e,height:a}=c;if(e>t||a>n){let r=Math.min(t/e,n/a);e*=r,a*=r}o.width=e,o.height=a,s?.drawImage(c,0,0,e,a),i(o.toDataURL(`image/jpeg`,r))},c.onerror=()=>a(Error(`Failed to load image`)),c.src=URL.createObjectURL(e)}),b=e=>{e&&e.startsWith(`blob:`)&&URL.revokeObjectURL(e)};export{g as i,y as n,v as r,b as t};