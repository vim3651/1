import{Ad as e,Cd as t,Du as n,Eu as r,Vu as i,Wu as a,Yr as o,bd as s,bp as c,ci as l,dd as u,ei as d,fd as f,i as p,ni as m,pp as h,qd as g,qp as _,s as v,td as y,ti as b,xd as x,xp as S,xu as C,yp as w,zp as T,zu as E}from"./index-hvLbsAjx.js";import"./SolidBridge-4JuNrAWl.js";import"./DialogModelSelector.solid-B0UTW3Od.js";import"./DropdownModelSelector-D62zD9hR.js";import{t as D}from"./ModelSelector-DfSiUGl_.js";var O=_(T(),1),k=_(S(),1),A=()=>{let{t:_}=l(),S=h(),T=w(),{containerRef:A,handleScroll:j}=p(`settings-default-model`,{autoRestore:!0,restoreDelay:0}),M=c(e=>e.settings.defaultModelId),N=c(e=>e.settings.topicNamingModelId),P=c(e=>e.settings.providers),F=c(e=>e.settings.enableTopicNaming),I=c(e=>e.settings.topicNamingPrompt),L=c(e=>e.settings.topicNamingUseCurrentModel),R=c(e=>e.settings.enableAIIntentAnalysis),z=c(e=>e.settings.aiIntentAnalysisUseCurrentModel),B=c(e=>e.settings.aiIntentAnalysisModelId),[V,H]=(0,O.useState)(!1),[U,W]=(0,O.useState)(!1),G=(0,O.useMemo)(()=>P.filter(e=>e.isEnabled).flatMap(e=>e.models.filter(e=>e.enabled).map(t=>({...t,providerName:e.name,providerId:e.id}))),[P]),K=(0,O.useMemo)(()=>{let e=m(N||M);return e&&G.find(t=>b(t,e,t.providerId))||null},[G,N,M]),q=(0,O.useMemo)(()=>{let e=m(B||N||M);return e&&G.find(t=>b(t,e,t.providerId))||null},[G,B,N,M]),J=()=>{S(`/settings`)},Y=e=>{let t=e.provider||e.providerId;T(o({topicNamingModelId:d({id:e.id,provider:t})})),H(!1)},X=e=>{let t=e.target.checked;T(o({enableTopicNaming:t}))},Z=e=>{T(o({topicNamingUseCurrentModel:e.target.checked}))},Q=e=>{let t=e.target.value;T(o({topicNamingPrompt:t}))},$=()=>{H(!0)},ee=()=>{H(!1)},te=e=>{T(o({enableAIIntentAnalysis:e.target.checked}))},ne=e=>{T(o({aiIntentAnalysisUseCurrentModel:e.target.checked}))},re=e=>{let t=e.provider||e.providerId;T(o({aiIntentAnalysisModelId:d({id:e.id,provider:t})})),W(!1)};return(0,k.jsxs)(f,{sx:{flexGrow:1,display:`flex`,flexDirection:`column`,height:`100vh`,bgcolor:e=>e.palette.mode===`light`?g(e.palette.primary.main,.02):g(e.palette.background.default,.9)},children:[(0,k.jsx)(s,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,k.jsxs)(n,{children:[(0,k.jsx)(t,{edge:`start`,color:`inherit`,onClick:J,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,k.jsx)(C,{size:20})}),(0,k.jsx)(x,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:_(`modelSettings.defaultModel.title`)})]})}),(0,k.jsxs)(f,{ref:A,onScroll:j,sx:{flexGrow:1,overflowY:`auto`,p:2,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,k.jsxs)(e,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,k.jsxs)(f,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,k.jsx)(x,{variant:`subtitle1`,sx:{fontWeight:600},children:_(`modelSettings.defaultModel.namingModel`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:_(`modelSettings.defaultModel.namingModelDesc`)})]}),(0,k.jsx)(y,{}),(0,k.jsx)(a,{disablePadding:!0,children:(0,k.jsxs)(i,{children:[(0,k.jsx)(E,{primary:_(`modelSettings.defaultModel.useCurrentTopicModel`,`使用当前话题模型`),secondary:_(`modelSettings.defaultModel.useCurrentTopicModelDesc`,`使用当前对话所选择的模型进行命名`)}),(0,k.jsx)(v,{checked:L??!0,onChange:Z})]})}),(0,k.jsx)(y,{}),L===!1&&(0,k.jsxs)(f,{sx:{p:2,display:`flex`,alignItems:`center`,gap:1.5,flexWrap:`wrap`},children:[(0,k.jsx)(u,{variant:`outlined`,onClick:$,size:`small`,children:_(`modelSettings.defaultModel.selectModel`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:K?_(`modelSettings.defaultModel.currentModel`,{model:K.name}):_(`modelSettings.defaultModel.notSelected`)}),(0,k.jsx)(D,{selectedModel:K,availableModels:G,handleModelSelect:Y,handleMenuClick:$,handleMenuClose:ee,menuOpen:V})]})]}),(0,k.jsxs)(e,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,k.jsxs)(f,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,k.jsx)(x,{variant:`subtitle1`,sx:{fontWeight:600},children:_(`modelSettings.defaultModel.autoNaming`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:_(`modelSettings.defaultModel.autoNamingDesc`)})]}),(0,k.jsx)(y,{}),(0,k.jsx)(a,{disablePadding:!0,children:(0,k.jsxs)(i,{children:[(0,k.jsx)(E,{primary:_(`modelSettings.defaultModel.autoNaming`)}),(0,k.jsx)(v,{checked:F,onChange:X})]})})]}),(0,k.jsxs)(e,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,k.jsxs)(f,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,k.jsx)(x,{variant:`subtitle1`,sx:{fontWeight:600},children:_(`modelSettings.defaultModel.namingPrompt`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:_(`modelSettings.defaultModel.namingPromptDesc`)})]}),(0,k.jsx)(y,{}),(0,k.jsxs)(f,{sx:{p:2},children:[(0,k.jsx)(r,{fullWidth:!0,multiline:!0,rows:4,value:I,onChange:Q,placeholder:_(`modelSettings.defaultModel.namingPromptPlaceholder`),variant:`outlined`,sx:{"& .MuiOutlinedInput-root":{borderRadius:1}}}),I&&(0,k.jsx)(u,{variant:`outlined`,size:`small`,sx:{mt:1},onClick:()=>T(o({topicNamingPrompt:``})),children:_(`modelSettings.defaultModel.resetToDefault`)})]})]}),(0,k.jsxs)(e,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,k.jsxs)(f,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`},children:[(0,k.jsx)(x,{variant:`subtitle1`,sx:{fontWeight:600},children:_(`modelSettings.defaultModel.aiIntentAnalysis`,`AI 意图分析`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:_(`modelSettings.defaultModel.aiIntentAnalysisDesc`,`使用 AI 分析用户消息，判断是否需要进行网络搜索（仅在手动模式下生效）`)})]}),(0,k.jsx)(y,{}),(0,k.jsx)(a,{disablePadding:!0,children:(0,k.jsxs)(i,{children:[(0,k.jsx)(E,{primary:_(`modelSettings.defaultModel.enableAIIntentAnalysis`,`启用 AI 意图分析`),secondary:_(`modelSettings.defaultModel.enableAIIntentAnalysisDesc`,`关闭时使用规则匹配（快速），开启时使用 AI 分析（更准确）`)}),(0,k.jsx)(v,{checked:R??!1,onChange:te})]})}),R&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y,{}),(0,k.jsx)(a,{disablePadding:!0,children:(0,k.jsxs)(i,{children:[(0,k.jsx)(E,{primary:_(`modelSettings.defaultModel.aiIntentUseCurrentModel`,`使用当前话题模型`),secondary:_(`modelSettings.defaultModel.aiIntentUseCurrentModelDesc`,`使用当前对话所选择的模型进行意图分析`)}),(0,k.jsx)(v,{checked:z??!0,onChange:ne})]})}),z===!1&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y,{}),(0,k.jsxs)(f,{sx:{p:2,display:`flex`,alignItems:`center`,gap:1.5,flexWrap:`wrap`},children:[(0,k.jsx)(u,{variant:`outlined`,onClick:()=>W(!0),size:`small`,children:_(`modelSettings.defaultModel.selectModel`)}),(0,k.jsx)(x,{variant:`body2`,color:`text.secondary`,children:q?_(`modelSettings.defaultModel.currentModel`,{model:q.name}):_(`modelSettings.defaultModel.notSelected`)}),(0,k.jsx)(D,{selectedModel:q,availableModels:G,handleModelSelect:re,handleMenuClick:()=>W(!0),handleMenuClose:()=>W(!1),menuOpen:U})]})]})]})]})]})]})};export{A as default};