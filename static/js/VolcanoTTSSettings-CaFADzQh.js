import{t as e}from"./InputAdornment-DO0tC8Wv.js";import{Ad as t,Cd as n,Du as r,Eu as i,Iu as a,Ot as o,Sd as s,Zu as c,_ as l,bd as u,ci as d,dd as f,fd as p,hu as m,ip as h,ju as g,np as _,nu as v,pp as y,qp as b,s as x,td as S,tu as C,xd as w,xp as T,xu as E,zp as D}from"./index-hvLbsAjx.js";import"./SolidBridge-4JuNrAWl.js";import{i as O,r as k,t as A}from"./tts-v2-DDBlG3xK.js";import{t as j}from"./FullScreenSelectorSolid-D7sSYiET.js";import{t as M}from"./TTSTestSection-BqHpnV2B.js";var N=b(D(),1),P=b(T(),1),F={通用场景:[`灿灿2.0`,`灿灿`,`炀炀`,`擎苍2.0`,`擎苍`,`通用女声2.0`,`通用女声`,`通用男声`,`超自然音色-梓梓2.0`,`超自然音色-梓梓`,`超自然音色-燃燃2.0`,`超自然音色-燃燃`],有声阅读:[`阳光青年`,`反卷青年`,`通用赘婿`,`古风少御`,`霸气青叔`,`质朴青年`,`温柔淑女`,`开朗青年`,`甜宠少御`,`儒雅青年`],智能助手:[`甜美小源`,`亲切女声`,`知性女声`,`诚诚`,`童童`,`亲切男声`],视频配音:[`译制片男声`,`懒小羊`,`清新文艺女声`,`鸡汤女声`,`智慧老者`,`慈爱姥姥`,`说唱小哥`,`活力解说男`,`影视解说小帅`,`解说小帅-多情感`,`影视解说小美`,`纨绔青年`,`直播一姐`,`沉稳解说男`,`潇洒青年`,`阳光男声`,`活泼女声`,`小萝莉`],特色音色:[`奶气萌娃`,`动漫海绵`,`动漫海星`,`动漫小新`,`天才童声`],广告配音:[`促销男声`,`促销女声`,`磁性男声`],新闻播报:[`新闻女声`,`新闻男声`],教育场景:[`知性姐姐-双语`,`温柔小哥`],"方言-东北":[`东北老铁`,`东北丫头`],"方言-西南":[`重庆小伙`,`四川甜妹儿`,`重庆幺妹儿`,`广西表哥`],"方言-粤语":[`港剧男神`,`广东女仔`],"方言-其他":[`西安佟掌柜`,`沪上阿姐`,`甜美台妹`,`台普男声`,`相声演员`,`乡村企业家`,`湖南妹坨`,`长沙靓女`,`方言灿灿`],美式英语:[`慵懒女声-Ava`,`议论女声-Alicia`,`情感女声-Lawrence`,`美式女声-Amelia`,`讲述女声-Amanda`,`活力女声-Ariana`,`活力男声-Jackson`,`天才少女`,`Stefan`,`天真萌娃-Lily`],英式英语:[`亲切女声-Anna`],澳洲英语:[`澳洲男声-Henry`],日语:[`元气少女`,`萌系少女`,`气质女声`,`日语男声`],葡萄牙语:[`活力男声-Carlos`,`活力女声-葡语`],西班牙语:[`气质御姐-西语`],"豆包-通用":`[豆包]Vivi.[豆包]灿灿.[豆包]爽快思思.[豆包]温暖阿虎.[豆包]少年梓辛.[豆包]邻家女孩.[豆包]渊博小叔.[豆包]阳光青年.[豆包]甜美小源.[豆包]清澈梓梓.[豆包]邻家男孩.[豆包]甜美悦悦.[豆包]心灵鸡汤.[豆包]解说小明.[豆包]开朗姐姐.[豆包]亲切女声.[豆包]温柔小雅.[豆包]快乐小东.[豆包]文静毛毛.[豆包]悠悠君子.[豆包]魅力苏菲.[豆包]阳光阿辰.[豆包]甜美桃子.[豆包]清新女声.[豆包]知性女声.[豆包]清爽男大.[豆包]温柔小哥`.split(`.`),"豆包-角色扮演":[`[豆包]傲娇霸总`,`[豆包]病娇姐姐`,`[豆包]妩媚御姐`,`[豆包]傲娇女友`,`[豆包]冷酷哥哥`,`[豆包]成熟姐姐`,`[豆包]贴心女友`,`[豆包]性感御姐`,`[豆包]病娇弟弟`,`[豆包]傲慢少爷`,`[豆包]腹黑公子`,`[豆包]暖心学姐`,`[豆包]可爱女生`,`[豆包]知性温婉`,`[豆包]暖心体贴`,`[豆包]开朗轻快`,`[豆包]活泼爽朗`,`[豆包]率真小伙`,`[豆包]温柔文雅`,`[豆包]温柔女神`,`[豆包]炀炀`],"豆包-视频配音":[`[豆包]擎苍`,`[豆包]霸气青叔`,`[豆包]温柔淑女`,`[豆包]儒雅青年`,`[豆包]悬疑解说`,`[豆包]古风少御`,`[豆包]活力小哥`,`[豆包]鸡汤妹妹`,`[豆包]贴心女声`,`[豆包]萌丫头`,`[豆包]磁性解说男声`,`[豆包]广告解说`,`[豆包]少儿故事`,`[豆包]天才童声`,`[豆包]俏皮女声`,`[豆包]懒音绵宝`,`[豆包]亮嗓萌仔`,`[豆包]暖阳女声`],"豆包-IP音色":[`[豆包]猴哥`,`[豆包]熊二`,`[豆包]佩奇猪`,`[豆包]樱桃丸子`,`[豆包]武则天`,`[豆包]顾姐`,`[豆包]四郎`,`[豆包]鲁班七号`],"豆包-多情感":[`[豆包]冷酷哥哥-多情感`,`[豆包]高冷御姐-多情感`,`[豆包]傲娇霸总-多情感`,`[豆包]邻居阿姨-多情感`,`[豆包]儒雅男友-多情感`,`[豆包]俊朗男友-多情感`,`[豆包]柔美女友-多情感`,`[豆包]阳光青年-多情感`,`[豆包]爽快思思-多情感`,`[豆包]深夜播客`],"豆包-英文":[`[豆包]Lauren`,`[豆包]Amanda`,`[豆包]Adam`,`[豆包]Jackson`,`[豆包]Emily`,`[豆包]Smith`,`[豆包]Anna`,`[豆包]Sarah`,`[豆包]Dryw`,`[豆包]Nara`,`[豆包]Bruce`,`[豆包]Michael`,`[豆包]Daisy`,`[豆包]Luna`,`[豆包]Owen`,`[豆包]Lucas`,`[豆包]Candice-多情感`,`[豆包]Serena-多情感`,`[豆包]Glen-多情感`,`[豆包]Sylus-多情感`],"豆包-客服":[`[豆包]理性圆子`,`[豆包]清甜桃桃`,`[豆包]清晰小雪`,`[豆包]开朗婷婷`,`[豆包]温婉珊珊`,`[豆包]甜美小雨`,`[豆包]灵动欣欣`,`[豆包]乖巧可儿`,`[豆包]阳光洋洋`]},I=()=>{let b=y(),{t:T}=d(),D=(0,N.useMemo)(()=>A.getInstance(),[]),I=(0,N.useRef)(null),[L,R]=(0,N.useState)({appId:``,accessToken:``,showAppId:!1,showAccessToken:!1,voiceType:`BV001_streaming`,voiceName:`通用女声`,emotion:``,speed:1,volume:1,pitch:1,encoding:`mp3`}),[z,B]=(0,N.useState)({saveError:``,isTestPlaying:!1}),[V,H]=(0,N.useState)(``),[U,W]=(0,N.useState)(!0),[G,K]=(0,N.useState)(!1),[q,J]=(0,N.useState)(!1),[Y,X]=(0,N.useState)(!1),Z=(0,N.useMemo)(()=>Object.entries(F).map(([e,t])=>({name:e,items:t.map(e=>({key:e,label:e,subLabel:O[e]}))})),[]),Q=(0,N.useMemo)(()=>{let e=[`happy`,`sad`,`angry`,`scare`,`fear`,`hate`,`surprise`,`tear`,`novel_dialog`,`excited`,`coldness`,`neutral`,`depressed`],t=[`pleased`,`sorry`,`annoyed`,`shy`,`tender`],n=[`customer_service`,`professional`,`serious`,`assistant`,`advertising`,`news`,`entertainment`],r=[`narrator`,`narrator_immersive`,`storytelling`,`radio`,`chat`],i=[`comfort`,`lovey-dovey`,`energetic`,`conniving`,`tsundere`,`charming`,`yoga`,`tension`,`magnetic`,`vocal-fry`,`asmr`,`dialect`],a=[`warm`,`affectionate`,`authoritative`],o=e=>e.filter(e=>e in k).map(e=>({key:e,label:k[e],subLabel:e}));return[{name:`基础情感`,items:o(e)},{name:`交流情感`,items:o(t)},{name:`专业风格`,items:o(n)},{name:`叙述风格`,items:o(r)},{name:`特色风格`,items:o(i)},{name:`英文专用`,items:o(a)}]},[]);(0,N.useEffect)(()=>{(async()=>{try{let e=await _(`volcano_app_id`)||``,t=await _(`volcano_access_token`)||``,n=await _(`volcano_voice_type`)||`BV001_streaming`,r=await _(`volcano_voice_name`)||`通用女声`,i=await _(`volcano_emotion`)||``,a=parseFloat(await _(`volcano_speed`)||`1.0`),o=parseFloat(await _(`volcano_volume`)||`1.0`),s=parseFloat(await _(`volcano_pitch`)||`1.0`),c=await _(`volcano_encoding`)||`mp3`,l=await _(`enable_tts`)!==`false`,u=await _(`selected_tts_service`)||`siliconflow`;R({appId:e,accessToken:t,showAppId:!1,showAccessToken:!1,voiceType:n,voiceName:r,emotion:i,speed:a,volume:o,pitch:s,encoding:c}),W(l),K(u===`volcano`),D.configureEngine(`volcano`,{enabled:!0,appId:e,accessToken:t,voiceType:n,emotion:i,speed:a,volume:o,pitch:s,encoding:c}),H(T(`settings.voice.volcano.testText`))}catch(e){console.error(T(`settings.voice.common.loadingError`,{service:`Volcano TTS`}),e)}})()},[D,T]);let $=(0,N.useCallback)(async()=>{try{return G&&!L.appId.trim()?(B(e=>({...e,saveError:T(`settings.voice.volcano.appIdRequired`)})),!1):G&&!L.accessToken.trim()?(B(e=>({...e,saveError:T(`settings.voice.volcano.accessTokenRequired`)})),!1):(await h(`volcano_app_id`,L.appId),await h(`volcano_access_token`,L.accessToken),await h(`volcano_voice_type`,L.voiceType),await h(`volcano_voice_name`,L.voiceName),await h(`volcano_emotion`,L.emotion),await h(`volcano_speed`,L.speed.toString()),await h(`volcano_volume`,L.volume.toString()),await h(`volcano_pitch`,L.pitch.toString()),await h(`volcano_encoding`,L.encoding),await h(`enable_tts`,U.toString()),G?(await h(`selected_tts_service`,`volcano`),D.setActiveEngine(`volcano`)):D.configureEngine(`volcano`,{enabled:!1}),B(e=>({...e,saveError:``})),!0)}catch(e){return console.error(T(`settings.voice.common.saveErrorText`,{service:`Volcano TTS`}),e),B(e=>({...e,saveError:T(`settings.voice.common.saveError`)})),!1}},[L,U,G,D,T]),ee=(0,N.useCallback)(async()=>{await $()&&setTimeout(()=>b(`/settings/voice`),0)},[$,b]),te=(0,N.useCallback)(e=>{K(e)},[]),ne=(0,N.useCallback)(async()=>{if(z.isTestPlaying){D.stop(),I.current&&clearInterval(I.current),B(e=>({...e,isTestPlaying:!1}));return}if(!L.appId||!L.accessToken){B(e=>({...e,saveError:T(`settings.voice.volcano.appIdRequired`)}));return}if(B(e=>({...e,isTestPlaying:!0})),D.configureEngine(`volcano`,{enabled:!0,appId:L.appId,accessToken:L.accessToken,voiceType:L.voiceType,emotion:L.emotion,speed:L.speed,volume:L.volume,pitch:L.pitch,encoding:L.encoding}),D.setActiveEngine(`volcano`),!await D.speak(V)){B(e=>({...e,isTestPlaying:!1}));return}I.current=setInterval(()=>{D.isPlaying||(B(e=>({...e,isTestPlaying:!1})),I.current&&clearInterval(I.current))},100)},[L,V,D,z.isTestPlaying,T]),re=()=>b(`/settings/voice`);(0,N.useEffect)(()=>()=>{I.current&&clearInterval(I.current),z.isTestPlaying&&D.stop()},[z.isTestPlaying,D]);let ie=o(`toolbar-bg`),ae=o(`toolbar-border`),oe=o(`toolbar-shadow`),se=o(`text-primary`),ce=o(`border-default`),le=o(`border-subtle`),ue=o(`hover-bg`),de=o(`bg-paper`),fe=o(`bg-default`),pe=o(`primary`);return(0,P.jsxs)(l,{sx:{width:`100vw`,overflow:`hidden`,backgroundColor:fe},children:[(0,P.jsx)(u,{position:`static`,elevation:0,sx:{backgroundColor:ie,color:se,borderBottom:`1px solid ${ae}`,boxShadow:`0 18px 40px -24px ${oe}`,backdropFilter:`blur(18px)`,WebkitBackdropFilter:`blur(18px)`},children:(0,P.jsxs)(r,{sx:{minHeight:{xs:56,sm:64},px:{xs:1.5,sm:2.5,md:4},gap:{xs:1,sm:1.5}},children:[(0,P.jsx)(n,{edge:`start`,onClick:re,"aria-label":T(`settings.voice.back`),size:`large`,sx:{color:pe,mr:{xs:1,sm:2},borderRadius:2,border:`1px solid ${le}`,"&:hover":{backgroundColor:ue,transform:`translateY(-1px)`}},children:(0,P.jsx)(E,{size:20})}),(0,P.jsx)(w,{variant:`h6`,sx:{flexGrow:1,fontWeight:700,letterSpacing:`0.03em`,textTransform:`uppercase`},children:T(`settings.voice.volcano.title`)}),(0,P.jsx)(f,{onClick:ee,variant:`contained`,sx:{borderRadius:2,px:{xs:2.5,sm:3},py:{xs:.9,sm:1},fontWeight:700},children:T(`settings.voice.common.save`)})]})}),(0,P.jsx)(p,{sx:{flex:1,overflow:`auto`,pt:2,pb:`var(--content-bottom-padding)`,px:{xs:1.5,sm:2.5,md:4}},children:(0,P.jsxs)(p,{sx:{maxWidth:960,mx:`auto`,width:`100%`},children:[z.saveError&&(0,P.jsx)(s,{severity:`error`,sx:{mb:{xs:1.5,sm:2},borderRadius:{xs:1,sm:2}},children:z.saveError}),(0,P.jsxs)(t,{elevation:0,sx:{p:{xs:2.5,sm:3},mb:{xs:2,sm:3},borderRadius:{xs:2,sm:2.5},border:`1px solid ${ce}`,bgcolor:de},children:[(0,P.jsx)(w,{variant:`h6`,sx:{mb:3,fontWeight:600},children:T(`settings.voice.common.apiConfig`)}),(0,P.jsxs)(p,{sx:{mb:3},children:[(0,P.jsx)(c,{control:(0,P.jsx)(x,{checked:G,onChange:e=>te(e.target.checked)}),label:T(`settings.voice.common.enableService`,{name:T(`settings.voice.services.volcano.name`)})}),(0,P.jsx)(w,{variant:`body2`,color:`text.secondary`,sx:{mt:1,ml:4},children:T(`settings.voice.volcano.enableDesc`)})]}),(0,P.jsx)(S,{sx:{mb:3}}),(0,P.jsx)(i,{fullWidth:!0,label:T(`settings.voice.tabSettings.volcano.appId`),placeholder:T(`settings.voice.tabSettings.volcano.appIdPlaceholder`),value:L.appId,onChange:e=>R(t=>({...t,appId:e.target.value})),type:L.showAppId?`text`:`password`,sx:{mb:2},helperText:T(`settings.voice.tabSettings.volcano.appIdHelper`),InputProps:{endAdornment:(0,P.jsx)(e,{position:`end`,children:(0,P.jsx)(n,{onClick:()=>R(e=>({...e,showAppId:!e.showAppId})),children:L.showAppId?(0,P.jsx)(v,{size:18}):(0,P.jsx)(C,{size:18})})})}}),(0,P.jsx)(i,{fullWidth:!0,label:T(`settings.voice.tabSettings.volcano.accessToken`),placeholder:T(`settings.voice.tabSettings.volcano.accessTokenPlaceholder`),value:L.accessToken,onChange:e=>R(t=>({...t,accessToken:e.target.value})),type:L.showAccessToken?`text`:`password`,sx:{mb:3},helperText:T(`settings.voice.tabSettings.volcano.accessTokenHelper`),InputProps:{endAdornment:(0,P.jsx)(e,{position:`end`,children:(0,P.jsx)(n,{onClick:()=>R(e=>({...e,showAccessToken:!e.showAccessToken})),children:L.showAccessToken?(0,P.jsx)(v,{size:18}):(0,P.jsx)(C,{size:18})})})}}),(0,P.jsx)(S,{sx:{mb:3}}),(0,P.jsx)(i,{fullWidth:!0,label:T(`settings.voice.tabSettings.volcano.voice`),value:L.voiceName,onClick:()=>J(!0),sx:{mb:2,cursor:`pointer`},helperText:T(`settings.voice.tabSettings.volcano.voiceHelper`),InputProps:{readOnly:!0,endAdornment:(0,P.jsx)(e,{position:`end`,children:(0,P.jsx)(m,{size:18})}),sx:{cursor:`pointer`}}}),(0,P.jsx)(i,{fullWidth:!0,label:T(`settings.voice.tabSettings.volcano.emotion`),value:L.emotion?`${k[L.emotion]} (${L.emotion})`:T(`settings.voice.tabSettings.volcano.emotionNone`),onClick:()=>X(!0),sx:{mb:2,cursor:`pointer`},helperText:T(`settings.voice.tabSettings.volcano.emotionHelper`),InputProps:{readOnly:!0,endAdornment:(0,P.jsx)(e,{position:`end`,children:(0,P.jsx)(m,{size:18})}),sx:{cursor:`pointer`}}}),(0,P.jsxs)(i,{fullWidth:!0,select:!0,label:T(`settings.voice.tabSettings.volcano.encoding`),value:L.encoding,onChange:e=>R(t=>({...t,encoding:e.target.value})),sx:{mb:3},helperText:T(`settings.voice.tabSettings.volcano.encodingHelper`),children:[(0,P.jsx)(a,{value:`mp3`,children:`MP3`}),(0,P.jsx)(a,{value:`ogg_opus`,children:`OGG Opus`}),(0,P.jsx)(a,{value:`wav`,children:`WAV`}),(0,P.jsx)(a,{value:`pcm`,children:`PCM`})]}),(0,P.jsxs)(p,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,P.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,P.jsx)(w,{variant:`body2`,color:`text.secondary`,sx:{minWidth:40},children:`语速`}),(0,P.jsx)(g,{value:L.speed,onChange:(e,t)=>R(e=>({...e,speed:t})),min:.5,max:2,step:.1,size:`small`,sx:{flex:1}}),(0,P.jsx)(w,{variant:`body2`,sx:{minWidth:32,fontWeight:600,color:`primary.main`},children:L.speed.toFixed(1)})]}),(0,P.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,P.jsx)(w,{variant:`body2`,color:`text.secondary`,sx:{minWidth:40},children:`音量`}),(0,P.jsx)(g,{value:L.volume,onChange:(e,t)=>R(e=>({...e,volume:t})),min:.5,max:2,step:.1,size:`small`,sx:{flex:1}}),(0,P.jsx)(w,{variant:`body2`,sx:{minWidth:32,fontWeight:600,color:`primary.main`},children:L.volume.toFixed(1)})]}),(0,P.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,P.jsx)(w,{variant:`body2`,color:`text.secondary`,sx:{minWidth:40},children:`音调`}),(0,P.jsx)(g,{value:L.pitch,onChange:(e,t)=>R(e=>({...e,pitch:t})),min:.5,max:2,step:.1,size:`small`,sx:{flex:1}}),(0,P.jsx)(w,{variant:`body2`,sx:{minWidth:32,fontWeight:600,color:`primary.main`},children:L.pitch.toFixed(1)})]})]})]}),(0,P.jsx)(M,{testText:V,setTestText:H,handleTestTTS:ne,isTestPlaying:z.isTestPlaying,enableTTS:U,selectedTTSService:`volcano`,openaiApiKey:``,azureApiKey:``,siliconFlowApiKey:``})]})}),(0,P.jsx)(j,{open:q,onClose:()=>J(!1),title:`选择音色`,groups:Z,selectedKey:L.voiceName,onSelect:e=>{let t=O[e];R(n=>({...n,voiceName:e,voiceType:t||n.voiceType,emotion:``}))}}),(0,P.jsx)(j,{open:Y,onClose:()=>X(!1),title:`选择情感风格`,groups:Q,selectedKey:L.emotion,onSelect:e=>{R(t=>({...t,emotion:e}))},allowEmpty:!0,emptyLabel:T(`settings.voice.tabSettings.volcano.emotionNone`)})]})};export{I as default};