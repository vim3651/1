import{t as e}from"./ListSubheader-K3IOJnRV.js";import{t}from"./ListItemAvatar-vt2ONwqY.js";import{t as n}from"./list-xtcNycqC.js";import{t as r}from"./plus-DCrdXXDc.js";import{$t as i,Ad as a,Al as o,Cd as s,Du as ee,Eu as te,Gi as c,Iu as ne,Jr as re,Ju as ie,Nu as ae,Pr as oe,Qt as se,Qu as ce,Rl as le,Ud as ue,Uu as l,Vu as u,Wu as d,Zl as de,_ as fe,ad as f,bd as p,bu as pe,cd as me,ci as he,dd as m,dr as ge,fd as h,fr as _e,hu as g,i as ve,id as _,jl as ye,md as v,nd as y,pp as be,qd as b,qp as x,td as S,wl as xe,xd as C,xp as w,xu as Se,zp as T,zu as E}from"./index-hvLbsAjx.js";import{n as D}from"./providerIcons-C3i_yWyD.js";import{n as O,r as k,t as A}from"./dnd.esm-HaYYtn2O.js";var j=x(T(),1);function Ce(e,t,n){let r=Array.from(e),[i]=r.splice(t,1);return r.splice(n,0,i),r}var M=x(w(),1),N=()=>{let{t:x}=he(),w=be(),T=se(),N=ue(),P=i(e=>e.settings.providers),F=i(e=>e.settings.modelSelectorStyle),[we,I]=(0,j.useState)(!1),Te=N.palette.mode===`dark`,{containerRef:Ee,handleScroll:De}=ve(`settings-default-model-list`,{autoRestore:!0,restoreDelay:0}),[Oe,L]=(0,j.useState)(!1),[R,z]=(0,j.useState)(null),[B,V]=(0,j.useState)(``),[H,U]=(0,j.useState)(``),[W,G]=(0,j.useState)(!1),[K,q]=(0,j.useState)(new Set),[ke,J]=(0,j.useState)(!1),Ae=()=>{w(`/settings`)},je=()=>{w(`/settings/add-provider`)},Y=e=>{we||w(`/settings/model-provider/${e}`)},Me=()=>{T(oe(F===`dialog`?`dropdown`:`dialog`))},Ne=e=>{if(I(!1),!e.destination)return;let t=e.source.index,n=e.destination.index;t!==n&&T(_e(Ce(P,t,n)))},Pe=()=>{I(!0)},Fe=(e,t)=>{t.stopPropagation(),z(e),V(e.name),U(e.providerType||``),L(!0)},Ie=()=>{R&&B.trim()&&(T(re({id:R.id,updates:{name:B.trim(),providerType:H}})),X())},X=()=>{L(!1),z(null),V(``),U(``)},Z=()=>{G(!W),q(new Set)},Q=e=>{let t=new Set(K);t.has(e)?t.delete(e):t.add(e),q(t)},Le=()=>{K.size===P.length?q(new Set):q(new Set(P.map(e=>e.id)))},Re=()=>{J(!0)},ze=()=>{K.forEach(e=>{T(ge(e))}),q(new Set),G(!1),J(!1)},$=()=>{J(!1)},Be=[{value:`openai`,label:`OpenAI`},{value:`openai-response`,label:`OpenAI (Responses API)`},{value:`anthropic`,label:`Anthropic`},{value:`deepseek`,label:`DeepSeek`},{value:`zhipu`,label:`智谱AI`},{value:`google`,label:`Google`},{value:`azure-openai`,label:`Azure OpenAI`},{value:`siliconflow`,label:`SiliconFlow`},{value:`volcengine`,label:`火山引擎`},{value:`grok`,label:`Grok`},{value:`custom`,label:`自定义`}];return(0,M.jsxs)(fe,{children:[(0,M.jsx)(p,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,M.jsxs)(ee,{children:[(0,M.jsx)(s,{edge:`start`,color:`inherit`,onClick:Ae,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,M.jsx)(Se,{})}),(0,M.jsx)(C,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:x(`modelSettings.modelList.title`)}),W?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m,{startIcon:(0,M.jsx)(xe,{}),onClick:Z,sx:{mr:1,bgcolor:e=>b(e.palette.grey[500],.1),color:`text.secondary`,"&:hover":{bgcolor:e=>b(e.palette.grey[500],.2)},borderRadius:2},children:x(`modelSettings.modelList.cancel`)}),(0,M.jsx)(m,{startIcon:(0,M.jsx)(o,{}),onClick:Re,disabled:K.size===0,sx:{bgcolor:e=>b(e.palette.error.main,.1),color:`error.main`,"&:hover":{bgcolor:e=>b(e.palette.error.main,.2)},"&:disabled":{bgcolor:e=>b(e.palette.grey[500],.05),color:`text.disabled`},borderRadius:2},children:x(`modelSettings.modelList.deleteCount`,{count:K.size})})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m,{startIcon:(0,M.jsx)(o,{}),onClick:Z,sx:{mr:1,bgcolor:e=>b(e.palette.error.main,.1),color:`error.main`,"&:hover":{bgcolor:e=>b(e.palette.error.main,.2)},borderRadius:2},children:x(`modelSettings.modelList.batchDelete`)}),(0,M.jsx)(m,{startIcon:(0,M.jsx)(r,{}),onClick:je,sx:{bgcolor:e=>b(e.palette.primary.main,.1),color:`primary.main`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.2)},borderRadius:2},children:x(`modelSettings.modelList.add`)})]})]})}),(0,M.jsxs)(h,{ref:Ee,onScroll:De,sx:{flexGrow:1,overflowY:`auto`,p:2,pb:`var(--content-bottom-padding)`,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,M.jsxs)(a,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,M.jsxs)(h,{sx:{p:2,bgcolor:`rgba(0,0,0,0.01)`,display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,M.jsxs)(h,{children:[(0,M.jsx)(C,{variant:`subtitle1`,sx:{fontWeight:600},children:x(`modelSettings.modelList.providers`)}),(0,M.jsx)(C,{variant:`body2`,color:`text.secondary`,children:x(W?`modelSettings.modelList.selectToDelete`:`modelSettings.modelList.providersDesc`)})]}),W&&(0,M.jsx)(m,{size:`small`,onClick:Le,sx:{color:`primary.main`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.1)}},children:K.size===P.length?x(`modelSettings.modelList.unselectAll`):x(`modelSettings.modelList.selectAll`)})]}),(0,M.jsx)(S,{}),(0,M.jsx)(O,{onDragStart:Pe,onDragEnd:Ne,children:(0,M.jsx)(A,{droppableId:`providers-list`,isDropDisabled:W,children:e=>(0,M.jsxs)(d,{disablePadding:!0,ref:e.innerRef,...e.droppableProps,children:[P.map((e,n)=>(0,M.jsx)(k,{draggableId:e.id,index:n,isDragDisabled:W,children:(n,r)=>(0,M.jsxs)(l,{ref:n.innerRef,...n.draggableProps,onClick:()=>W?Q(e.id):Y(e.id),sx:{transition:`all 0.2s`,transform:r.isDragging?`rotate(5deg)`:`none`,boxShadow:r.isDragging?`0 8px 24px rgba(0,0,0,0.15)`:`none`,bgcolor:r.isDragging?`background.paper`:K.has(e.id)?e=>b(e.palette.primary.main,.08):`transparent`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.05)},...n.draggableProps.style},children:[W?(0,M.jsx)(me,{checked:K.has(e.id),onChange:()=>Q(e.id),onClick:e=>e.stopPropagation(),sx:{mr:1}}):(0,M.jsx)(h,{...n.dragHandleProps,sx:{display:`flex`,alignItems:`center`,mr:1,cursor:`grab`,"&:active":{cursor:`grabbing`},opacity:.6,"&:hover":{opacity:1}},children:(0,M.jsx)(de,{fontSize:`small`})}),(0,M.jsx)(t,{children:(0,M.jsx)(v,{src:D(e.providerType||e.id,Te),alt:e.name,sx:{bgcolor:`transparent`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:e.name.charAt(0).toUpperCase()})}),(0,M.jsx)(E,{primary:(0,M.jsx)(C,{sx:{fontWeight:600,color:`text.primary`},children:e.name}),secondary:(0,M.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`},children:[(0,M.jsx)(C,{component:`span`,variant:`body2`,sx:{mr:1,color:e.isEnabled?`success.main`:`text.disabled`,fontWeight:500},children:e.isEnabled?x(`modelSettings.modelList.enabled`):x(`modelSettings.modelList.disabled`)}),e.models.length>0&&(0,M.jsx)(C,{component:`span`,variant:`body2`,color:`text.secondary`,children:x(`modelSettings.modelList.modelCount`,{count:e.models.length})})]})}),!W&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(s,{size:`small`,onClick:t=>Fe(e,t),sx:{mr:1,color:`text.secondary`,"&:hover":{color:`primary.main`,bgcolor:e=>b(e.palette.primary.main,.1)}},children:(0,M.jsx)(le,{size:16})}),(0,M.jsx)(g,{size:20,style:{color:`rgba(79, 70, 229, 0.5)`}})]})]})},e.id)),e.placeholder]})})})]}),(0,M.jsx)(a,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:(0,M.jsxs)(d,{subheader:(0,M.jsx)(e,{component:`div`,sx:{bgcolor:`rgba(0,0,0,0.01)`,py:1,fontWeight:600,color:`text.primary`},children:x(`modelSettings.modelList.recommendedActions`)}),children:[(0,M.jsx)(u,{disablePadding:!0,children:(0,M.jsxs)(l,{onClick:()=>w(`/settings/assistant-model`),sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.05)}},children:[(0,M.jsx)(t,{children:(0,M.jsx)(v,{sx:{bgcolor:b(`#4f46e5`,.12),color:`#4f46e5`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,M.jsx)(pe,{})})}),(0,M.jsx)(E,{primary:(0,M.jsx)(C,{sx:{fontWeight:600,color:`text.primary`},children:x(`modelSettings.modelList.topicNamingSettings`)}),secondary:x(`modelSettings.modelList.topicNamingSettingsDesc`),primaryTypographyProps:{component:`div`}}),(0,M.jsx)(g,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})}),(0,M.jsx)(S,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,M.jsx)(u,{disablePadding:!0,children:(0,M.jsxs)(l,{onClick:Me,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.05)}},children:[(0,M.jsx)(t,{children:(0,M.jsx)(v,{sx:{bgcolor:b(`#06b6d4`,.12),color:`#06b6d4`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:F===`dialog`?(0,M.jsx)(n,{}):(0,M.jsx)(ye,{})})}),(0,M.jsx)(E,{primary:(0,M.jsx)(C,{sx:{fontWeight:600,color:`text.primary`},children:x(`modelSettings.modelList.modelSelectorStyle`)}),secondary:x(F===`dialog`?`modelSettings.modelList.modelSelectorDialog`:`modelSettings.modelList.modelSelectorDropdown`),primaryTypographyProps:{component:`div`}})]})}),(0,M.jsx)(S,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,M.jsx)(u,{disablePadding:!0,children:(0,M.jsxs)(l,{onClick:()=>w(`/settings/add-provider`),sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.05)}},children:[(0,M.jsx)(t,{children:(0,M.jsx)(v,{sx:{bgcolor:b(`#9333ea`,.12),color:`#9333ea`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,M.jsx)(r,{})})}),(0,M.jsx)(E,{primary:(0,M.jsx)(C,{sx:{fontWeight:600,color:`text.primary`},children:x(`modelSettings.modelList.addProvider`)}),secondary:x(`modelSettings.modelList.addProviderDesc`),primaryTypographyProps:{component:`div`}}),(0,M.jsx)(g,{size:20,style:{color:`var(--mui-palette-text-secondary)`}})]})})]})})]}),(0,M.jsxs)(c,{open:Oe,onClose:X,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,M.jsx)(y,{sx:{fontWeight:600},children:x(`modelSettings.modelList.editProvider`)}),(0,M.jsxs)(_,{sx:{pt:2},children:[(0,M.jsx)(te,{autoFocus:!0,margin:`dense`,label:x(`modelSettings.modelList.providerName`),placeholder:x(`modelSettings.modelList.providerNamePlaceholder`),type:`text`,fullWidth:!0,variant:`outlined`,value:B,onChange:e=>V(e.target.value),sx:{mb:2}}),(0,M.jsxs)(ce,{fullWidth:!0,variant:`outlined`,children:[(0,M.jsx)(ie,{children:x(`modelSettings.modelList.providerType`)}),(0,M.jsx)(ae,{value:H,onChange:e=>U(e.target.value),label:x(`modelSettings.modelList.providerType`),children:Be.map(e=>(0,M.jsx)(ne,{value:e.value,children:e.label},e.value))})]})]}),(0,M.jsxs)(f,{sx:{p:2},children:[(0,M.jsx)(m,{onClick:X,children:x(`common.cancel`)}),(0,M.jsx)(m,{onClick:Ie,disabled:!B.trim(),sx:{bgcolor:e=>b(e.palette.primary.main,.1),color:`primary.main`,"&:hover":{bgcolor:e=>b(e.palette.primary.main,.2)},borderRadius:2},children:x(`common.save`)})]})]}),(0,M.jsxs)(c,{open:ke,onClose:$,maxWidth:`sm`,fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,M.jsx)(y,{sx:{fontWeight:600,color:`error.main`},children:x(`modelSettings.modelList.confirmDelete`)}),(0,M.jsxs)(_,{children:[(0,M.jsx)(C,{variant:`body1`,sx:{mb:2},dangerouslySetInnerHTML:{__html:x(`modelSettings.modelList.deleteConfirmMessage`,{count:K.size})}}),(0,M.jsx)(C,{variant:`body2`,color:`text.secondary`,children:x(`modelSettings.modelList.deleteConfirmWarning`)})]}),(0,M.jsxs)(f,{sx:{p:2},children:[(0,M.jsx)(m,{onClick:$,children:x(`common.cancel`)}),(0,M.jsx)(m,{onClick:ze,sx:{bgcolor:e=>b(e.palette.error.main,.1),color:`error.main`,"&:hover":{bgcolor:e=>b(e.palette.error.main,.2)},borderRadius:2},children:x(`modelSettings.modelList.confirmDeleteButton`)})]})]})]})};export{N as default};