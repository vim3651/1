import{i as e,n as t,o as n,t as r}from"./input-DwqXXvL8.js";import{t as i}from"./arrow-left-right-Czyvlhqu.js";import{t as a}from"./book-open-Cg499jJK.js";import{t as o}from"./camera-DPY5JI0W.js";import"./ImageUploadService-Kd9CWXwm.js";import{t as s}from"./file-text-BSjgZddV.js";import{t as c}from"./image-7oImefSY.js";import"./VoiceRecognition-BD7QZRqp.js";import{t as l}from"./mic-DOR2hOIQ.js";import{t as u}from"./plus-DCrdXXDc.js";import{t as d}from"./search-DqeTnaF8.js";import{t as f}from"./send-BodRSmN3.js";import{t as p}from"./video-D7kdqg3e.js";import{$t as m,Ad as h,Al as g,Bu as _,Cd as v,Cu as y,Du as b,Iu as x,Ju as S,Nu as C,Qt as w,Qu as T,Tl as E,Ud as D,Vu as O,Wu as k,Yr as A,Zl as j,_ as M,bd as N,ci as P,fd as F,nu as I,pp as L,qp as R,td as z,tu as B,xd as V,xp as H,xu as U,zp as W,zu as G}from"./index-hvLbsAjx.js";import"./esm-DlPY44W4.js";import"./esm-C7HltxvG.js";import{t as K}from"./CustomIcon-BKBQb-ts.js";import"./icons-Dqirgq6F.js";import"./QuickPhraseService-Vk3lcb6h.js";import"./SolidBridge-4JuNrAWl.js";import"./SimpleNoteService-DYyyUaKJ.js";import"./useVoiceRecognition-BsXW9Pyd.js";import"./useNotesSearch-D4OlEKjP.js";import{n as q,r as J,t as Y}from"./dnd.esm-HaYYtn2O.js";var X=R(W(),1),Z=R(H(),1),Q=({availableButtons:e,leftButtons:t,rightButtons:n,onUpdateLayout:r})=>{let{t:i}=P(),a=y(D().breakpoints.down(`md`)),[o,s]=(0,X.useState)(!1);(0,X.useEffect)(()=>{s(`ontouchstart`in window||navigator.maxTouchPoints>0)},[]);let c=X.useMemo(()=>{let t=new Map;return e.forEach(e=>{t.set(e.id,e)}),t},[e]),l=e.filter(e=>!t.includes(e.id)&&!n.includes(e.id)),u=(0,X.useCallback)(e=>{let i=t.includes(e),a=n.includes(e);i||a?r(t.filter(t=>t!==e),n.filter(t=>t!==e)):r([...t,e],n)},[t,n,r]),d=(0,X.useCallback)(e=>{if(!e.destination)return;let{source:i,destination:a,draggableId:o}=e;if(i.droppableId===a.droppableId){if(i.droppableId===`left-buttons`){let e=Array.from(t);e.splice(i.index,1),e.splice(a.index,0,o),r(e,n)}else if(i.droppableId===`right-buttons`){let e=Array.from(n);e.splice(i.index,1),e.splice(a.index,0,o),r(t,e)}}else if(i.droppableId===`left-buttons`&&a.droppableId===`right-buttons`){let e=t.filter(e=>e!==o),i=Array.from(n);i.splice(a.index,0,o),r(e,i)}else if(i.droppableId===`right-buttons`&&a.droppableId===`left-buttons`){let e=n.filter(e=>e!==o),i=Array.from(t);i.splice(a.index,0,o),r(i,e)}else if(i.droppableId===`unused-buttons`){if(a.droppableId===`left-buttons`){let e=Array.from(t);e.splice(a.index,0,o),r(e,n)}else if(a.droppableId===`right-buttons`){let e=Array.from(n);e.splice(a.index,0,o),r(t,e)}}else a.droppableId===`unused-buttons`&&(i.droppableId===`left-buttons`?r(t.filter(e=>e!==o),n):i.droppableId===`right-buttons`&&r(t,n.filter(e=>e!==o)))},[t,n,r]),f=(e,t,n)=>{let r=e.icon;return(0,Z.jsx)(J,{draggableId:e.id,index:t,children:(t,i)=>(0,Z.jsxs)(O,{ref:t.innerRef,...t.draggableProps,sx:{mb:.75,py:.5,px:1.5,bgcolor:i.isDragging?`primary.light`:`background.paper`,borderRadius:1,borderWidth:`1px`,borderStyle:i.isDragging||n?`solid`:`dashed`,borderColor:i.isDragging?`primary.main`:n?`divider`:`text.disabled`,transform:i.isDragging?`rotate(2deg)`:`none`,transition:`all 0.2s ease`,filter:n?`none`:`grayscale(100%)`,opacity:1,cursor:`grab`,"&:active":{cursor:`grabbing`},"&:hover":{borderColor:`primary.main`,borderStyle:`solid`,boxShadow:`0 2px 8px rgba(0,0,0,0.1)`},...o&&{userSelect:`none`,WebkitUserSelect:`none`,MozUserSelect:`none`}},children:[(0,Z.jsx)(_,{...t.dragHandleProps,sx:{minWidth:36,cursor:`grab`,"&:active":{cursor:`grabbing`},...o&&{WebkitTapHighlightColor:`transparent`}},children:(0,Z.jsx)(j,{size:16,color:`rgba(0,0,0,0.4)`,style:{...o&&{WebkitUserSelect:`none`,userSelect:`none`}}})}),(0,Z.jsx)(_,{sx:{minWidth:36},children:(0,Z.jsx)(r,{size:18,color:e.color})}),(0,Z.jsx)(G,{primary:(0,Z.jsx)(V,{variant:`body2`,sx:{fontWeight:600,fontSize:`0.9rem`},children:e.label}),secondary:e.description,secondaryTypographyProps:{variant:`caption`,sx:{lineHeight:1.3,display:`block`,mt:.25,fontSize:`0.75rem`}},sx:{flex:1,my:0}}),(0,Z.jsx)(v,{edge:`end`,onClick:t=>{t.stopPropagation(),t.preventDefault(),u(e.id)},onMouseDown:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()},sx:{color:n?`primary.main`:`text.disabled`,ml:1,position:`relative`,zIndex:10,pointerEvents:`auto`,"&:hover":{bgcolor:n?`primary.light`:`action.hover`}},children:n?(0,Z.jsx)(B,{size:18}):(0,Z.jsx)(I,{size:18})})]})},e.id)};return(0,Z.jsxs)(q,{onDragEnd:d,children:[(0,Z.jsxs)(F,{sx:{display:`flex`,gap:1.5,flexDirection:{xs:`column`,md:`row`},padding:0},children:[(0,Z.jsxs)(F,{sx:{flex:1,minWidth:a?`100%`:`300px`,maxWidth:a?`100%`:`50%`},children:[(0,Z.jsxs)(V,{variant:`subtitle1`,sx:{mb:.5,fontWeight:600,fontSize:`0.9rem`},children:[i(`settings.appearance.inputBox.draggableButtonConfig.leftButtons`),(0,Z.jsxs)(V,{variant:`caption`,color:`text.secondary`,sx:{ml:1},children:[`(`,t.length,i(`settings.appearance.inputBox.draggableButtonConfig.count`),`)`]})]}),(0,Z.jsx)(h,{sx:{p:.75,minHeight:150,backgroundColor:`rgba(25, 118, 210, 0.02)`,border:`1px dashed #90caf9`},children:(0,Z.jsx)(Y,{droppableId:`left-buttons`,children:e=>(0,Z.jsxs)(k,{ref:e.innerRef,...e.droppableProps,sx:{minHeight:120,padding:0},children:[t.map((e,t)=>{let n=c.get(e);return n?f(n,t,!0):null}),e.placeholder,t.length===0&&(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{textAlign:`center`,py:3,fontStyle:`italic`,fontSize:`0.8rem`},children:i(`settings.appearance.inputBox.draggableButtonConfig.dragHere`)})]})})})]}),(0,Z.jsxs)(F,{sx:{flex:1,minWidth:a?`100%`:`300px`,maxWidth:a?`100%`:`50%`},children:[(0,Z.jsxs)(V,{variant:`subtitle1`,sx:{mb:.5,fontWeight:600,fontSize:`0.9rem`},children:[i(`settings.appearance.inputBox.draggableButtonConfig.rightButtons`),(0,Z.jsxs)(V,{variant:`caption`,color:`text.secondary`,sx:{ml:1},children:[`(`,n.length,i(`settings.appearance.inputBox.draggableButtonConfig.count`),`)`]})]}),(0,Z.jsx)(h,{sx:{p:.75,minHeight:150,backgroundColor:`rgba(76, 175, 80, 0.02)`,border:`1px dashed #a5d6a7`},children:(0,Z.jsx)(Y,{droppableId:`right-buttons`,children:e=>(0,Z.jsxs)(k,{ref:e.innerRef,...e.droppableProps,sx:{minHeight:120,padding:0},children:[n.map((e,t)=>{let n=c.get(e);return n?f(n,t,!0):null}),e.placeholder,n.length===0&&(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{textAlign:`center`,py:3,fontStyle:`italic`,fontSize:`0.8rem`},children:i(`settings.appearance.inputBox.draggableButtonConfig.dragHere`)})]})})})]})]}),(0,Z.jsxs)(F,{sx:{mt:1.5,padding:0},children:[(0,Z.jsxs)(V,{variant:`subtitle1`,sx:{mb:.5,fontWeight:600,fontSize:`0.9rem`},children:[i(`settings.appearance.inputBox.draggableButtonConfig.availableButtons`),` (`,l.length,i(`settings.appearance.inputBox.draggableButtonConfig.count`),`)`]}),(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{mb:.75,fontSize:`0.75rem`},children:i(`settings.appearance.inputBox.draggableButtonConfig.dragToUse`)}),(0,Z.jsx)(h,{sx:{p:.75,minHeight:80,backgroundColor:`rgba(158, 158, 158, 0.02)`,border:`1px dashed #bdbdbd`},children:(0,Z.jsx)(Y,{droppableId:`unused-buttons`,children:(e,t)=>(0,Z.jsxs)(k,{ref:e.innerRef,...e.droppableProps,sx:{display:`grid`,gridTemplateColumns:{xs:`1fr`,sm:`repeat(2, 1fr)`,md:`repeat(3, 1fr)`,lg:`repeat(4, 1fr)`},gap:.75,minHeight:60,backgroundColor:t.isDraggingOver?`rgba(158, 158, 158, 0.1)`:`transparent`,borderRadius:1,transition:`background-color 0.2s ease`,padding:0},children:[l.map((e,t)=>f(e,t,!1)),e.placeholder,l.length===0&&(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{textAlign:`center`,py:3,gridColumn:`1 / -1`,fontStyle:`italic`,fontSize:`0.8rem`},children:t.isDraggingOver?i(`settings.appearance.inputBox.draggableButtonConfig.releaseToRemove`):i(`settings.appearance.inputBox.draggableButtonConfig.allUsed`)})]})})})]})]})},$=({inputLayoutStyle:i})=>{let{t:a}=P(),o=D(),s=e=>()=>{console.log(`预览模式：阻止${e}`)},c={onSendMessage:s(`发送消息`),onSendImagePrompt:s(`图像生成`),isLoading:!1,allowConsecutiveMessages:!1,imageGenerationMode:!1,videoGenerationMode:!1,webSearchActive:!1,onStopResponse:s(`停止响应`),isStreaming:!1,isDebating:!1,toolsEnabled:!1,availableModels:[],onClearTopic:s(`清空话题`),onNewTopic:s(`新建话题`),toggleImageGenerationMode:s(`切换图像生成模式`),toggleVideoGenerationMode:s(`切换视频生成模式`),toggleWebSearch:s(`切换网络搜索`),toggleToolsEnabled:s(`切换工具启用状态`),onToolsEnabledChange:s(`工具启用状态变更`)};return(0,Z.jsxs)(F,{sx:{display:`flex`,flexDirection:`column`,width:`100%`,maxWidth:`100%`,position:`relative`,alignItems:`stretch`,p:0,bgcolor:o.palette.mode===`dark`?`rgba(0,0,0,0.2)`:`rgba(0,0,0,0.02)`,borderRadius:2,minHeight:`100px`,overflow:`hidden`},children:[(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{mb:1,px:1.5,pt:1.5,fontSize:`0.8rem`},children:a(`settings.appearance.inputBox.preview.label`)}),(0,Z.jsx)(F,{sx:{width:`100%`,maxWidth:`100%`,position:`relative`},children:(()=>{switch(i){case`compact`:return(0,Z.jsx)(t,{...c});case`integrated`:return(0,Z.jsx)(r,{...c});default:return(0,Z.jsxs)(F,{children:[(0,Z.jsx)(n,{...c}),(0,Z.jsx)(F,{sx:{mt:1},children:(0,Z.jsx)(e,{onClearTopic:c.onClearTopic,toggleImageGenerationMode:c.toggleImageGenerationMode,toggleWebSearch:c.toggleWebSearch,onToolsEnabledChange:c.onToolsEnabledChange,imageGenerationMode:!1,webSearchActive:!1,toolsEnabled:!0})})]})}})()})]})},ee=()=>{let{t:e}=P(),t=L(),n=w(),r=m(e=>e.settings),_=(()=>[{id:`tools`,label:e(`settings.appearance.inputBox.buttons.tools.label`),icon:()=>(0,Z.jsx)(K,{name:`settingsPanel`,size:20}),description:e(`settings.appearance.inputBox.buttons.tools.description`),color:`#4CAF50`},{id:`mcp-tools`,label:e(`settings.appearance.inputBox.buttons.mcpTools.label`),icon:E,description:e(`settings.appearance.inputBox.buttons.mcpTools.description`),color:`#4CAF50`},{id:`clear`,label:e(`settings.appearance.inputBox.buttons.clear.label`),icon:g,description:e(`settings.appearance.inputBox.buttons.clear.description`),color:`currentColor`},{id:`image`,label:e(`settings.appearance.inputBox.buttons.image.label`),icon:o,description:e(`settings.appearance.inputBox.buttons.image.description`),color:`#9C27B0`},{id:`video`,label:e(`settings.appearance.inputBox.buttons.video.label`),icon:p,description:e(`settings.appearance.inputBox.buttons.video.description`),color:`#E91E63`},{id:`knowledge`,label:e(`settings.appearance.inputBox.buttons.knowledge.label`),icon:a,description:e(`settings.appearance.inputBox.buttons.knowledge.description`),color:`#059669`},{id:`search`,label:e(`settings.appearance.inputBox.buttons.search.label`),icon:d,description:e(`settings.appearance.inputBox.buttons.search.description`),color:`#3B82F6`},{id:`upload`,label:e(`settings.appearance.inputBox.buttons.upload.label`),icon:u,description:e(`settings.appearance.inputBox.buttons.upload.description`),color:`#F59E0B`},{id:`camera`,label:e(`settings.appearance.inputBox.buttons.camera.label`),icon:o,description:e(`settings.appearance.inputBox.buttons.camera.description`),color:`#9C27B0`},{id:`photo-select`,label:e(`settings.appearance.inputBox.buttons.photoSelect.label`),icon:c,description:e(`settings.appearance.inputBox.buttons.photoSelect.description`),color:`#1976D2`},{id:`file-upload`,label:e(`settings.appearance.inputBox.buttons.fileUpload.label`),icon:s,description:e(`settings.appearance.inputBox.buttons.fileUpload.description`),color:`#4CAF50`},{id:`ai-debate`,label:e(`settings.appearance.inputBox.buttons.aiDebate.label`),icon:()=>(0,Z.jsx)(K,{name:`aiDebate`,size:20}),description:e(`settings.appearance.inputBox.buttons.aiDebate.description`),color:`#2196F3`},{id:`quick-phrase`,label:e(`settings.appearance.inputBox.buttons.quickPhrase.label`),icon:()=>(0,Z.jsx)(K,{name:`quickPhrase`,size:20}),description:e(`settings.appearance.inputBox.buttons.quickPhrase.description`),color:`#9C27B0`},{id:`multi-model`,label:e(`settings.appearance.inputBox.buttons.multiModel.label`),icon:i,description:e(`settings.appearance.inputBox.buttons.multiModel.description`),color:`currentColor`},{id:`send`,label:e(`settings.appearance.inputBox.buttons.send.label`),icon:f,description:e(`settings.appearance.inputBox.buttons.send.description`),color:`currentColor`},{id:`voice`,label:e(`settings.appearance.inputBox.buttons.voice.label`),icon:l,description:e(`settings.appearance.inputBox.buttons.voice.description`),color:`currentColor`}])(),y=r.inputBoxStyle||`default`,D=r.inputLayoutStyle||`default`,O=r.integratedInputLeftButtons||[`tools`,`clear`,`search`],k=r.integratedInputRightButtons||[`upload`,`voice`,`send`],j=()=>{t(`/settings/appearance`)},I=e=>{n(A({inputBoxStyle:e.target.value}))},R=e=>{n(A({inputLayoutStyle:e.target.value}))},B=(e,t)=>{n(A({integratedInputLeftButtons:e,integratedInputRightButtons:t,integratedInputButtons:[...e,...t]}))};return(0,Z.jsxs)(M,{children:[(0,Z.jsx)(N,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,Z.jsxs)(b,{children:[(0,Z.jsx)(v,{edge:`start`,color:`inherit`,onClick:j,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,Z.jsx)(U,{size:20})}),(0,Z.jsx)(V,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:e(`settings.appearance.inputBox.title`)})]})}),(0,Z.jsxs)(F,{sx:{flexGrow:1,overflowY:`auto`,p:{xs:1,sm:2},pb:`var(--content-bottom-padding)`,"&::-webkit-scrollbar":{width:{xs:`4px`,sm:`6px`}},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,Z.jsxs)(h,{elevation:0,sx:{mb:1.5,border:`1px solid #eee`,p:0,overflow:`hidden`},children:[(0,Z.jsx)(V,{variant:`subtitle1`,sx:{mb:1,p:1.5,pb:0,fontWeight:600,fontSize:`0.95rem`},children:e(`settings.appearance.inputBox.preview.title`)}),(0,Z.jsx)($,{inputBoxStyle:y,inputLayoutStyle:D}),(0,Z.jsxs)(V,{variant:`body2`,color:`text.secondary`,sx:{mt:1,textAlign:`center`,p:1.5,pt:0,fontSize:`0.8rem`},children:[e(`settings.appearance.inputBox.preview.currentConfig`),` `,e(`settings.appearance.inputBox.preview.styles.${y}`),` + `,e(`settings.appearance.inputBox.preview.layouts.${D}`)]}),D===`integrated`&&(0,Z.jsxs)(F,{sx:{mt:2,pt:2,borderTop:`1px solid #eee`},children:[(0,Z.jsx)(V,{variant:`subtitle1`,sx:{mb:1,px:1.5},children:e(`settings.appearance.inputBox.preview.buttonLayout.title`)}),(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{mb:2,px:1.5},children:e(`settings.appearance.inputBox.preview.buttonLayout.description`)}),(0,Z.jsx)(Q,{availableButtons:_,leftButtons:O,rightButtons:k,onUpdateLayout:B}),(0,Z.jsx)(V,{variant:`body2`,color:`text.secondary`,sx:{mt:1.5,px:1.5,pb:2},children:e(`settings.appearance.inputBox.preview.buttonLayout.summary`,{left:O.length,right:k.length})})]})]}),(0,Z.jsx)(z,{sx:{mb:1.5}}),(0,Z.jsxs)(h,{elevation:0,sx:{p:1.5,mb:1.5,border:`1px solid #eee`},children:[(0,Z.jsx)(V,{variant:`subtitle1`,sx:{mb:1.5,fontWeight:600,fontSize:`0.95rem`},children:e(`settings.appearance.inputBox.style.title`)}),(0,Z.jsxs)(T,{fullWidth:!0,variant:`outlined`,sx:{mb:1.5},size:`small`,children:[(0,Z.jsx)(S,{children:e(`settings.appearance.inputBox.style.label`)}),(0,Z.jsxs)(C,{value:y,onChange:I,label:e(`settings.appearance.inputBox.style.label`),MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},children:[(0,Z.jsx)(x,{value:`default`,children:e(`settings.appearance.inputBox.style.default`)}),(0,Z.jsx)(x,{value:`modern`,children:e(`settings.appearance.inputBox.style.modern`)}),(0,Z.jsx)(x,{value:`minimal`,children:e(`settings.appearance.inputBox.style.minimal`)})]})]}),(0,Z.jsxs)(V,{variant:`body2`,color:`text.secondary`,sx:{mt:.5,fontSize:`0.8rem`,lineHeight:1.5},children:[e(`settings.appearance.inputBox.style.description`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.style.defaultDesc`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.style.modernDesc`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.style.minimalDesc`)]})]}),(0,Z.jsxs)(h,{elevation:0,sx:{p:1.5,mb:1.5,border:`1px solid #eee`},children:[(0,Z.jsx)(V,{variant:`subtitle1`,sx:{mb:1.5,fontWeight:600,fontSize:`0.95rem`},children:e(`settings.appearance.inputBox.layout.title`)}),(0,Z.jsxs)(T,{fullWidth:!0,variant:`outlined`,sx:{mb:1.5},size:`small`,children:[(0,Z.jsx)(S,{children:e(`settings.appearance.inputBox.layout.label`)}),(0,Z.jsxs)(C,{value:D,onChange:R,label:e(`settings.appearance.inputBox.layout.label`),MenuProps:{disableAutoFocus:!0,disableRestoreFocus:!0},children:[(0,Z.jsx)(x,{value:`default`,children:e(`settings.appearance.inputBox.layout.default`)}),(0,Z.jsx)(x,{value:`compact`,children:e(`settings.appearance.inputBox.layout.compact`)}),(0,Z.jsx)(x,{value:`integrated`,children:e(`settings.appearance.inputBox.layout.integrated`)})]})]}),(0,Z.jsxs)(V,{variant:`body2`,color:`text.secondary`,sx:{mt:.5,fontSize:`0.8rem`,lineHeight:1.5},children:[e(`settings.appearance.inputBox.layout.description`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.layout.defaultDesc`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.layout.compactDesc`),(0,Z.jsx)(`br`,{}),e(`settings.appearance.inputBox.layout.integratedDesc`)]})]}),(0,Z.jsx)(F,{sx:{height:`20px`}})]})]})};export{ee as default};