import{t as e}from"./plus-DCrdXXDc.js";import{$u as t,Ad as n,Al as r,Cd as i,Du as a,Eu as o,Gi as s,Hr as c,Hu as l,Pl as u,Sd as d,Ud as f,Vu as p,Wu as m,ad as ee,bd as h,bp as g,ci as _,dd as v,fd as y,id as b,nd as x,pp as S,qd as C,qp as w,s as T,td as E,vd as D,xd as O,xp as k,xu as A,yp as j,zp as M,zu as N}from"./index-hvLbsAjx.js";import{t as P}from"./CustomIcon-BKBQb-ts.js";import"./icons-Dqirgq6F.js";import{t as F}from"./QuickPhraseService-Vk3lcb6h.js";var I=w(M(),1),L=w(k(),1),R=()=>{let w=f(),k=j(),M=S(),{t:R}=_(),z=()=>{M(`/settings`)},B=g(e=>e.settings.showQuickPhraseButton??!0),[V,H]=(0,I.useState)([]),[U,W]=(0,I.useState)(!0),[G,K]=(0,I.useState)(!1),[q,J]=(0,I.useState)(null),[Y,X]=(0,I.useState)({title:``,content:``}),Z=(0,I.useCallback)(async()=>{try{W(!0),H(await F.getAll())}catch(e){console.error(R(`settings.quickPhraseManagement.errors.loadFailed`),e)}finally{W(!1)}},[R]);(0,I.useEffect)(()=>{Z()},[Z]);let Q=()=>{J(null),X({title:``,content:``}),K(!0)},te=e=>{J(e),X({title:e.title,content:e.content}),K(!0)},ne=async e=>{if(confirm(R(`settings.quickPhraseManagement.actions.deleteConfirm`)))try{await F.delete(e),await Z()}catch(e){console.error(R(`settings.quickPhraseManagement.errors.deleteFailed`),e)}},$=()=>{K(!1),J(null),X({title:``,content:``})},re=async()=>{if(!(!Y.title.trim()||!Y.content.trim()))try{q?await F.update(q.id,{title:Y.title,content:Y.content}):await F.add({title:Y.title,content:Y.content}),$(),await Z()}catch(e){console.error(R(`settings.quickPhraseManagement.errors.saveFailed`),e)}};return U?(0,L.jsx)(y,{sx:{p:3,textAlign:`center`},children:(0,L.jsx)(O,{children:R(`settings.quickPhraseManagement.loading`)})}):(0,L.jsxs)(y,{sx:{flexGrow:1,display:`flex`,flexDirection:`column`,height:`100vh`,bgcolor:e=>e.palette.mode===`light`?C(e.palette.primary.main,.02):C(e.palette.background.default,.9)},children:[(0,L.jsx)(h,{position:`fixed`,elevation:0,sx:{zIndex:e=>e.zIndex.drawer+1,bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,L.jsxs)(a,{children:[(0,L.jsx)(i,{edge:`start`,color:`inherit`,onClick:z,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,L.jsx)(A,{size:24})}),(0,L.jsx)(O,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:R(`settings.quickPhraseManagement.title`)})]})}),(0,L.jsxs)(y,{sx:{flexGrow:1,overflowY:`auto`,p:2,mt:8,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,L.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mb:3,px:1},children:R(`settings.quickPhraseManagement.description`)}),(0,L.jsxs)(n,{sx:{p:2,mb:3,border:`1px solid ${w.palette.divider}`,borderRadius:2},children:[(0,L.jsx)(O,{variant:`subtitle1`,sx:{mb:1,fontWeight:600},children:R(`settings.quickPhraseManagement.displaySettings.title`)}),(0,L.jsxs)(y,{sx:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,L.jsx)(O,{variant:`body1`,children:R(`settings.quickPhraseManagement.displaySettings.showButton`)}),(0,L.jsx)(T,{checked:B,onChange:e=>k(c(e.target.checked))})]}),(0,L.jsx)(O,{variant:`caption`,color:`text.secondary`,sx:{display:`block`,mt:.5},children:R(`settings.quickPhraseManagement.displaySettings.showButtonDescription`)})]}),V.length===0?(0,L.jsxs)(n,{sx:{p:4,textAlign:`center`,borderRadius:2},children:[(0,L.jsx)(y,{sx:{opacity:.3,mb:2},children:(0,L.jsx)(P,{name:`quickPhrase`,size:48,color:`currentColor`})}),(0,L.jsx)(O,{variant:`h6`,color:`text.secondary`,gutterBottom:!0,children:R(`settings.quickPhraseManagement.empty.title`)}),(0,L.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:R(`settings.quickPhraseManagement.empty.description`)}),(0,L.jsx)(v,{variant:`contained`,startIcon:(0,L.jsx)(e,{}),onClick:Q,children:R(`settings.quickPhraseManagement.empty.addButton`)})]}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m,{children:V.map((e,t)=>(0,L.jsxs)(I.Fragment,{children:[(0,L.jsxs)(p,{sx:{bgcolor:`background.paper`,borderRadius:1,mb:1,border:`1px solid ${w.palette.divider}`},children:[(0,L.jsx)(N,{primary:(0,L.jsxs)(y,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,L.jsx)(O,{variant:`subtitle1`,fontWeight:`medium`,children:e.title}),(0,L.jsx)(D,{size:`small`,label:`${e.content.length} ${R(`settings.quickPhraseManagement.list.characters`)}`,variant:`outlined`})]}),secondary:(0,L.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mt:1,display:`-webkit-box`,WebkitLineClamp:2,WebkitBoxOrient:`vertical`,overflow:`hidden`},children:e.content})}),(0,L.jsxs)(l,{children:[(0,L.jsx)(i,{edge:`end`,onClick:()=>te(e),size:`small`,sx:{mr:1},children:(0,L.jsx)(u,{size:18})}),(0,L.jsx)(i,{edge:`end`,onClick:()=>ne(e.id),size:`small`,color:`error`,children:(0,L.jsx)(r,{size:18})})]})]}),t<V.length-1&&(0,L.jsx)(E,{})]},e.id))}),(0,L.jsx)(t,{color:`primary`,"aria-label":R(`settings.quickPhraseManagement.actions.addLabel`),onClick:Q,sx:{position:`fixed`,bottom:24,right:24},children:(0,L.jsx)(e,{})})]}),(0,L.jsxs)(s,{open:G,onClose:$,maxWidth:`sm`,fullWidth:!0,children:[(0,L.jsx)(x,{children:R(q?`settings.quickPhraseManagement.dialog.edit.title`:`settings.quickPhraseManagement.dialog.add.title`)}),(0,L.jsx)(b,{children:(0,L.jsxs)(y,{sx:{display:`flex`,flexDirection:`column`,gap:2,pt:1},children:[(0,L.jsx)(o,{label:R(q?`settings.quickPhraseManagement.dialog.edit.titleLabel`:`settings.quickPhraseManagement.dialog.add.titleLabel`),value:Y.title,onChange:e=>X({...Y,title:e.target.value}),fullWidth:!0,size:`small`,placeholder:R(q?`settings.quickPhraseManagement.dialog.edit.titlePlaceholder`:`settings.quickPhraseManagement.dialog.add.titlePlaceholder`)}),(0,L.jsx)(o,{label:R(q?`settings.quickPhraseManagement.dialog.edit.contentLabel`:`settings.quickPhraseManagement.dialog.add.contentLabel`),value:Y.content,onChange:e=>X({...Y,content:e.target.value}),multiline:!0,rows:6,fullWidth:!0,size:`small`,placeholder:R(q?`settings.quickPhraseManagement.dialog.edit.contentPlaceholder`:`settings.quickPhraseManagement.dialog.add.contentPlaceholder`)}),Y.content&&(0,L.jsx)(d,{severity:`info`,sx:{mt:1},children:R(q?`settings.quickPhraseManagement.dialog.edit.contentLength`:`settings.quickPhraseManagement.dialog.add.contentLength`,{count:Y.content.length})})]})}),(0,L.jsxs)(ee,{children:[(0,L.jsx)(v,{onClick:$,children:R(q?`settings.quickPhraseManagement.dialog.edit.cancel`:`settings.quickPhraseManagement.dialog.add.cancel`)}),(0,L.jsx)(v,{onClick:re,variant:`contained`,disabled:!Y.title.trim()||!Y.content.trim(),children:R(q?`settings.quickPhraseManagement.dialog.edit.submit`:`settings.quickPhraseManagement.dialog.add.submit`)})]})]})]})]})};export{R as default};