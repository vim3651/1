var e=class e{static instance;entries=[];maxEntries=1e3;listeners=[];originalConsole={};isIntercepting=!1;groupLevel=0;counts=new Map;constructor(){this.setupConsoleInterception()}static getInstance(){return e.instance||=new e,e.instance}setupConsoleInterception(){this.isIntercepting||=([`log`,`info`,`warn`,`error`,`debug`,`trace`].forEach(e=>{this.originalConsole[e]=console[e].bind(console),console[e]=(...t)=>{if(e===`error`&&t.length>0){let e=String(t[0]||``);if(e.includes("non-boolean attribute `button`")||e.includes("Received `%s` for a non-boolean attribute `%s`")&&t.length>1&&String(t[1]).includes(`true`)&&String(t[2]).includes(`button`)||e.includes(`The Menu component doesn't accept a Fragment as a child`)||e.includes("[@use-gesture]: The drag target has its `touch-action` style property set to `auto`")||e.includes(`Selector unknown returned the root state`)||e.includes(`This can lead to unnecessary rerenders`))return}this.originalConsole[e](...t),this.addEntry({id:this.generateId(),timestamp:Date.now(),level:e,args:this.serializeArgs(t),stack:e===`error`||e===`warn`?this.getStackTrace():void 0,groupLevel:this.groupLevel})}}),this.originalConsole.group=console.group.bind(console),this.originalConsole.groupEnd=console.groupEnd.bind(console),console.group=(...e)=>{this.originalConsole.group(...e),this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`group`,args:this.serializeArgs(e),groupLevel:this.groupLevel}),this.groupLevel++},console.groupEnd=()=>{this.originalConsole.groupEnd(),this.groupLevel=Math.max(0,this.groupLevel-1),this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`groupEnd`,args:[],groupLevel:this.groupLevel})},this.originalConsole.clear=console.clear.bind(console),console.clear=()=>{this.originalConsole.clear(),this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`clear`,args:[`Console was cleared`],groupLevel:0})},window.addEventListener(`error`,e=>{this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`error`,args:[`Uncaught ${e.error?.name||`Error`}: ${e.error?.message||e.message}`],stack:e.error?.stack,groupLevel:this.groupLevel})}),window.addEventListener(`unhandledrejection`,e=>{this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`error`,args:[`Uncaught (in promise) ${e.reason}`],stack:e.reason?.stack,groupLevel:this.groupLevel})}),!0)}generateId(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}serializeArgs(e){return e.map(e=>{if(e===null)return null;if(e!==void 0){if(typeof e==`string`||typeof e==`number`||typeof e==`boolean`)return e;if(e instanceof Error)return{__type:`Error`,name:e.name,message:e.message,stack:e.stack};if(e instanceof Element)return{__type:`Element`,tagName:e.tagName,id:e.id,className:e.className,outerHTML:e.outerHTML.substring(0,200)+(e.outerHTML.length>200?`...`:``)};try{return JSON.parse(JSON.stringify(e))}catch{return String(e)}}})}getStackTrace(){let e=Error().stack;return e?e.split(`
`).slice(3).join(`
`):``}addEntry(e){this.entries.push(e),this.entries.length>this.maxEntries&&(this.entries=this.entries.slice(-this.maxEntries)),this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e([...this.entries])}catch(e){this.originalConsole.error(`Error in console listener:`,e)}})}getEntries(){return[...this.entries]}getFilteredEntries(e){return this.entries.filter(t=>{if(!e.levels.has(t.level))return!1;if(e.searchText){let n=e.searchText.toLowerCase();if(!t.args.map(e=>String(e)).join(` `).toLowerCase().includes(n))return!1}return!0})}addListener(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}clear(){this.entries=[],this.groupLevel=0,this.counts.clear(),this.notifyListeners()}executeCommand(e){try{let t=window.eval(e);this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`log`,args:[`> ${e}`,t],groupLevel:this.groupLevel})}catch(t){this.addEntry({id:this.generateId(),timestamp:Date.now(),level:`error`,args:[`> ${e}`,t],stack:t.stack,groupLevel:this.groupLevel})}}formatArg(e){if(e===null)return`null`;if(e===void 0)return`undefined`;if(typeof e==`string`)return e;if(typeof e==`number`||typeof e==`boolean`)return String(e);if(e&&e.__type===`Error`)return`${e.name}: ${e.message}`;if(e&&e.__type===`Element`)return`<${e.tagName.toLowerCase()}${e.id?` id="${e.id}"`:``}${e.className?` class="${e.className}"`:``}>`;try{return JSON.stringify(e,null,2)}catch{return String(e)}}getArgType(e){return e===null?`null`:e===void 0?`undefined`:e&&e.__type?e.__type:typeof e}};export{e as default};