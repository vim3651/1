import{t as e}from"./ListItemAvatar-vt2ONwqY.js";import{t}from"./plus-DCrdXXDc.js";import{Ad as n,Al as r,Au as i,Cd as a,Du as ee,Ep as o,Eu as s,Gi as c,Iu as l,Ju as te,Ml as u,Nu as d,Ql as f,Qu as ne,Rl as p,Sd as re,Uu as m,Vu as h,Wu as g,_ as ie,ad as _,au as ae,bd as oe,ci as se,dd as v,et as y,fd as b,id as x,kp as ce,md as S,nd as C,pp as le,qd as w,qp as T,s as ue,td as E,vd as D,xd as O,xp as k,xu as de,zp as A,zu as j}from"./index-hvLbsAjx.js";var M=T(A(),1);let N=(e=21)=>{let t=``,n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=`useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict`[n[e]&63];return t};var P=T(k(),1),F=()=>{let{t:T}=se(),k=le(),[A,F]=(0,M.useState)([]),[I,L]=(0,M.useState)(!1),[R,z]=(0,M.useState)(!1),[B,V]=(0,M.useState)([]),[fe,H]=(0,M.useState)(!1),[U,W]=(0,M.useState)(``),[G,K]=(0,M.useState)({open:!1,message:``,severity:`success`}),[q,J]=(0,M.useState)(null),[Y,X]=(0,M.useState)({id:N(),name:``,type:`sse`,description:``,baseUrl:``,command:``,isActive:!1}),pe=ce()&&o();(0,M.useEffect)(()=>{Z(),me()},[]);let Z=()=>{F(y.getServers())},me=()=>{try{V(y.getBuiltinServers())}catch(e){console.error(T(`settings.mcpServer.messages.loadBuiltinFailed`),e)}},he=()=>{k(`/settings`)},ge=async(e,t)=>{try{await y.toggleServer(e,t),Z(),K({open:!0,message:T(t?`settings.mcpServer.messages.serverEnabled`:`settings.mcpServer.messages.serverDisabled`),severity:`success`})}catch{K({open:!0,message:T(`settings.mcpServer.messages.operationFailed`),severity:`error`})}},_e=async()=>{if(!Y.name||!Y.type){K({open:!0,message:T(`settings.mcpServer.messages.fillRequiredInfo`),severity:`error`});return}if((Y.type===`sse`||Y.type===`streamableHttp`||Y.type===`httpStream`)&&!Y.baseUrl){K({open:!0,message:T(`settings.mcpServer.messages.urlRequired`),severity:`error`});return}if(Y.type===`stdio`&&!Y.command){K({open:!0,message:T(`settings.mcpServer.messages.commandRequired`)||`请输入要执行的命令`,severity:`error`});return}try{let e={id:Date.now().toString(),name:Y.name,type:Y.type,description:Y.description,baseUrl:Y.baseUrl,command:Y.command,isActive:!1,headers:{},env:{},args:[]};await y.addServer(e),Z(),L(!1),X({id:N(),name:``,type:`sse`,description:``,baseUrl:``,command:``,isActive:!1}),K({open:!0,message:T(`settings.mcpServer.messages.serverAdded`),severity:`success`})}catch{K({open:!0,message:T(`settings.mcpServer.messages.addFailed`),severity:`error`})}},Q=e=>A.some(t=>t.name===e),ve=async e=>{if(Q(e.name)){K({open:!0,message:T(`settings.mcpServer.messages.serverExists`,{name:e.name}),severity:`warning`});return}try{await y.addBuiltinServer(e.name,{description:e.description,env:e.env,args:e.args,tags:e.tags,provider:e.provider}),Z(),K({open:!0,message:T(`settings.mcpServer.messages.builtinServerAdded`,{name:e.name}),severity:`success`})}catch{K({open:!0,message:T(`settings.mcpServer.messages.builtinAddFailed`),severity:`error`})}},ye=e=>{k(`/settings/mcp-server/${e.id}`,{state:{server:e}})},be=async e=>{if(!q){J(e.id);try{await y.removeServer(e.id),Z(),K({open:!0,message:T(`settings.mcpServer.messages.serverDeleted`,{name:e.name}),severity:`success`})}catch{K({open:!0,message:T(`settings.mcpServer.messages.deleteFailed`),severity:`error`})}finally{J(null)}}},xe=async()=>{try{let e=JSON.parse(U);if(!e.mcpServers||typeof e.mcpServers!=`object`)throw Error(T(`settings.mcpServer.messages.jsonFormatError`));let t=e=>{if(!e)return`sse`;let t=e.toLowerCase().replace(/[-_]/g,``);return t===`streamablehttp`||t===`streamable`?`streamableHttp`:t===`httpstream`?`httpStream`:t===`inmemory`||t===`memory`?`inMemory`:t===`sse`||t===`serversent`||t===`serversentevents`?`sse`:t===`stdio`||t===`standardio`?`stdio`:`sse`},n=0,r=[];for(let[i,a]of Object.entries(e.mcpServers))try{let e=a,r={id:Date.now().toString()+Math.random().toString(36).substring(2,11),name:i,type:t(e.type),baseUrl:e.url||e.baseUrl,command:e.command,description:T(`settings.mcpServer.messages.importFromJson`,{name:i}),isActive:!1,headers:e.headers||{},env:e.env||{},args:e.args||[]};await y.addServer(r),n++}catch(e){r.push(`${i}: ${e instanceof Error?e.message:`未知错误`}`)}Z(),H(!1),W(``),K(n>0?{open:!0,message:r.length>0?T(`settings.mcpServer.messages.importPartial`,{count:n,errors:r.length}):T(`settings.mcpServer.messages.importSuccess`,{count:n}),severity:r.length>0?`error`:`success`}:{open:!0,message:T(`settings.mcpServer.messages.importFailed`,{errors:r.join(`; `)}),severity:`error`})}catch(e){K({open:!0,message:T(`settings.mcpServer.messages.jsonParseError`,{error:e instanceof Error?e.message:T(`settings.mcpServer.messages.operationFailed`)}),severity:`error`})}},Se=e=>{switch(e){case`sse`:case`streamableHttp`:case`httpStream`:return(0,P.jsx)(f,{});case`stdio`:return(0,P.jsx)(u,{size:20});case`inMemory`:return(0,P.jsx)(ae,{});default:return(0,P.jsx)(p,{})}},Ce=e=>{switch(e){case`sse`:return T(`settings.mcpServer.serverTypes.sse`);case`streamableHttp`:return T(`settings.mcpServer.serverTypes.streamableHttp`);case`httpStream`:return T(`settings.mcpServer.serverTypes.httpStream`);case`stdio`:return T(`settings.mcpServer.serverTypes.stdio`);case`inMemory`:return T(`settings.mcpServer.serverTypes.inMemory`);default:return T(`settings.mcpServer.serverTypes.unknown`)}},$=e=>{switch(e){case`sse`:return`#2196f3`;case`streamableHttp`:return`#00bcd4`;case`httpStream`:return`#ff5722`;case`stdio`:return`#ff9800`;case`inMemory`:return`#4CAF50`;default:return`#9e9e9e`}},we=e=>{let t=`settings.mcpServer.builtinDialog.servers.${e}.description`,n=T(t);return n===t?``:n},Te=(e,t)=>{if(t){let n=`settings.mcpServer.builtinDialog.servers.${t}.tags.${e}`,r=T(n);if(r!==n)return r}for(let t of[`@aether/time`,`@aether/fetch`,`@aether/calculator`]){let n=`settings.mcpServer.builtinDialog.servers.${t}.tags.${e}`,r=T(n);if(r!==n)return r}return e};return(0,P.jsxs)(ie,{children:[(0,P.jsx)(oe,{position:`static`,elevation:0,sx:{bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,P.jsxs)(ee,{children:[(0,P.jsx)(a,{edge:`start`,color:`inherit`,onClick:he,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,P.jsx)(de,{})}),(0,P.jsx)(O,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600},children:T(`settings.mcpServer.pageTitle`)}),(0,P.jsx)(v,{startIcon:(0,P.jsx)(t,{}),onClick:()=>L(!0),sx:{bgcolor:e=>w(e.palette.primary.main,.1),color:`primary.main`,"&:hover":{bgcolor:e=>w(e.palette.primary.main,.2)},borderRadius:2},children:T(`settings.mcpServer.addButton`)})]})}),(0,P.jsxs)(b,{sx:{flexGrow:1,overflowY:`auto`,p:2,pb:`var(--content-bottom-padding)`,"&::-webkit-scrollbar":{width:`6px`},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[A.length===0?(0,P.jsx)(n,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:(0,P.jsxs)(b,{sx:{p:{xs:3,sm:4},textAlign:`center`},children:[(0,P.jsx)(b,{sx:{mb:{xs:1.5,sm:2}},children:(0,P.jsx)(p,{size:48,style:{color:`#9333EA`}})}),(0,P.jsx)(O,{variant:`h6`,gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:`1.1rem`,sm:`1.25rem`}},children:T(`settings.mcpServer.emptyState.title`)}),(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mb:{xs:2.5,sm:3},fontSize:{xs:`0.875rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.emptyState.description`)}),(0,P.jsxs)(b,{sx:{display:`flex`,gap:{xs:1.5,sm:2},flexWrap:`wrap`,justifyContent:`center`,flexDirection:{xs:`column`,sm:`row`},alignItems:`center`},children:[(0,P.jsx)(v,{variant:`contained`,startIcon:(0,P.jsx)(t,{}),onClick:()=>L(!0),fullWidth:window.innerWidth<600,sx:{bgcolor:`primary.main`,"&:hover":{bgcolor:`primary.dark`},minHeight:{xs:44,sm:36},fontSize:{xs:`0.9rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.emptyState.addServer`)}),(0,P.jsx)(v,{variant:`outlined`,onClick:()=>H(!0),fullWidth:window.innerWidth<600,sx:{borderColor:`primary.main`,color:`primary.main`,"&:hover":{borderColor:`primary.dark`,color:`primary.dark`},minHeight:{xs:44,sm:36},fontSize:{xs:`0.9rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.emptyState.importConfig`)}),(0,P.jsx)(v,{variant:`outlined`,onClick:()=>z(!0),fullWidth:window.innerWidth<600,sx:{borderColor:`primary.main`,color:`primary.main`,"&:hover":{borderColor:`primary.dark`,color:`primary.dark`},minHeight:{xs:44,sm:36},fontSize:{xs:`0.9rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.emptyState.builtinServers`)})]})]})}):(0,P.jsxs)(n,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,P.jsxs)(b,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,P.jsx)(O,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`}},children:T(`settings.mcpServer.serverList.title`)}),(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.serverList.description`)})]}),(0,P.jsx)(E,{}),(0,P.jsx)(g,{disablePadding:!0,children:A.map((t,n)=>(0,P.jsxs)(M.Fragment,{children:[(0,P.jsxs)(h,{disablePadding:!0,sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>w(e.palette.primary.main,.05)}},children:[(0,P.jsxs)(m,{onClick:()=>ye(t),sx:{flex:1},children:[(0,P.jsx)(e,{children:(0,P.jsx)(S,{sx:{bgcolor:w($(t.type),.12),color:$(t.type),boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:Se(t.type)})}),(0,P.jsx)(j,{primary:(0,P.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,gap:{xs:.5,sm:1},flexWrap:`wrap`},children:[(0,P.jsx)(O,{sx:{fontWeight:600,color:`text.primary`,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:t.name}),(0,P.jsx)(D,{label:Ce(t.type),size:`small`,sx:{bgcolor:w($(t.type),.1),color:$(t.type),fontWeight:500,fontSize:{xs:`0.7rem`,sm:`0.75rem`},height:{xs:20,sm:24}}}),t.isActive&&(0,P.jsx)(D,{label:T(`settings.mcpServer.status.active`),size:`small`,color:`success`,variant:`outlined`,sx:{fontSize:{xs:`0.7rem`,sm:`0.75rem`},height:{xs:20,sm:24}}})]}),secondary:(0,P.jsxs)(b,{component:`div`,sx:{mt:{xs:.5,sm:1}},children:[t.description&&(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,component:`div`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`},lineHeight:1.4,display:`-webkit-box`,WebkitLineClamp:{xs:2,sm:3},WebkitBoxOrient:`vertical`,overflow:`hidden`},children:t.description}),t.baseUrl&&(0,P.jsx)(O,{variant:`caption`,color:`text.secondary`,component:`div`,sx:{fontSize:{xs:`0.7rem`,sm:`0.75rem`},mt:.5,wordBreak:`break-all`},children:t.baseUrl})]}),secondaryTypographyProps:{component:`div`}})]}),(0,P.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,gap:1,pr:2},children:[(0,P.jsx)(ue,{checked:t.isActive,onChange:e=>{e.stopPropagation(),ge(t.id,e.target.checked)}}),(0,P.jsx)(a,{onClick:e=>{e.stopPropagation(),be(t)},size:`small`,disabled:q===t.id,sx:{color:q===t.id?`text.disabled`:`error.main`,"&:hover":{bgcolor:e=>w(e.palette.error.main,.1)}},children:(0,P.jsx)(r,{size:18})})]})]}),n<A.length-1&&(0,P.jsx)(E,{variant:`inset`,component:`li`,sx:{ml:0}})]},t.id))})]}),(0,P.jsxs)(n,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,P.jsxs)(b,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,P.jsx)(O,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`}},children:T(`settings.mcpServer.quickActions.title`)}),(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.quickActions.description`)})]}),(0,P.jsx)(E,{}),(0,P.jsxs)(g,{disablePadding:!0,children:[(0,P.jsx)(h,{disablePadding:!0,children:(0,P.jsxs)(m,{onClick:()=>H(!0),sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>w(e.palette.primary.main,.05)}},children:[(0,P.jsx)(e,{children:(0,P.jsx)(S,{sx:{bgcolor:w(`#06b6d4`,.12),color:`#06b6d4`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,P.jsx)(t,{})})}),(0,P.jsx)(j,{primary:(0,P.jsx)(O,{sx:{fontWeight:600,color:`text.primary`,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:T(`settings.mcpServer.quickActions.import.title`)}),secondary:(0,P.jsx)(O,{sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.quickActions.import.description`)}),secondaryTypographyProps:{component:`div`}})]})}),(0,P.jsx)(E,{variant:`inset`,component:`li`,sx:{ml:0}}),(0,P.jsx)(h,{disablePadding:!0,children:(0,P.jsxs)(m,{onClick:()=>z(!0),sx:{transition:`all 0.2s`,"&:hover":{bgcolor:e=>w(e.palette.primary.main,.05)}},children:[(0,P.jsx)(e,{children:(0,P.jsx)(S,{sx:{bgcolor:w(`#8b5cf6`,.12),color:`#8b5cf6`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:(0,P.jsx)(p,{})})}),(0,P.jsx)(j,{primary:(0,P.jsx)(O,{sx:{fontWeight:600,color:`text.primary`,fontSize:{xs:`0.9rem`,sm:`1rem`}},children:T(`settings.mcpServer.quickActions.builtin.title`)}),secondary:(0,P.jsx)(O,{sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.quickActions.builtin.description`)}),secondaryTypographyProps:{component:`div`}})]})})]})]})]}),(0,P.jsxs)(c,{open:I,onClose:()=>L(!1),maxWidth:`sm`,fullWidth:!0,children:[(0,P.jsx)(C,{children:T(`settings.mcpServer.addDialog.title`)}),(0,P.jsxs)(x,{children:[(0,P.jsx)(s,{autoFocus:!0,margin:`dense`,label:T(`settings.mcpServer.addDialog.serverName`),fullWidth:!0,variant:`outlined`,value:Y.name,onChange:e=>X({...Y,name:e.target.value}),sx:{mb:2}}),(0,P.jsxs)(ne,{fullWidth:!0,sx:{mb:2},children:[(0,P.jsx)(te,{children:T(`settings.mcpServer.addDialog.serverType`)}),(0,P.jsxs)(d,{value:Y.type,label:T(`settings.mcpServer.addDialog.serverType`),onChange:e=>X({...Y,type:e.target.value}),children:[(0,P.jsx)(l,{value:`sse`,children:T(`settings.mcpServer.addDialog.types.sse`)}),(0,P.jsx)(l,{value:`streamableHttp`,children:T(`settings.mcpServer.addDialog.types.streamableHttp`)}),(0,P.jsx)(l,{value:`inMemory`,children:T(`settings.mcpServer.addDialog.types.inMemory`)}),pe&&(0,P.jsx)(l,{value:`stdio`,children:(0,P.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,P.jsx)(u,{size:16}),T(`settings.mcpServer.addDialog.types.stdio`)||`标准输入/输出 (stdio)`]})})]})]}),(Y.type===`sse`||Y.type===`streamableHttp`||Y.type===`httpStream`)&&(0,P.jsx)(s,{margin:`dense`,label:T(`settings.mcpServer.addDialog.serverUrl`),fullWidth:!0,variant:`outlined`,value:Y.baseUrl,onChange:e=>X({...Y,baseUrl:e.target.value}),placeholder:T(`settings.mcpServer.addDialog.placeholders.url`),sx:{mb:2}}),Y.type===`stdio`&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(s,{margin:`dense`,label:T(`settings.mcpServer.addDialog.command`)||`命令`,fullWidth:!0,variant:`outlined`,value:Y.command,onChange:e=>X({...Y,command:e.target.value}),placeholder:`npx, node, python, uvx...`,helperText:T(`settings.mcpServer.addDialog.commandHelp`)||`要执行的命令程序，如 npx、node、python 等`,sx:{mb:2}}),(0,P.jsx)(s,{margin:`dense`,label:T(`settings.mcpServer.addDialog.args`)||`命令参数`,fullWidth:!0,variant:`outlined`,value:(Y.args||[]).join(` `),onChange:e=>X({...Y,args:e.target.value.split(` `).filter(Boolean)}),placeholder:`-y @anthropic/mcp-server-fetch`,helperText:T(`settings.mcpServer.addDialog.argsHelp`)||`命令参数，用空格分隔`,sx:{mb:2}})]}),(0,P.jsx)(s,{margin:`dense`,label:T(`settings.mcpServer.addDialog.description`),fullWidth:!0,variant:`outlined`,multiline:!0,rows:2,value:Y.description,onChange:e=>X({...Y,description:e.target.value})})]}),(0,P.jsxs)(_,{children:[(0,P.jsx)(v,{onClick:()=>L(!1),children:T(`settings.mcpServer.addDialog.cancel`)}),(0,P.jsx)(v,{onClick:_e,variant:`contained`,children:T(`settings.mcpServer.addDialog.add`)})]})]}),(0,P.jsxs)(c,{open:fe,onClose:()=>H(!1),maxWidth:`md`,fullWidth:!0,children:[(0,P.jsx)(C,{children:T(`settings.mcpServer.importDialog.title`)}),(0,P.jsxs)(x,{children:[(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:T(`settings.mcpServer.importDialog.description`)}),(0,P.jsx)(b,{sx:{bgcolor:`grey.100`,p:2,borderRadius:1,mb:2,fontFamily:`monospace`,fontSize:`0.875rem`},children:`{
  "mcpServers": {
    "fetch": {
      "type": "sse",
      "url": "https://mcp.api-inference.modelscope.cn/sse/89261d74d6814a"
    },
    "memory": {
      "type": "streamableHttp",
      "url": "https://example.com/mcp/memory"
    }
  }
}`}),(0,P.jsx)(s,{autoFocus:!0,margin:`dense`,label:T(`settings.mcpServer.importDialog.label`),fullWidth:!0,multiline:!0,rows:10,variant:`outlined`,value:U,onChange:e=>W(e.target.value),placeholder:T(`settings.mcpServer.importDialog.placeholder`)})]}),(0,P.jsxs)(_,{children:[(0,P.jsx)(v,{onClick:()=>H(!1),children:T(`settings.mcpServer.importDialog.cancel`)}),(0,P.jsx)(v,{onClick:xe,variant:`contained`,disabled:!U.trim(),children:T(`settings.mcpServer.importDialog.import`)})]})]}),(0,P.jsxs)(c,{open:R,onClose:()=>z(!1),maxWidth:`md`,fullWidth:!0,fullScreen:window.innerWidth<600,sx:{"& .MuiDialog-paper":{maxHeight:{xs:`100vh`,sm:`90vh`},margin:{xs:0,sm:2},borderRadius:{xs:0,sm:2}}},children:[(0,P.jsx)(C,{sx:{px:{xs:2,sm:3},py:{xs:2,sm:2.5},pt:{xs:`calc(var(--safe-area-top) + 16px)`,sm:2.5},fontSize:{xs:`1.25rem`,sm:`1.5rem`},fontWeight:600,borderBottom:`1px solid`,borderColor:`divider`},children:T(`settings.mcpServer.builtinDialog.title`)}),(0,P.jsxs)(x,{sx:{px:{xs:2,sm:3},py:{xs:2,sm:3}},children:[(0,P.jsx)(O,{variant:`body2`,color:`text.secondary`,sx:{mb:{xs:2,sm:3},fontSize:{xs:`0.875rem`,sm:`0.875rem`},lineHeight:1.5},children:T(`settings.mcpServer.builtinDialog.description`)}),(0,P.jsx)(b,{sx:{display:`flex`,flexDirection:`column`,gap:{xs:1.5,sm:2},maxHeight:{xs:`calc(100vh - 200px)`,sm:`70vh`,md:`80vh`},overflow:`auto`,pr:{xs:.5,sm:1},WebkitOverflowScrolling:`touch`,"&::-webkit-scrollbar":{width:{xs:`2px`,sm:`4px`}},"&::-webkit-scrollbar-track":{background:`transparent`},"&::-webkit-scrollbar-thumb":{background:`rgba(0, 0, 0, 0.2)`,borderRadius:`2px`}},children:B.map(e=>{let t=Q(e.name);return(0,P.jsx)(n,{elevation:0,sx:e=>({border:`1px solid`,borderColor:t?e.palette.mode===`dark`?w(`#10b981`,.3):`#d1fae5`:`divider`,borderRadius:{xs:2,sm:2},transition:`all 0.2s ease-in-out`,backgroundColor:t?e.palette.mode===`dark`?w(`#10b981`,.1):`#f0fdf4`:e.palette.background.paper,cursor:`pointer`,touchAction:`manipulation`,"&:hover":{borderColor:t?e.palette.mode===`dark`?w(`#10b981`,.5):`#a7f3d0`:`#10b981`,boxShadow:e.palette.mode===`dark`?`0 4px 12px rgba(0,0,0,0.3)`:{xs:`0 2px 8px rgba(0,0,0,0.06)`,sm:`0 4px 12px rgba(0,0,0,0.08)`}},"&:active":{transform:{xs:`scale(0.98)`,sm:`none`}}}),children:(0,P.jsxs)(b,{sx:{p:{xs:2,sm:2.5,md:3},display:`flex`,flexDirection:{xs:`column`,sm:`row`},alignItems:{xs:`stretch`,sm:`flex-start`},gap:{xs:2,sm:2.5}},children:[(0,P.jsxs)(b,{sx:{flex:1,minWidth:0},children:[(0,P.jsxs)(b,{sx:{display:`flex`,alignItems:`center`,gap:1,mb:{xs:.75,sm:1}},children:[(0,P.jsx)(O,{variant:`h6`,fontWeight:600,sx:{fontSize:{xs:`1rem`,sm:`1.1rem`,md:`1.2rem`},color:`text.primary`,lineHeight:1.3,wordBreak:`break-word`},children:e.name}),t&&(0,P.jsx)(D,{label:T(`settings.mcpServer.builtinDialog.added`),size:`small`,sx:e=>({height:20,fontSize:`0.7rem`,backgroundColor:e.palette.mode===`dark`?w(`#10b981`,.2):`#dcfce7`,color:e.palette.mode===`dark`?`#6ee7b7`:`#166534`,border:`1px solid ${e.palette.mode===`dark`?w(`#10b981`,.3):`#bbf7d0`}`,fontWeight:500})})]}),(0,P.jsx)(O,{variant:`body2`,sx:{color:`text.secondary`,mb:{xs:1.5,sm:2},lineHeight:1.6,fontSize:{xs:`0.8rem`,sm:`0.875rem`,md:`0.9rem`},display:`-webkit-box`,WebkitLineClamp:{xs:3,sm:2},WebkitBoxOrient:`vertical`,overflow:`hidden`},children:we(e.name)||e.description}),(0,P.jsx)(b,{sx:{display:`flex`,alignItems:`center`,gap:{xs:.75,sm:1},flexWrap:`wrap`},children:e.tags&&e.tags.map(t=>(0,P.jsx)(D,{label:Te(t,e.name),size:`small`,variant:`outlined`,sx:e=>({fontSize:{xs:`0.7rem`,sm:`0.75rem`},height:{xs:22,sm:24},borderColor:`divider`,color:`text.secondary`,backgroundColor:e.palette.mode===`dark`?w(e.palette.background.paper,.5):`#f9fafb`,fontWeight:500,"& .MuiChip-label":{px:{xs:1,sm:1.5}},"&:hover":{borderColor:`#10b981`,backgroundColor:w(`#10b981`,.05)}})},t))})]}),(0,P.jsx)(b,{sx:{display:`flex`,alignItems:{xs:`stretch`,sm:`center`},flexShrink:0,mt:{xs:1,sm:0}},children:Q(e.name)?(0,P.jsx)(v,{variant:`outlined`,size:window.innerWidth<600?`medium`:`small`,fullWidth:window.innerWidth<600,disabled:!0,sx:{borderColor:`divider`,color:`text.secondary`,borderRadius:{xs:2,sm:1.5},px:{xs:3,sm:2},py:{xs:1,sm:.75},fontWeight:500,fontSize:{xs:`0.9rem`,sm:`0.875rem`},textTransform:`none`,minWidth:{xs:`auto`,sm:`auto`},minHeight:{xs:44,sm:`auto`},cursor:`default`},children:T(`settings.mcpServer.builtinDialog.added`)}):(0,P.jsx)(v,{onClick:t=>{t.stopPropagation(),ve(e)},variant:`contained`,size:window.innerWidth<600?`medium`:`small`,fullWidth:window.innerWidth<600,sx:{backgroundColor:`#10b981`,color:`white`,borderRadius:{xs:2,sm:1.5},px:{xs:3,sm:2},py:{xs:1,sm:.75},fontWeight:500,fontSize:{xs:`0.9rem`,sm:`0.875rem`},textTransform:`none`,minWidth:{xs:`auto`,sm:`auto`},minHeight:{xs:44,sm:`auto`},"&:hover":{backgroundColor:`#059669`}},children:T(`settings.mcpServer.builtinDialog.add`)})})]})},e.id)})})]}),(0,P.jsx)(_,{sx:{px:{xs:2,sm:3},py:{xs:2,sm:2.5},pb:{xs:`calc(var(--safe-area-bottom-computed) + 16px)`,sm:2.5},borderTop:`1px solid`,borderColor:`divider`,gap:{xs:1,sm:2}},children:(0,P.jsx)(v,{onClick:()=>z(!1),variant:`outlined`,fullWidth:window.innerWidth<600,sx:{minHeight:{xs:44,sm:36},fontSize:{xs:`1rem`,sm:`0.875rem`}},children:T(`settings.mcpServer.builtinDialog.close`)})})]}),(0,P.jsx)(i,{open:G.open,autoHideDuration:3e3,onClose:()=>K({...G,open:!1}),children:(0,P.jsx)(re,{severity:G.severity,onClose:()=>K({...G,open:!1}),children:G.message})})]})};export{F as default};