import{i as e,n as t,t as n}from"./core-Drq98oSU.js";var r;(function(e){e[e.Audio=1]=`Audio`,e[e.Cache=2]=`Cache`,e[e.Config=3]=`Config`,e[e.Data=4]=`Data`,e[e.LocalData=5]=`LocalData`,e[e.Document=6]=`Document`,e[e.Download=7]=`Download`,e[e.Picture=8]=`Picture`,e[e.Public=9]=`Public`,e[e.Video=10]=`Video`,e[e.Resource=11]=`Resource`,e[e.Temp=12]=`Temp`,e[e.AppConfig=13]=`AppConfig`,e[e.AppData=14]=`AppData`,e[e.AppLocalData=15]=`AppLocalData`,e[e.AppCache=16]=`AppCache`,e[e.AppLog=17]=`AppLog`,e[e.Desktop=18]=`Desktop`,e[e.Executable=19]=`Executable`,e[e.Font=20]=`Font`,e[e.Home=21]=`Home`,e[e.Runtime=22]=`Runtime`,e[e.Template=23]=`Template`})(r||={});var i;(function(e){e[e.Start=0]=`Start`,e[e.Current=1]=`Current`,e[e.End=2]=`End`})(i||={});function a(e){return{isFile:e.isFile,isDirectory:e.isDirectory,isSymlink:e.isSymlink,size:e.size,mtime:e.mtime===null?null:new Date(e.mtime),atime:e.atime===null?null:new Date(e.atime),birthtime:e.birthtime===null?null:new Date(e.birthtime),readonly:e.readonly,fileAttributes:e.fileAttributes,dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,blksize:e.blksize,blocks:e.blocks}}function o(e){let t=new Uint8ClampedArray(e),n=t.byteLength,r=0;for(let e=0;e<n;e++){let n=t[e];r*=256,r+=n}return r}var s=class extends t{async read(t){if(t.byteLength===0)return 0;let n=await e(`plugin:fs|read`,{rid:this.rid,len:t.byteLength}),r=o(n.slice(-8)),i=n instanceof ArrayBuffer?new Uint8Array(n):n;return t.set(i.slice(0,i.length-8)),r===0?null:r}async seek(t,n){return await e(`plugin:fs|seek`,{rid:this.rid,offset:t,whence:n})}async stat(){return a(await e(`plugin:fs|fstat`,{rid:this.rid}))}async truncate(t){await e(`plugin:fs|ftruncate`,{rid:this.rid,len:t})}async write(t){return await e(`plugin:fs|write`,{rid:this.rid,data:t})}};async function c(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);return new s(await e(`plugin:fs|create`,{path:t instanceof URL?t.toString():t,options:n}))}async function l(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);return new s(await e(`plugin:fs|open`,{path:t instanceof URL?t.toString():t,options:n}))}async function u(t,n,r){if(t instanceof URL&&t.protocol!==`file:`||n instanceof URL&&n.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|copy_file`,{fromPath:t instanceof URL?t.toString():t,toPath:n instanceof URL?n.toString():n,options:r})}async function d(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|mkdir`,{path:t instanceof URL?t.toString():t,options:n})}async function f(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);return await e(`plugin:fs|read_dir`,{path:t instanceof URL?t.toString():t,options:n})}async function p(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);let r=await e(`plugin:fs|read_file`,{path:t instanceof URL?t.toString():t,options:n});return r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r)}async function m(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);let r=await e(`plugin:fs|read_text_file`,{path:t instanceof URL?t.toString():t,options:n}),i=r instanceof ArrayBuffer?r:Uint8Array.from(r);return new TextDecoder().decode(i)}async function h(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);let r=t instanceof URL?t.toString():t;return await Promise.resolve({path:r,rid:null,async next(){this.rid===null&&(this.rid=await e(`plugin:fs|read_text_file_lines`,{path:r,options:n}));let t=await e(`plugin:fs|read_text_file_lines_next`,{rid:this.rid}),i=t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t),a=i[i.byteLength-1]===1;return a?(this.rid=null,{value:null,done:a}):{value:new TextDecoder().decode(i.slice(0,i.byteLength)),done:a}},[Symbol.asyncIterator](){return this}})}async function g(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|remove`,{path:t instanceof URL?t.toString():t,options:n})}async function _(t,n,r){if(t instanceof URL&&t.protocol!==`file:`||n instanceof URL&&n.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|rename`,{oldPath:t instanceof URL?t.toString():t,newPath:n instanceof URL?n.toString():n,options:r})}async function v(t,n){return a(await e(`plugin:fs|stat`,{path:t instanceof URL?t.toString():t,options:n}))}async function y(t,n){return a(await e(`plugin:fs|lstat`,{path:t instanceof URL?t.toString():t,options:n}))}async function b(t,n,r){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|truncate`,{path:t instanceof URL?t.toString():t,len:n,options:r})}async function x(t,n,r){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);if(n instanceof ReadableStream){let e=await l(t,{read:!1,create:!0,write:!0,...r}),i=n.getReader();try{for(;;){let{done:t,value:n}=await i.read();if(t)break;await e.write(n)}}finally{i.releaseLock(),await e.close()}}else await e(`plugin:fs|write_file`,n,{headers:{path:encodeURIComponent(t instanceof URL?t.toString():t),options:JSON.stringify(r)}})}async function S(t,n,r){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);await e(`plugin:fs|write_text_file`,new TextEncoder().encode(n),{headers:{path:encodeURIComponent(t instanceof URL?t.toString():t),options:JSON.stringify(r)}})}async function C(t,n){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);return await e(`plugin:fs|exists`,{path:t instanceof URL?t.toString():t,options:n})}var w=class extends t{};async function T(t,r,i){let a=Array.isArray(t)?t:[t];for(let e of a)if(e instanceof URL&&e.protocol!==`file:`)throw TypeError(`Must be a file URL.`);let o=new n;o.onmessage=r;let s=new w(await e(`plugin:fs|watch`,{paths:a.map(e=>e instanceof URL?e.toString():e),options:i,onEvent:o}));return()=>{s.close()}}async function E(e,t,n){return await T(e,t,{delayMs:2e3,...n})}async function D(e,t,n){return await T(e,t,{...n,delayMs:void 0})}async function O(t){if(t instanceof URL&&t.protocol!==`file:`)throw TypeError(`Must be a file URL.`);return await e(`plugin:fs|size`,{path:t instanceof URL?t.toString():t})}export{r as BaseDirectory,s as FileHandle,i as SeekMode,u as copyFile,c as create,C as exists,y as lstat,d as mkdir,l as open,f as readDir,p as readFile,m as readTextFile,h as readTextFileLines,g as remove,_ as rename,O as size,v as stat,b as truncate,E as watch,D as watchImmediate,x as writeFile,S as writeTextFile};