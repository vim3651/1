import{t as e}from"./Card-CgnXHdbl.js";import{t}from"./CardActions-Di-BmE_R.js";import{t as n}from"./CardContent-f2tPkMYB.js";import{n as r,t as i}from"./Tabs-DsnHk16H.js";import{t as ee}from"./plus-DCrdXXDc.js";import{$ as a,Ad as o,Al as te,Bl as ne,Cd as re,Du as ie,Ef as ae,Eu as s,Iu as c,Ju as l,Ll as oe,Mn as se,Nu as u,Qu as d,Sd as ce,Vu as f,Wu as le,bd as ue,dd as de,fd as p,fp as fe,ju as m,md as pe,pp as me,qd as he,qp as ge,s as h,td as g,vd as _,xd as v,xp as _e,xu as ve,yp as ye,zl as be,zp as xe}from"./index-hvLbsAjx.js";var y=ge(xe(),1),b=ge(_e(),1);function Se(e){let{children:t,value:n,index:r,...i}=e;return(0,b.jsx)(`div`,{role:`tabpanel`,hidden:n!==r,id:`model-settings-tabpanel-${r}`,"aria-labelledby":`model-settings-tab-${r}`,...i,children:n===r&&(0,b.jsx)(p,{sx:{p:3},children:t})})}var x=.7,S=1,C=()=>{let ge=me(),_e=fe(),xe=ye(),C=_e.state?.assistant,[w,T]=(0,y.useState)(x),[E,D]=(0,y.useState)(S),[O,Ce]=(0,y.useState)(40),[k,we]=(0,y.useState)(0),[A,Te]=(0,y.useState)(0),[j,Ee]=(0,y.useState)(null),[De,M]=(0,y.useState)(``),[N,Oe]=(0,y.useState)([]),[P,F]=(0,y.useState)(4096),[I,ke]=(0,y.useState)({}),[L,Ae]=(0,y.useState)(`text`),[R,je]=(0,y.useState)(`auto`),[z,Me]=(0,y.useState)(!0),[B,Ne]=(0,y.useState)([`TEXT`]),[V,Pe]=(0,y.useState)(1),[H,Fe]=(0,y.useState)(!1),[Ie,Le]=(0,y.useState)(`zh-CN`),[U,Re]=(0,y.useState)(!1),[W,ze]=(0,y.useState)(0),[G,Be]=(0,y.useState)(`medium`),[K,Ve]=(0,y.useState)(``),[q,J]=(0,y.useState)([]),[He,Ue]=(0,y.useState)(!1),[We,Ge]=(0,y.useState)(!1),[Y,Ke]=(0,y.useState)(16e3),[X,qe]=(0,y.useState)(5),[Je,Ye]=(0,y.useState)(`medium`),[Z,Xe]=(0,y.useState)(!0),[Q,Ze]=(0,y.useState)(0);(0,y.useEffect)(()=>{(async()=>{Ke(a.getParameter(`contextLength`,16e3)),qe(a.getParameter(`contextCount`,5)),Ye(a.getParameter(`defaultThinkingEffort`,`medium`));let e=a.getParameter(`maxOutputTokens`,4096);e!==P&&F(e),Xe(a.isParameterEnabled(`maxOutputTokens`)),a.isParameterEnabled(`temperature`)&&T(a.getParameter(`temperature`,x)),a.isParameterEnabled(`topP`)&&D(a.getParameter(`topP`,S))})();let e=e=>{if(e.key===`appSettings`&&e.newValue)try{let e=a.getParameter(`maxOutputTokens`,4096);e!==P&&F(e)}catch(e){console.error(`解析localStorage变化失败:`,e)}},t={temperature:{setter:T,eventName:`temperatureChanged`},topP:{setter:D,eventName:`topPChanged`},maxOutputTokens:{setter:F,eventName:`maxOutputTokensChanged`},topK:{setter:Ce,eventName:`topKChanged`},frequencyPenalty:{setter:we,eventName:`frequencyPenaltyChanged`},presencePenalty:{setter:Te,eventName:`presencePenaltyChanged`},seed:{setter:Ee,eventName:`seedChanged`},user:{setter:M,eventName:`userChanged`},thinkingBudget:{setter:ze,eventName:`thinkingBudgetChanged`}},n=e=>(t=>{let n=t.detail.value??t.detail;n!==void 0&&e(n)}),r=(e=>{Xe(e.detail)});window.addEventListener(`storage`,e),window.addEventListener(`enableMaxTokensChanged`,r);let i=Object.entries(t).map(([e,{setter:t,eventName:r}])=>{let i=n(t);return window.addEventListener(r,i),{eventName:r,handler:i}});return()=>{window.removeEventListener(`storage`,e),window.removeEventListener(`enableMaxTokensChanged`,r),i.forEach(({eventName:e,handler:t})=>{window.removeEventListener(e,t)})}},[P]),(0,y.useEffect)(()=>{C&&(console.log(`AssistantModelSettings: 初始化助手数据`,{assistant:C,temperature:C?.temperature,topP:C?.topP,model:C?.model}),T(C.temperature??x),D(C.topP??S),Ce(C.topK??40),we(C.frequencyPenalty??0),Te(C.presencePenalty??0),Ee(C.seed??null),M(C.user??``),Oe(C.stopSequences??[]),F(C.maxTokens??4096),ke(C.logitBias??{}),Ae(C.responseFormat??`text`),je(C.toolChoice??`auto`),Me(C.parallelToolCalls??!0),Ne(C.responseModalities??[`TEXT`]),Pe(C.candidateCount??1),Fe(C.enableSpeech??!1),Le(C.speechLanguage??`zh-CN`),Re(C.enableThinking??!1),ze(C.thinkingBudget??0),Be(C.mediaResolution??`medium`),Ve(C.model||``),J(C.customParameters||[]))},[C]),(0,y.useEffect)(()=>{Ue(w!==(C?.temperature??x)||E!==(C?.topP??S)||O!==(C?.topK??40)||k!==(C?.frequencyPenalty??0)||A!==(C?.presencePenalty??0)||j!==(C?.seed??null)||JSON.stringify(N)!==JSON.stringify(C?.stopSequences??[])||P!==(C?.maxTokens??4096)||JSON.stringify(I)!==JSON.stringify(C?.logitBias??{})||L!==(C?.responseFormat??`text`)||R!==(C?.toolChoice??`auto`)||z!==(C?.parallelToolCalls??!0)||JSON.stringify(B)!==JSON.stringify(C?.responseModalities??[`TEXT`])||V!==(C?.candidateCount??1)||H!==(C?.enableSpeech??!1)||Ie!==(C?.speechLanguage??`zh-CN`)||U!==(C?.enableThinking??!1)||W!==(C?.thinkingBudget??0)||G!==(C?.mediaResolution??`medium`)||K!==(C?.model||``)||q.length>0)},[w,E,O,k,A,j,N,P,I,L,R,z,B,V,H,Ie,U,W,G,K,q,C]);let Qe=()=>{let e={name:``,value:``,type:`string`};J([...q,e])},$=(e,t,n)=>{let r=[...q];if(t===`type`){let t=``;switch(n){case`number`:t=0;break;case`boolean`:t=!1;break;case`json`:t=``;break;default:t=``}r[e]={...r[e],type:n,value:t}}else r[e]={...r[e],[t]:n};J(r)},$e=e=>{J(q.filter((t,n)=>n!==e))},et=(e,t)=>{switch(e.type){case`number`:return(0,b.jsx)(s,{type:`number`,value:e.value,onChange:e=>$(t,`value`,parseFloat(e.target.value)||0),size:`small`,fullWidth:!0,inputProps:{step:.01}});case`boolean`:return(0,b.jsx)(h,{checked:e.value,onChange:e=>$(t,`value`,e.target.checked)});case`json`:return(0,b.jsx)(s,{multiline:!0,rows:3,value:typeof e.value==`string`?e.value:JSON.stringify(e.value,null,2),onChange:e=>{try{$(t,`value`,JSON.parse(e.target.value))}catch{$(t,`value`,e.target.value)}},size:`small`,fullWidth:!0,placeholder:`{"key": "value"}`});default:return(0,b.jsx)(s,{value:e.value,onChange:e=>$(t,`value`,e.target.value),size:`small`,fullWidth:!0,placeholder:`参数值`})}},tt=()=>{ge(`/settings`)},nt=async()=>{if(C){Ge(!0);try{let e={...C,temperature:w,topP:E,...O!==40&&{topK:O},...k!==0&&{frequencyPenalty:k},...A!==0&&{presencePenalty:A},...j!==null&&{seed:j},...N.length>0&&{stopSequences:N},maxTokens:P,...(()=>(a.setParameter(`maxOutputTokens`,P,Z),{}))(),...Object.keys(I).length>0&&{logitBias:I},...L!==`text`&&{responseFormat:L},...R!==`auto`&&{toolChoice:R},...z!==!0&&{parallelToolCalls:z},...JSON.stringify(B)!==JSON.stringify([`TEXT`])&&{responseModalities:B},...V!==1&&{candidateCount:V},...H&&{enableSpeech:H,speechLanguage:Ie},...U&&{enableThinking:U,thinkingBudget:W},...G!==`medium`&&{mediaResolution:G},model:K,customParameters:q,updatedAt:new Date().toISOString()};console.log(`AssistantModelSettings: 保存助手设置`,{assistantId:C.id,assistantName:C.name,temperature:w,topP:E,selectedModel:K,updatedAssistant:e}),await ae.saveAssistant(e),xe(se(e)),Ue(!1),console.log(`助手设置已保存成功`)}catch(e){console.error(`保存助手设置失败:`,e)}finally{Ge(!1)}}},rt=()=>{T(x),D(S),Ce(40),we(0),Te(0),Ee(null),M(``),Oe([]),F(4096),ke({}),Ae(`text`),je(`auto`),Me(!0),Ne([`TEXT`]),Pe(1),Fe(!1),Le(`zh-CN`),Re(!1),ze(0),Be(`medium`),Ve(``),J([])};return C?(0,b.jsxs)(p,{sx:{flexGrow:1,display:`flex`,flexDirection:`column`,height:`100vh`,bgcolor:e=>e.palette.mode===`light`?he(e.palette.primary.main,.02):he(e.palette.background.default,.9)},children:[(0,b.jsx)(ue,{position:`fixed`,elevation:0,sx:{zIndex:e=>e.zIndex.drawer+1,bgcolor:`background.paper`,color:`text.primary`,borderBottom:1,borderColor:`divider`,backdropFilter:`blur(8px)`},children:(0,b.jsxs)(ie,{children:[(0,b.jsx)(re,{edge:`start`,color:`inherit`,onClick:tt,"aria-label":`back`,sx:{color:e=>e.palette.primary.main},children:(0,b.jsx)(ve,{})}),(0,b.jsxs)(v,{variant:`h6`,component:`div`,sx:{flexGrow:1,fontWeight:600,backgroundImage:`linear-gradient(90deg, #9333EA, #754AB4)`,backgroundClip:`text`,color:`transparent`},children:[C.name,` - 模型设置`]}),He&&(0,b.jsx)(de,{startIcon:(0,b.jsx)(be,{}),onClick:nt,disabled:We,variant:`contained`,size:`small`,sx:{background:`linear-gradient(90deg, #9333EA, #754AB4)`,fontWeight:600,"&:hover":{background:`linear-gradient(90deg, #8324DB, #6D3CAF)`}},children:We?`保存中...`:`保存`})]})}),(0,b.jsxs)(p,{sx:{flexGrow:1,overflowY:`auto`,p:{xs:1,sm:2},mt:8,"&::-webkit-scrollbar":{width:{xs:`4px`,sm:`6px`}},"&::-webkit-scrollbar-thumb":{backgroundColor:`rgba(0,0,0,0.1)`,borderRadius:`3px`}},children:[(0,b.jsxs)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,b.jsxs)(p,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,b.jsx)(v,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`}},children:`助手信息`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`当前正在配置的助手详细信息`})]}),(0,b.jsx)(g,{}),(0,b.jsx)(p,{sx:{p:{xs:1.5,sm:2}},children:(0,b.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:2},children:[(0,b.jsx)(pe,{sx:{width:{xs:40,sm:48},height:{xs:40,sm:48},bgcolor:he(`#9333EA`,.12),color:`#9333EA`,boxShadow:`0 2px 6px rgba(0,0,0,0.05)`},children:C.emoji||C.name.charAt(0)}),(0,b.jsxs)(p,{sx:{flex:1},children:[(0,b.jsx)(v,{variant:`h6`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`}},children:C.name}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`配置模型参数和行为设置`}),C.isSystem&&(0,b.jsx)(_,{label:`系统助手`,size:`small`,sx:{mt:.5,bgcolor:he(`#9333EA`,.1),color:`#9333EA`,fontWeight:500,fontSize:{xs:`0.7rem`,sm:`0.75rem`},height:{xs:20,sm:24}}})]})]})})]}),(0,b.jsx)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:(0,b.jsxs)(i,{value:Q,onChange:(e,t)=>Ze(t),variant:`fullWidth`,sx:{"& .MuiTab-root":{fontWeight:600,fontSize:{xs:`0.8rem`,sm:`0.875rem`},textTransform:`none`,"&.Mui-selected":{color:`#9333EA`}},"& .MuiTabs-indicator":{backgroundColor:`#9333EA`,height:3}},children:[(0,b.jsx)(r,{label:`通用参数`}),(0,b.jsx)(r,{label:`OpenAI 专属`}),(0,b.jsx)(r,{label:`Gemini 专属`}),(0,b.jsx)(r,{label:`自定义参数`})]})}),(0,b.jsx)(Se,{value:Q,index:0,children:(0,b.jsxs)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,b.jsxs)(p,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,b.jsx)(v,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`}},children:`通用参数设置`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`配置模型的基础参数，适用于大多数AI模型`})]}),(0,b.jsx)(g,{}),(0,b.jsx)(p,{sx:{p:{xs:1.5,sm:2}},children:(0,b.jsxs)(le,{sx:{p:0},children:[(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`默认模型`}),(0,b.jsx)(s,{value:K,onChange:e=>Ve(e.target.value),placeholder:`输入模型ID`,size:`small`,fullWidth:!0})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`温度 (Temperature)`}),(0,b.jsx)(_,{label:w.toFixed(2),size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`控制回答的创造性和随机性。较低值更保守，较高值更有创意。`}),(0,b.jsx)(m,{value:w,onChange:(e,t)=>{let n=t;T(n),a.setParameter(`temperature`,n)},min:0,max:2,step:.01,marks:[{value:0,label:`0`},{value:.7,label:`0.7`},{value:2,label:`2`}]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`Top-P`}),(0,b.jsx)(_,{label:E.toFixed(2),size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`控制词汇选择的多样性。较低值更聚焦，较高值更多样。`}),(0,b.jsx)(m,{value:E,onChange:(e,t)=>{let n=t;D(n),a.setParameter(`topP`,n)},min:0,max:1,step:.01,marks:[{value:0,label:`0`},{value:1,label:`1`}]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`Top-K`}),(0,b.jsx)(_,{label:O,size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`限制每步采样时考虑的最可能的token数量。较低值更保守，较高值更多样。`}),(0,b.jsx)(m,{value:O,onChange:(e,t)=>{let n=t;Ce(n),a.setParameter(`topK`,n)},min:1,max:100,step:1,marks:[{value:1,label:`1`},{value:40,label:`40`},{value:100,label:`100`}]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`频率惩罚 (Frequency Penalty)`}),(0,b.jsx)(_,{label:k.toFixed(2),size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`根据token在文本中出现的频率对其进行惩罚。正值减少重复，负值增加重复。`}),(0,b.jsx)(m,{value:k,onChange:(e,t)=>{let n=t;we(n),a.setParameter(`frequencyPenalty`,n)},min:-2,max:2,step:.01,marks:[{value:-2,label:`-2`},{value:0,label:`0`},{value:2,label:`2`}]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`存在惩罚 (Presence Penalty)`}),(0,b.jsx)(_,{label:A.toFixed(2),size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`对已出现的token进行惩罚，不考虑频率。正值鼓励新话题，负值保持话题。`}),(0,b.jsx)(m,{value:A,onChange:(e,t)=>{let n=t;Te(n),a.setParameter(`presencePenalty`,n)},min:-2,max:2,step:.01,marks:[{value:-2,label:`-2`},{value:0,label:`0`},{value:2,label:`2`}]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`随机种子 (Seed)`}),(0,b.jsx)(_,{label:j??`随机`,size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`设置随机种子以获得可重现的结果。留空使用随机种子。`}),(0,b.jsx)(s,{type:`number`,value:j??``,onChange:e=>{let t=e.target.value?parseInt(e.target.value):null;Ee(t),a.setParameter(`seed`,t)},placeholder:`留空使用随机种子`,size:`small`,fullWidth:!0})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`用户标识 (User)`}),(0,b.jsx)(_,{label:De||`未设置`,size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`用于追踪和分析的用户 ID，可用于日志记录和使用统计。`}),(0,b.jsx)(s,{type:`text`,value:De,onChange:e=>{let t=e.target.value;M(t),a.setParameter(`user`,t)},placeholder:`输入用户标识`,size:`small`,fullWidth:!0})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`最大输出Token (Max Output Tokens)`}),(0,b.jsx)(h,{checked:Z,onChange:e=>{let t=e.target.checked;Xe(t),a.setParameterEnabled(`maxOutputTokens`,t)}})]}),(0,b.jsx)(_,{label:Z?`${P} tokens`:`已禁用`,size:`small`,color:Z?`default`:`secondary`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`限制模型生成的最大token数量。不同模型支持的最大输出长度不同，如果设置值超过模型限制，API会自动调整或返回错误。 较高值允许更长的回复，但会消耗更多资源和时间。关闭开关后，API请求中不会包含此参数。`}),(0,b.jsx)(p,{sx:{mb:2,px:1,opacity:Z?1:.5},children:(0,b.jsx)(m,{value:Math.min(P,65536),onChange:(e,t)=>{let n=t;F(n),a.setParameter(`maxOutputTokens`,n)},disabled:!Z,min:256,max:65536,step:256,marks:[{value:256,label:`256`},{value:2048,label:`2K`},{value:4096,label:`4K`},{value:8192,label:`8K`},{value:16384,label:`16K`},{value:32768,label:`32K`},{value:65536,label:`64K`}],sx:{"& .MuiSlider-markLabel":{fontSize:`0.7rem`}}})}),(0,b.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:1,mb:1},children:[(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{minWidth:`fit-content`},children:`精确值:`}),(0,b.jsx)(s,{type:`text`,value:P,onChange:e=>{let t=e.target.value;if(t===``||/^\d+$/.test(t)){let e=t===``?0:parseInt(t);e<=2e6&&(F(e),a.setParameter(`maxOutputTokens`,e))}},disabled:!Z,size:`small`,sx:{width:120}}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,children:`tokens (最大2M)`})]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsxs)(p,{sx:{display:`flex`,alignItems:`center`,gap:1},children:[(0,b.jsx)(oe,{size:20,color:`var(--mui-palette-primary-main)`}),(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`上下文设置 (快速访问)`})]}),(0,b.jsx)(_,{label:`${Y===64e3?`不限`:Y} 字符 | ${X===100?`最大`:X} 条`,size:`small`,color:`primary`,variant:`outlined`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`快速调整上下文长度、消息数量和思维链设置。这些设置会影响所有助手的对话行为。`}),(0,b.jsxs)(p,{sx:{mb:2},children:[(0,b.jsxs)(v,{variant:`body2`,sx:{mb:1,fontWeight:`medium`},children:[`上下文长度: `,Y===64e3?`不限`:Y,` 字符`]}),(0,b.jsx)(m,{value:Y,onChange:(e,t)=>{let n=t;Ke(n),a.setParameter(`contextLength`,n)},min:0,max:64e3,step:1e3,marks:[{value:0,label:`0`},{value:16e3,label:`16K`},{value:32e3,label:`32K`},{value:64e3,label:`64K`}]})]}),(0,b.jsxs)(p,{sx:{mb:2},children:[(0,b.jsxs)(v,{variant:`body2`,sx:{mb:1,fontWeight:`medium`},children:[`上下文消息数: `,X===100?`最大`:X,` 条`]}),(0,b.jsx)(m,{value:X,onChange:(e,t)=>{let n=t;qe(n),a.setParameter(`contextCount`,n)},min:0,max:100,step:1,marks:[{value:0,label:`0`},{value:25,label:`25`},{value:50,label:`50`},{value:100,label:`最大`}]})]}),(0,b.jsxs)(p,{children:[(0,b.jsx)(v,{variant:`body2`,sx:{mb:1,fontWeight:`medium`},children:`默认思维链长度`}),(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`思维链长度`}),(0,b.jsxs)(u,{value:Je,onChange:e=>{let t=e.target.value;Ye(t),a.setParameter(`defaultThinkingEffort`,t)},label:`思维链长度`,children:[(0,b.jsx)(c,{value:`off`,children:`关闭思考`}),(0,b.jsx)(c,{value:`low`,children:`低强度思考`}),(0,b.jsx)(c,{value:`medium`,children:`中强度思考（推荐）`}),(0,b.jsx)(c,{value:`high`,children:`高强度思考`}),(0,b.jsx)(c,{value:`auto`,children:`自动思考`})]})]})]})]}),(0,b.jsx)(g,{}),(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`停止序列 (Stop Sequences)`}),(0,b.jsx)(_,{label:N.length,size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`遇到这些字符序列时停止生成。每行一个序列。`}),(0,b.jsx)(s,{multiline:!0,rows:3,value:N.join(`
`),onChange:e=>Oe(e.target.value.split(`
`).filter(e=>e.trim())),placeholder:`每行输入一个停止序列`,size:`small`,fullWidth:!0})]})]})})]})}),(0,b.jsx)(Se,{value:Q,index:1,children:(0,b.jsxs)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,b.jsxs)(p,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,b.jsx)(v,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`},color:`#06b6d4`},children:`OpenAI 专属参数`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`专门针对OpenAI模型的高级参数配置`})]}),(0,b.jsx)(g,{}),(0,b.jsx)(p,{sx:{p:{xs:1.5,sm:2}},children:(0,b.jsx)(le,{sx:{p:0},children:(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`响应格式 (Response Format)`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`指定模型响应的格式。JSON模式确保输出为有效JSON。`}),(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`响应格式`}),(0,b.jsxs)(u,{value:L,onChange:e=>Ae(e.target.value),label:`响应格式`,children:[(0,b.jsx)(c,{value:`text`,children:`文本`}),(0,b.jsx)(c,{value:`json_object`,children:`JSON对象`})]})]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`工具选择 (Tool Choice)`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`控制模型是否以及如何调用函数工具。`}),(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`工具选择`}),(0,b.jsxs)(u,{value:R,onChange:e=>je(e.target.value),label:`工具选择`,children:[(0,b.jsx)(c,{value:`none`,children:`禁用`}),(0,b.jsx)(c,{value:`auto`,children:`自动`}),(0,b.jsx)(c,{value:`required`,children:`必须`})]})]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`并行工具调用 (Parallel Tool Calls)`}),(0,b.jsx)(h,{checked:z,onChange:e=>Me(e.target.checked)})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,children:`是否允许模型同时调用多个函数工具。`})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`Logit偏置 (Logit Bias)`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`修改指定token出现的可能性。格式：token_id:bias_value，每行一个。`}),(0,b.jsx)(s,{multiline:!0,rows:3,value:Object.entries(I).map(([e,t])=>`${e}:${t}`).join(`
`),onChange:e=>{let t={};e.target.value.split(`
`).forEach(e=>{let[n,r]=e.split(`:`);n&&r&&!isNaN(Number(r))&&(t[n.trim()]=Number(r))}),ke(t)},placeholder:`例如：50256:-100`,size:`small`,fullWidth:!0})]})]})})})]})}),(0,b.jsx)(Se,{value:Q,index:2,children:(0,b.jsxs)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,b.jsxs)(p,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,b.jsx)(v,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`},color:`#8b5cf6`},children:`Gemini 专属参数`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`专门针对Google Gemini模型的高级参数配置`})]}),(0,b.jsx)(g,{}),(0,b.jsx)(p,{sx:{p:{xs:1.5,sm:2}},children:(0,b.jsx)(le,{sx:{p:0},children:(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`候选数量 (Candidate Count)`}),(0,b.jsx)(_,{label:V,size:`small`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`生成的候选响应数量。注意：仅部分模型支持多候选。`}),(0,b.jsx)(m,{value:V,onChange:(e,t)=>Pe(t),min:1,max:4,step:1,marks:[{value:1,label:`1`},{value:2,label:`2`},{value:3,label:`3`},{value:4,label:`4`}]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`响应模态 (Response Modalities)`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`指定模型可以返回的内容类型。`}),(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`响应模态`}),(0,b.jsxs)(u,{multiple:!0,value:B,onChange:e=>Ne(e.target.value),label:`响应模态`,children:[(0,b.jsx)(c,{value:`TEXT`,children:`文本`}),(0,b.jsx)(c,{value:`IMAGE`,children:`图像`}),(0,b.jsx)(c,{value:`AUDIO`,children:`音频`})]})]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`语音输出 (Speech Output)`}),(0,b.jsx)(h,{checked:H,onChange:e=>Fe(e.target.checked)})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`启用语音输出功能。`}),H&&(0,b.jsxs)(d,{size:`small`,fullWidth:!0,sx:{mt:2},children:[(0,b.jsx)(l,{children:`语音语言`}),(0,b.jsxs)(u,{value:Ie,onChange:e=>Le(e.target.value),label:`语音语言`,children:[(0,b.jsx)(c,{value:`zh-CN`,children:`中文（简体）`}),(0,b.jsx)(c,{value:`en-US`,children:`英语（美国）`}),(0,b.jsx)(c,{value:`ja-JP`,children:`日语`}),(0,b.jsx)(c,{value:`ko-KR`,children:`韩语`})]})]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`思维链 (Thinking)`}),(0,b.jsx)(h,{checked:U,onChange:e=>Re(e.target.checked)})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`启用思维链功能，显示模型的推理过程。Gemini使用token数量控制(0-24576)，OpenAI使用强度等级控制。`}),U&&(0,b.jsxs)(p,{sx:{mt:2},children:[(0,b.jsxs)(v,{variant:`body2`,sx:{mb:1},children:[`思维预算: `,W,` tokens`]}),(0,b.jsx)(m,{value:W,onChange:(e,t)=>ze(t),min:0,max:24576,step:256,marks:[{value:0,label:`0`},{value:2048,label:`2K`},{value:8192,label:`8K`},{value:16384,label:`16K`},{value:24576,label:`24K`}]})]})]}),(0,b.jsxs)(p,{sx:{mb:3},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{mb:1,fontWeight:`medium`},children:`媒体分辨率 (Media Resolution)`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`处理图像和视频时的分辨率设置。`}),(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`媒体分辨率`}),(0,b.jsxs)(u,{value:G,onChange:e=>Be(e.target.value),label:`媒体分辨率`,children:[(0,b.jsx)(c,{value:`low`,children:`低 (64 tokens)`}),(0,b.jsx)(c,{value:`medium`,children:`中 (256 tokens)`}),(0,b.jsx)(c,{value:`high`,children:`高 (256 tokens + 缩放)`})]})]})]})]})})})]})}),(0,b.jsx)(Se,{value:Q,index:3,children:(0,b.jsxs)(o,{elevation:0,sx:{mb:2,borderRadius:2,border:`1px solid`,borderColor:`divider`,overflow:`hidden`,bgcolor:`background.paper`,boxShadow:`0 4px 12px rgba(0,0,0,0.05)`},children:[(0,b.jsxs)(p,{sx:{p:{xs:1.5,sm:2},bgcolor:`rgba(0,0,0,0.01)`},children:[(0,b.jsx)(v,{variant:`subtitle1`,sx:{fontWeight:600,fontSize:{xs:`1rem`,sm:`1.1rem`},color:`#10b981`},children:`自定义参数`}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{fontSize:{xs:`0.8rem`,sm:`0.875rem`}},children:`为模型添加自定义参数，支持多种数据类型`})]}),(0,b.jsx)(g,{}),(0,b.jsx)(p,{sx:{p:{xs:1.5,sm:2}},children:(0,b.jsxs)(le,{sx:{p:0},children:[(0,b.jsxs)(f,{sx:{flexDirection:`column`,alignItems:`stretch`,py:2},children:[(0,b.jsxs)(p,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:2},children:[(0,b.jsx)(v,{variant:`subtitle2`,sx:{fontWeight:`medium`},children:`自定义参数`}),(0,b.jsx)(de,{startIcon:(0,b.jsx)(ee,{}),onClick:Qe,variant:`outlined`,size:`small`,children:`添加参数`})]}),(0,b.jsx)(v,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:`为模型添加自定义参数，支持字符串、数字、布尔值和JSON格式。`}),q.length===0?(0,b.jsx)(p,{sx:{textAlign:`center`,py:3,color:`text.secondary`},children:(0,b.jsx)(v,{variant:`body2`,children:`暂无自定义参数，点击"添加参数"开始配置`})}):(0,b.jsx)(p,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:q.map((r,i)=>(0,b.jsxs)(e,{variant:`outlined`,sx:{p:0},children:[(0,b.jsx)(n,{sx:{pb:1},children:(0,b.jsxs)(p,{sx:{display:`flex`,gap:2,alignItems:`center`,flexWrap:`wrap`},children:[(0,b.jsx)(p,{sx:{flex:`1 1 200px`,minWidth:`150px`},children:(0,b.jsx)(s,{label:`参数名`,value:r.name,onChange:e=>$(i,`name`,e.target.value),size:`small`,fullWidth:!0,placeholder:`参数名称`})}),(0,b.jsx)(p,{sx:{flex:`0 0 120px`},children:(0,b.jsxs)(d,{size:`small`,fullWidth:!0,children:[(0,b.jsx)(l,{children:`类型`}),(0,b.jsxs)(u,{value:r.type,onChange:e=>$(i,`type`,e.target.value),label:`类型`,children:[(0,b.jsx)(c,{value:`string`,children:`字符串`}),(0,b.jsx)(c,{value:`number`,children:`数字`}),(0,b.jsx)(c,{value:`boolean`,children:`布尔值`}),(0,b.jsx)(c,{value:`json`,children:`JSON`})]})]})}),(0,b.jsx)(p,{sx:{flex:`1 1 200px`,minWidth:`150px`},children:et(r,i)})]})}),(0,b.jsx)(t,{sx:{pt:0,justifyContent:`flex-end`},children:(0,b.jsx)(re,{onClick:()=>$e(i),color:`error`,size:`small`,children:(0,b.jsx)(te,{})})})]},i))})]}),(0,b.jsx)(f,{sx:{justifyContent:`center`,py:3},children:(0,b.jsx)(de,{startIcon:(0,b.jsx)(ne,{}),onClick:rt,variant:`outlined`,color:`secondary`,children:`重置为默认值`})})]})})]})})]})]}):(0,b.jsx)(p,{sx:{p:2},children:(0,b.jsx)(ce,{severity:`error`,children:`未找到助手信息，请返回重新选择`})})};export{C as default};